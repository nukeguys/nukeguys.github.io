{"componentChunkName":"component---src-pages-index-tsx","path":"/","result":{"data":{"site":{"siteMetadata":{"title":"nukeguys blog","description":"about development, life and something.","siteUrl":"https://nukeguys.github.io"}},"allMarkdownRemark":{"edges":[{"node":{"excerpt":"…","html":"<h3>열심히도 준비가 필요하다.</h3>\n<p>최근 요가를 배우면서 얼마 되진 않았지만 나름 아주 조금은 더 유연해진 느낌을 받았다. 쉬엄쉬엄해야지 하다가 막상 가면 죽기살기로 했으니까 늘어야만 한다.\n그런데 이게 또 문제가 됐다. 파드마사나(일명 가부좌) 같은 자세를 몸이 아직인데 억지로 하다보니 발목과 무릎 상태가 급 안좋아졌다. 평소 쓰지 않던 근육에 무리하게 힘이 들어간게 원인인 듯 하다.\n역시나 무작정 열심히는 좋지않다. 열심히도 준비가 필요하다.</p>\n<h3>누구의 잘못인가?</h3>\n<p>늦은 저녁 또는 밤, 가끔 술에 취해 비틀거리는 사람들을 마주치곤 한다.<br>\n지난 주에도 운동을 마치고 퇴근하는 길 버스를 기다리는데, 한 여자가 비틀대며 몸을 못 가누고 서있는게 보였다.\n집에 가기 위해 택시를 잡는 듯 한데 쉽지 않은 모양이다. 다른 사람이 부른 택시를 잘못 탔다가 다시 내리고 또 비틀비틀 거린다.\n위태로워 보인다. 그러면서 문득 이런 생각이 들었다. “저 상황은 과연 누구의 잘못일까?”<br>\n짧은 생각에 이른 결론은 이렇다.<br>\n마신 자도, 먹인 자도, 같이 마신 자도, 같이 안마신 자도 결국 모두의 잘못이다.(실제로 머릿속엔 놈 자(者) 자가 쓰였다.)</p>\n<h3>책 읽는 습관</h3>\n<p>책 읽기를 시작한고 한 달 남짓 시간이 지났다. 나름 지치지 않고 지속하기 위해 얇은 책들만 골라서 부지런히 읽었다. 다섯권째 책을 읽고 있으니 일주일에 한 권정도는 읽은 것 같다.\n<code>무리하지 않는 선에서(한수의)</code>를 시작으로 <code>돈의 속성(김승호)</code>, <code>대체 뭐가 문제야(제럴드 M. 와인버그 , 도널드 고즈)</code>, <code>돈지랄의 기쁨과 슬픔(신예희)</code>, <code>참을 수 없는 거짓말의 유혹(리아 헤이거 코헨)</code>까지.\n습관이 만들어지는데 3주가 걸린다고 했던가? 하지만 아직은 모르겠다. 마침 자리잡아 갈 시점에 다시 재택근무가 시작되버려서 살짝 걱정이 되기도 하지만 마음을 다잡아 봐야겠다.</p>\n<h3>돈지랄의 기쁨과 슬픔</h3>\n<p>책읽기를 하면서 얇은 책을 위주로 골라서 보다보니 가끔 다음 책을 골라서 주문하기 전에 이전 책을 다 읽는 경우가 생긴다.\n그런 경우를 대비해 가벼운 책을 하나 골라서 중간중간 나눠서 읽었던 책이 이름하야 <a href=\"https://page.kakao.com/home?seriesId=55378931\">돈지랄의 기쁨과 슬픔</a>이다.\n미니멀리즘을 지향(만) 하는 나로서는 제목이 뭔가 흥미를 당겼다. 생각나는 내용들 몇가지만 적어본다.<br>\n미니멀리즘도 결국엔 이것저것 사서 써보고 정말로 나에게 맞는 그 한가지를 골라서 사용하는 것이다. 결국 그 한가지를 찾을 때 까지는 미니멀리즘도 쉽지 않다. 그래서 그런지 한 때 미니멀리즘으로 이름을 알렸던 한 일본인은 자신이 직접 고른 비싼 물건을 온라인으로 판매하고 있단다. 뭔소린가 싶었다.<br>\n나를 위해 쓰는 돈을 아끼지 말라고 한다. 돈을 쓰는 대신 난 시간을 얻을 수 있으니 말이다. 한두 푼 아끼기 위해 시간을 잔뜩 들이고 있다가 그 시간이 더 아깝다는 느낌을 받은 적이 한두 번이 아니다. 공감이 많이 되는 말이었다.<br>\n내가 가장 우선순위가 높다야 한다. 예를 들어 가장 맛있는건 내가 먹고, 같이 식사를 하는 사람이 있으면 그 사람에게 몰아주는 것이 아니라 똑같이 나눠먹는다. 즉 남을 위해 나를 낮추지 않는다. 자존감과도 연결이 되는 부분이다.<br>\n내용은 가볍고 별 것 아닌 듯 위트있게 글을 썼지만 나름 통찰력이 있는 책이었다. 양도 적어 시간 날 때 가볍게 읽어보기 괜찮을 듯 하다.</p>","fields":{"slug":"/life/short-stories-0816/"},"frontmatter":{"date":"2020/08/16","title":"8월 셋째 주","description":"","tags":[]}}},{"node":{"excerpt":"최근 프로젝트에 E2E 테스트를 위해 cypress 적용했다. 아직 안정화도 더 필요하고 계속 다듬어 가야 하지만, 사내에 공유하는 자리가 생겨 준비할 겸 겸사겸사 cypress…","html":"<p>최근 프로젝트에 E2E 테스트를 위해 <a href=\"https://cypress.io\">cypress</a> 적용했다. 아직 안정화도 더 필요하고 계속 다듬어 가야 하지만, 사내에 공유하는 자리가 생겨 준비할 겸 겸사겸사 cypress 사용법을 정리해본다.</p>\n<h3>준비</h3>\n<p>일단 테스트를 작성한 프로젝트를 하나 준비한 다음 <code>cypress</code>를 설치 후 실행해본다. (node나 npm을 사용할 필요학 없다면 직접 바이너리를 다운받아서 사용 할 수 있다.)</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 설치</span>\n<span class=\"token function\">npm</span> i --save-dev cypress\n<span class=\"token comment\"># 실행</span>\nnpx cypress run</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1024px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/995fd88d9451cc66902c806cc028d6b7/90a2a/install.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.72422680412372%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB7klEQVQ4y32SzW7TQBCA/QRIUKokjeP1T/23LsnatePaNIa0iihpiESSIqhRJQ5w5siFU4nEgacBlQfgpUBpvMPYhcgONIdPY894P8/srvDy9NgZDA4/h2H4qRsE88D3557nrXBdd97tdudRFBXP5VqJS+QLYywVeg/jN09OTiB5dAQd5sGDNgPDMCqYplmwni9jWRYoivJDaFPj3H16Ae6rj7/I8P1CjM8WMpEWsixXIIT8kyvxE2UgSdJXIfA6qTt+B+3Xl1lj9IE3eykoMsn/VgEXFVEUxYK1+lJV1Vx4JTDmpvHjY+gNRpnFIq5TtlpcFuHHUK/XodFoQK1WW+XziJSFLA18DzzGsj1KuYn7cZswl+XSjUI8nRS7xE23M0r3uGlaFWFZqmkatFqtgpKsKsSrkCJg2xSFzkZhfpqU0iKuTVHuMBd6G4V/pfnVcRyn6PRWIcpwZA8smy6pgyNbNlcU9b/ohsl13eCKqnK5WrtWtV0gRL4Sgn03RcA2dU5NvMS7KhBxB0jrBrmg+Yf191V+qRIRpGbju9BJnp33Z2+hN75YukfTjPUn3Dk8RUacIvrBkKvhkGsbwPq1Ho9BCwbfhDt0sLXtTxIxfpHshNOCZjS74WCW3Penyd39SXJvA1jvbfmz/rb/3P4NzGZcvfefjNUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"install\"\n        title=\"install\"\n        src=\"/static/995fd88d9451cc66902c806cc028d6b7/3b243/install.png\"\n        srcset=\"/static/995fd88d9451cc66902c806cc028d6b7/00397/install.png 256w,\n/static/995fd88d9451cc66902c806cc028d6b7/c5a17/install.png 512w,\n/static/995fd88d9451cc66902c806cc028d6b7/3b243/install.png 1024w,\n/static/995fd88d9451cc66902c806cc028d6b7/ccc27/install.png 1536w,\n/static/995fd88d9451cc66902c806cc028d6b7/12f40/install.png 2048w,\n/static/995fd88d9451cc66902c806cc028d6b7/90a2a/install.png 3104w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>실행을 하게 되면 테스트코드 및 필요한 파일들이 위치할 4개의 폴더가 추가된다. cypress에서 권장하는 구조이지만 필요시 설정파일을 통해 변경할 수 있다.</p>\n<p><strong>integration</strong>: test 코드가 위치하는 곳이다. examples 폴더에 예제 파일들이 추가되어 있는데 필요시 보는 것도 많은 도움이된다.<br>\n<strong>fixtures</strong>: 네트워크 응답 같은 테스트에 필요한 정적인 데이터들 만들어 둘 수 있다. <code>cy.fixture()</code> 커맨드를 통해 사용할 수 있다.<br>\n<strong>plugins</strong>: 플러그인(cypress lifecycle의 특정 단계에 실행할 코드 작성, 동적으로 설정 구성 등)을 작성할 수 있다. 기본으로 <code>cypress/plugins/index.js</code>이 포함되어 있는데 각 spec 파일이 실행되기 전에 한 번 수행된다.<br>\n<strong>support</strong>: plugins 처럼 <code>cypress/support/index.js</code> 파일이 각 테스트 파일 수행 전 실행된다. 주로 <code>custom command</code>나 모든 spec 파일에 적용하거나 사용할 코드를 작성한다. 예로 before나 beforeEach를 정의할 수 있다.</p>\n<h3>테스트</h3>\n<p>cypress는 node용 테스트 프레임워크인 <a href=\"https://mochajs.org/\">mocha</a>와 assertion 라이브러리 <a href=\"https://www.chaijs.com/\">chai</a>를 기반으로 만들어졌다. 따라서 아래처럼 테스트를 구조화 하고 작성할 때는 mocha를 따르고 assertion시에는 chai 문법을 사용 할 수 있다. (그외에도 mocking 라이브러리나 jQuery도 사용가능하다.)</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'My First Test'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Does not do much!'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">.</span><span class=\"token function\">equal</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>글로벌 서비스에 적용을 했지만, 이번엔 국내 <a href=\"https://page.kakao.com\">카카오페이지 웹</a>을 대상으로 검색기능에 대한 테스트 코드를 작성하면서 기본적인 사용법을 정리해본다.</p>\n<h4>테스트 정의</h4>\n<p>spec 파일(test.spec.js)을 생성 후 기본적인 커맨드들을 어느정도 사용할 수 있도록 테스트를 임의로 하나 정의했다.(추가적인 커맨드 사용을 위해 약간 불필요한 가정들을 하고 작성한 부분도 있다.)</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'cypress demo'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">context</span><span class=\"token punctuation\">(</span><span class=\"token string\">'검색'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'검색 후 결과를 클릭하면 작품홈으로 이동한다.'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code>describe</code>을 통해 테스트를 분류하고 <code>it</code>으로 실제 테스트 코드를 작성한다. <code>context</code>는 <code>descript</code>과 같은 역할을 하는데 가독성을 위해 다르게 사용했다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1024px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e19955c881e7f911e90d28446323fb36/af602/launch.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.58771929824562%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACQElEQVQ4y6WTS28SURSAMfGxca0WMBabalsEtMDwEChtVLoRtv4J927FGE1MXJbEmlCh5ZVqauJWGxbyWLGrCCItFBvB0kp5DDN37vHeodA2QdR6ki/n5Jy5351kzkgkJO45LKO3Z/VGo9msn5mZZihT9inGMetgXC4Xwck4nXd72KftDGMwMDabjTGZTIzFclNvMpuNVpv1HPWdtmi1q/ZbNlDfMHJXxtSogwaNKyeR6jrTQaMnMEip1qFrBL3BipQqLZrUmWm/rTNYYWR04gEVnn367HnylS8I3gW/4F1YBJ8/AC/mvbC4FIJAMAJLAQLJ3ToUXobl1ysQjryBYCgCPp8frbx9B27340ei8NPaWrzVakKj0UAI8ZjnOdxus1ggtSAgTHuH4Xkecxwn1i2WxT9rDQ5IxGIf3aIwk8kkms0GlEolVC6XYbu6A9XdOlSqNdje2aMX/ZZ6vYFre3WeCqPRaEf4Nb+eaLIINopbiGVZEAQBEMIEkgUMGA8EA2BRmEgkOsJCsZigDTJC0Avcy38Skjgq3NzsCjHqd2hQHBYmk8mOsFgcLPzbN+wrhH+MvsJCoSAKyc4g8kHwMRCF8Xi8I6xUKrH9C+k+oWPQpodTqdRDUfj+w2rq29Z3SH/OQvZL7oBsDnK5PJC1Esmvbxyd75NOZ6Bc/kH+mvATKjwzJBu+L5UrXkplw3MEj4hc4RmSXvIoRq56xifUnjGCSqP1yGi/+8wBc7KLl+fPX5DfkZAhlZ4gnPpPTlLPLxZpUFdiu7LMAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"launch\"\n        title=\"launch\"\n        src=\"/static/e19955c881e7f911e90d28446323fb36/3b243/launch.png\"\n        srcset=\"/static/e19955c881e7f911e90d28446323fb36/00397/launch.png 256w,\n/static/e19955c881e7f911e90d28446323fb36/c5a17/launch.png 512w,\n/static/e19955c881e7f911e90d28446323fb36/3b243/launch.png 1024w,\n/static/e19955c881e7f911e90d28446323fb36/ccc27/launch.png 1536w,\n/static/e19955c881e7f911e90d28446323fb36/af602/launch.png 1824w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\ncyprss를 실행해보면 작성한 spec 파일이 목록에 나오는 것을 볼 수 있다. cypress는 chromium 기반으로 실행되는데, 기본으로 electron이 포함되어 있고 설치된 브라우저가 있다면 오른쪽 목록에 표시된다. 실행시 원하는 브라우저로 변경해서 테스트 할 수 있다.</p>\n<h4>테스트 코드 작성</h4>\n<h5>웹 사이트 방문</h5>\n<p>특정 웹 사이트에 대해 테스트를 작성하려면 기본적으로 해당 웹을 방문해야 한다. cypress에서는 <code>cy.visit()</code>을 사용한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'test demo'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">context</span><span class=\"token punctuation\">(</span><span class=\"token string\">'검색'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'메인홈에서 검색 후 결과를 클릭하면 작품홈으로 이동한다.'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      cy<span class=\"token punctuation\">.</span><span class=\"token function\">visit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://page.kakao.com/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1024px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/174a7e4d7f25dae85c2d68af94df6ee9/90a2a/visit.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.72422680412372%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAADSElEQVQ4y22S32/TVhTH/T/wuKEitKod27RBU4a2YQEP3Uul9pkgoY0NaRIarzwgsWmkoqEIIe2hTRdI6MYPAdJEloQBbdSGtFs3KqDd0hCaJo2btHFiOz/9I/b57todjIdZ+sjnXN/7uT46h+vZ9e47Xx4/du7hZOzs/O9/eEK/RD179x3wvPf+Ps8HPR979vTu38L1icPu13iZs+/fMUZce3k3d+fW7c8kqQKt0UC9WkW5IuH58zTS6RWkX2SwuppzyGbXkM3lkVsTsMaw33Zuk8lk2TkZMzOPZrh4PH5YlOsoS3VNVmpGrVYzLNMw2oZuEJFhscQyTQPAFmzNNNsspv/WAJUBQRDucten7rkrSg2qZlgacxiGDsMwoGsaO0sgttFitE3LQVIUFIobaDSbtgOmZUE32qYdFwqFMHd9dtLdYpJqtWbJSpUYaLZUqKrGNhpQG1VoFQFKIb9FUUCzzIRyBWuZFUibBehKxRHm8/kw93Mi5m7pOsRK1doQZRLLMjZFCRVJgSTLKK/nUc0sQxM3oG8IaBXzqAk5RHyj8J88gQd+H4p/L5oGcyynUmEukUi47RJVVbVarRYxYNNgTZJlCevFElbyIhMJkOenIf71DMnVIiLjo7h/aRh3hs7gydOkaVqEVGo5zM3OzjpCJrGazSYxHGG9XneEQmETC89SEOamUPrzIbKRW1hYXEHqURTq+hKSTxfweOmFyR4mfO0P/0+osJIzbFyik3Ekfg3hyVQI86EbCF27ipD/IuI3R3EvGsX9md9M2/FKqLP6mcT8V+jAxoeYlJYWl+jS8BCNeb6loa+/otNfHKXTx47Q8Jlv6OTxE3T21CkaH/O37Qam0+kwNzc357bs1us6aWxUbPnWBU3WlAZyqSnEgh9ieuIgHox/hNsjuxG5/Cmmb/YjdPkQYj8dwuPo56autZBMLke4WCx2WJIkiKJoMqxSqUTlcpnYkJLPN06+se9pInCBrgbO04/BCzQRvEgB/wgF/V66FhyhiSteuvLD+XYgEIDX6w1xfX192wYHB/mBgYFX2Hl/fz/f3d3Fv9W5i9++w+XwZkcPv71jD79jp4vv2NnLv9Fhr/ey2LW/q6v7YGdn59v/AAtjLDcWxlB0AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"visit\"\n        title=\"visit\"\n        src=\"/static/174a7e4d7f25dae85c2d68af94df6ee9/3b243/visit.png\"\n        srcset=\"/static/174a7e4d7f25dae85c2d68af94df6ee9/00397/visit.png 256w,\n/static/174a7e4d7f25dae85c2d68af94df6ee9/c5a17/visit.png 512w,\n/static/174a7e4d7f25dae85c2d68af94df6ee9/3b243/visit.png 1024w,\n/static/174a7e4d7f25dae85c2d68af94df6ee9/ccc27/visit.png 1536w,\n/static/174a7e4d7f25dae85c2d68af94df6ee9/12f40/visit.png 2048w,\n/static/174a7e4d7f25dae85c2d68af94df6ee9/90a2a/visit.png 3104w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>cypress에서 추가한 spec 파일을 클릭에서 실행해보면 정상적으로 웹에 방문한 것을 확인 할 수 있다.</p>\n<p>한 가지 알아두어야 할 점은, 보통 unit test를 하면 given/when/then 구조로 마지막에 assertion을 하는 것으로 테스트 결과를 평가하는데, cypress의 커맨드들은 각각이 성공/실패 여부를 가질 수 있고 이에 따라 테스트 결과도 결정된다(아닌 커맨드들도 있다). 또 기본적으로 정해진 timeout동안 성공할 때 까지 retry를 한다. 즉 위의 visit도 단순히 방문하는 역할이라고 볼 수 있지만, <code>pageLoadTimeout</code>동안 해당 페이지의 <code>load</code> 이벤트를 기다린다. 만약 그 시간동안 load이벤트가 발생하지 않으면 실패가 된다.</p>\n<p>E2E 테스트 자체가 사용자의 행위를 코드로 묘사하면서 테스트를 수행하는 BDD이기 때문에 각 행위 자체가 정상적으로 동작해야 다음 단계로 넘어간다. 따라서 어찌보면 당연하다고 볼 수 있다.</p>\n<h5>검색 후 결과 클릭 및 이동 확인</h5>\n<p>최근 시즌2가 시작된 나 혼자만 레벨업 웹툰을 검색해서 테스트 해본다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'test demo'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">context</span><span class=\"token punctuation\">(</span><span class=\"token string\">'검색'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'메인홈에서 검색 후 결과를 클릭하면 작품홈으로 이동한다.'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> contentTitle <span class=\"token operator\">=</span> <span class=\"token string\">'나 혼자만 레벨업'</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// 방문 > 검색창 찾기 > 검색어 입력 > 검색버튼 클릭</span>\n      cy<span class=\"token punctuation\">.</span><span class=\"token function\">visit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://page.kakao.com/'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'input.searchTextField'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">type</span><span class=\"token punctuation\">(</span>contentTitle<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'img[alt=\"검색 버튼\"]'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// 검색 페이지 확인 > 웹툰/만화 탭 클릭</span>\n      cy<span class=\"token punctuation\">.</span><span class=\"token function\">location</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pathname'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">should</span><span class=\"token punctuation\">(</span><span class=\"token string\">'equal'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'/search'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      cy<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span><span class=\"token string\">'웹툰/만화'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// 결과 클릭 > 작품홈 이동 확인</span>\n      <span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">^</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>contentTitle<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">$</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      cy<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">location</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pathname'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">should</span><span class=\"token punctuation\">(</span><span class=\"token string\">'equal'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'/home'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>테스트를 위해 특정 요소를 가져오거나 조작하거나 DOM 이벤트를 처리하는 과정이 필요하다. 우선 요소를 가져올 때는 간단히 selector를 사용할 수 있다. 이 때는 <code>cy.get()</code>을 사용한다. document 전체에서 해당 요소를 가져온다. 특정 요소의 하위에서만 찾을 필요가 있으면 <code>cy.find()</code>를 사용할 수 있다.</p>\n<p>검색을 위해서는 input에 검색어를 입력하고 검색 버튼을 클릭하는 행위가 필요하다. 이를 위해서는 각각 <code>type</code>과 <code>click</code> 커맨드를 사용한다.</p>\n<p>클릭 후 검색결과가 표시되어야 하기 때문에 검색 페이지로 이동되었는지 확인한다. 이 때는 <code>location</code>을 사용할 수 있는데 <code>pathname</code>을 통해 간단히 확인했다.</p>\n<p>이 후 동명의 소설도 있기 때문에 웹툰을 선택하기 위해 웹툰 탭을 선택한다. 이 때는 특정 text를 포함하고 있는 요소를 찾아서 반환해 주는 <code>contains</code>를 사용했다(단, <a href=\"https://docs.cypress.io/api/commands/contains.html#Preferences\">text를 직접 가지고 있는 요소가 아닐 수 있는 것에 주의한다.</a>). cypress에서는 가능하다면 selector를 사용하는 것보다 contains를 사용하는 것을 권장하는데 이는 DOM에 의존적이지 않고 사용자가 직접 동작하는 행위와 가깝기 때문인 듯 하다. 만약 contains를 사용하지 못하다면 <code>data-cy-*</code>와 같은 속성을 지정하고 사용하는 것도 괜찮은 방법이다.</p>\n<p>검색결과에서에서 검색어가 포함된 요소를 가져와서 클릭 후 마찬가지로 <code>pathname</code>을 통해 페이지가 정상적으로 이동되었는지 확인한다. 이 때 정규식을 사용한 것은 검색 페이지의 안내문구에 검색어가 포함되어 있기 때문에 퍼펙트매칭을 통해 결과를 가져오기 위해서다.</p>\n<p>최종 결과를 테스트해서 확인해 본다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1024px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/24a30381bf4c3b0c964a11b745848c7c/90a2a/result.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.72422680412372%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAACzUlEQVQ4y2WSW2sTURDH9zv4GXrxhtobEW3QF/HBQlP0pXkS0Y8hYhuQ4mMfennpS7HQC2gbFbQtttLY+iQUzEWTbtJNdrPZWzbJ3mecs21ixMCPmR1y/uc/M4cbvHTl8tNnT1593t6dPjr8ntjc+pAYidxJXL0WSVwfvJUYGB79hxtDtzsMtOPw6BTxemgkGufWV9ceq6qCdqOBpmFgTVExm81hLvcbc7/yWCjwmD+H5XzxFIsEz5fw5Jx8/oTOafhl7+set7+/PylrJtZU09Y0wzXqhhv4ruu5jouILkDgQnAGIoQ13/fC2IVFoCAI77g3Ox/jil5Hy3ID23bBdR10XRdt2w5xHAc936eah61WC2VZZgfRoG48z0PHblG94TNBnueT3MrBdrzlOVivm4Fu1IGgP1ghqqqiruv4/MVLXFvbQDYaVjv7AQJAmPmAPrnGTCaT5FZTO/GG7WBFUoNCSYTTsoRlSUGZZqJrGirEw0eTuLK8HB5mjoMgCMU8j5wL62iL2z6JYib9M8mtfduN1y0bi2I1KFUkEGsa1gwTtXojdKMRhwcpWkqB2QjHwSKDCXr6D3T0tO8HJJhJk2BqN27QrI4FIShUqlCq1pAXZZRVHRUSM6llv9nAJs2POfuPcEvdLZNDkxyKZTkQJQVkhYRo66puoqIo1LaOuqqFzphA213HJS3Rslo+y9NpcrhOghrdfiyc+sVqDYSaChVFA80wgRYCJApHqSNoNJtgWRbQ5iHcSBfMHrssm82ezdCiAZRkDYqiEi6kLKmhQza/crmCG2+3wm2zp8Iie05tt+zp0EVth++55M6nSTYrSar6FVEKKhURKIdiqQSLi4swOzsL09NTMDc312F+fh4WFhY60Le3tLSEMzMzm9zYvfsXYuPj0VjsLxMTsejY2INoX19ftL+/P3ozEgnzNr29vdGenp5uRql+l+LFP1DCT4AaRcTwAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"result\"\n        title=\"result\"\n        src=\"/static/24a30381bf4c3b0c964a11b745848c7c/3b243/result.png\"\n        srcset=\"/static/24a30381bf4c3b0c964a11b745848c7c/00397/result.png 256w,\n/static/24a30381bf4c3b0c964a11b745848c7c/c5a17/result.png 512w,\n/static/24a30381bf4c3b0c964a11b745848c7c/3b243/result.png 1024w,\n/static/24a30381bf4c3b0c964a11b745848c7c/ccc27/result.png 1536w,\n/static/24a30381bf4c3b0c964a11b745848c7c/12f40/result.png 2048w,\n/static/24a30381bf4c3b0c964a11b745848c7c/90a2a/result.png 3104w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>화면의 왼쪽에서 각 커맨드를 선택하면 실행되는 순간의 화면이 표시되고 콘솔에서는 커맨드의 구체적인 정보도 확인할 수 있다.</p>\n<h5>개선</h5>\n<p>위의 테스트에서 몇가지를 개선해보자. 우선 검색 결과를 클릭하려면 실제로 결과가 나오는 작품이어야 한다. 나혼렙이 내려갈 일이 있을리는 없겠지만, 그래도 보다 정확한 테스트를 위해 작품을 지정하지 않고 웹에 노출되고 있는 작품을 하나 골라서 사용하도록 한다.(임의로 웹툰의 랭킹 1위 작품으로 해본다.)<br>\n다음으로는 응답이 느린 경우를 고려해보자. 검색 버튼을 누른 후에 결과가 표시되려면 검색 api가 결과를 받아온 뒤여야 한다.(네트워크 속도를 낮추고 검색해보면 로딩 인디케이터가 표시되는 것을 볼 수 있다.) 이것도 가능성은 크지 않지만, api 응답이 timeout보다 오래 걸리는 경우라면 결과요소를 가져올 때 실패할 수 있다. 따라서 api를 기다린 후에 결과를 선택해서 클릭하도록 수정해본다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'test demo'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">context</span><span class=\"token punctuation\">(</span><span class=\"token string\">'검색'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'메인홈에서 검색 후 결과를 클릭하면 작품홈으로 이동한다.'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      cy<span class=\"token punctuation\">.</span><span class=\"token function\">visit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://page.kakao.com/'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'img[alt=\"웹툰/만화\"]'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      cy<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.rankingSection div'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1위'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">contentTitle</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          cy<span class=\"token punctuation\">.</span><span class=\"token function\">server</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          cy<span class=\"token punctuation\">.</span><span class=\"token function\">route</span><span class=\"token punctuation\">(</span>\n            <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'https://api2-page.kakao.com/api/v3/store/search'</span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">as</span><span class=\"token punctuation\">(</span><span class=\"token string\">'api_search'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n          cy<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'input.searchTextField'</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">type</span><span class=\"token punctuation\">(</span>contentTitle<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'img[alt=\"검색 버튼\"]'</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">wait</span><span class=\"token punctuation\">(</span><span class=\"token string\">'@api_search'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n          cy<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span><span class=\"token string\">'웹툰/만화'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n          <span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">^</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>contentTitle<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">$</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          cy<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">location</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pathname'</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">should</span><span class=\"token punctuation\">(</span><span class=\"token string\">'equal'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'/home'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>우선 웹툰의 랭킹1위에서 title을 가져오는 부분을 보자. 요소를 선택한 다음 textContent를 가져와야 하는데, 요소에서는 jQuery의 <code>text()</code> 함수를 사용할 수 있다. 하지만 cypress 커맨드에서는 대상이 cypress 객체이기 때문에 체이닝에서 바로 사용 할 수 없고, 객체의 함수를 실행해주는 <code>invoke</code> 커맨드를 통해 처리한다.<br>\ncypress의 테스트는 바로 실행되지 않고 전체 테스트 코드가 평가된 후에 한 번에 테스트가 진행된다. 즉 각 커맨드는 실행 할 행동을 예약하는 역할을 한다고 볼 수 있다. 따라서 아래처럼 코드를 작성하는 것은 불가능 하다.\n만약 커맨드가 yield하는 값을 직접 접근하기 위해서는 위에서 처럼 <code>then</code>을 사용한다.(promise와 같다고 보면 된다.)</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> contentTitle <span class=\"token operator\">=</span> cy\n  <span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.rankingSection div'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1위'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncy<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'input.searchTextField'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">type</span><span class=\"token punctuation\">(</span>contentTitle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>cypress에서는 네트워크 요청도 컨트롤이 가능한데, 이 때 <code>server()</code>와 <code>route()</code>를 사용한다. 특정 api 요청을 발생시킬 수도 있고, 응답을 직접 지정해 줄 수도 있다. 위처럼 아무것도 없이 사용하면 해당 api응답이 발생할 때 까지 기다리는 것도 가능하다. 여기서 사용한 <code>as</code>는 alias를 지정할 수 있는 커맨드로, 사용할 때는 파라미터로 지정한 alias 앞에 <code>@</code>를 붙여서 사용한다.</p>\n<h5>커스텀 커맨드</h5>\n<p>예에서는 테스트 케이스를 하나만 작성했지만, 만약 검색에 대한 테스트 케이스가 더 추가된다고 해보자. 그러면 검색 페이지로 이동하는 부분은 동일하게 필요해진다. 이렇게 특정 spec 파일에서 공통된 코드는 해당 파일에서 함수로 작성해서 공용화 하면 되는데, 다른 spec 파일에서도 필요하다면 커스텀 커맨드로 만들어 두면 유용하다.</p>\n<p><code>support/command.js</code>파일에 아래 코드를 추가해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">Cypress<span class=\"token punctuation\">.</span>Commands<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'search'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">text</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  cy<span class=\"token punctuation\">.</span><span class=\"token function\">server</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  cy<span class=\"token punctuation\">.</span><span class=\"token function\">route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'https://api2-page.kakao.com/api/v3/store/search'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">as</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'api_search'</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  cy<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'input.searchTextField'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">type</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'img[alt=\"검색 버튼\"]'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">wait</span><span class=\"token punctuation\">(</span><span class=\"token string\">'@api_search'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>그러면 테스트 코드에서 해당 부분은 <code>cy.search(contentTitle)</code>로 간단하게 사용이 가능하다. 그리고 웹 사이트에 방문하는건 현재 spec 파일의 모든 테스트 케이스의 사전 조건이다(그렇다고 가정하자). 그럼 각 테스트 마다 추가하는 것이 아닌 <code>beforeEach</code>를 통해 각 테스트 전에 실행되어야 할 코드를 추가할 수 있다.</p>\n<p>결과적으로는 아래처럼 테스트 코드를 작성할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'test demo'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">context</span><span class=\"token punctuation\">(</span><span class=\"token string\">'검색'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      cy<span class=\"token punctuation\">.</span><span class=\"token function\">visit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://page.kakao.com/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'메인홈에서 검색 후 결과를 클릭하면 작품홈으로 이동한다.'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      cy<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'img[alt=\"웹툰/만화\"]'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      cy<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.rankingSection div'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1위'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">contentTitle</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          cy<span class=\"token punctuation\">.</span><span class=\"token function\">search</span><span class=\"token punctuation\">(</span>contentTitle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          cy<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span><span class=\"token string\">'웹툰/만화'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n          <span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">^</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>contentTitle<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">$</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          cy<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">location</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pathname'</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">should</span><span class=\"token punctuation\">(</span><span class=\"token string\">'equal'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'/home'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>최대한 커맨드들을 많이 사용해 보기 위해 테스트를 약간 인위적으로 처리한 부분도 있긴 하지만, 덕분에 기본적으로 필요한 것들은 대부분 포함이 된 것 같다. 이정도만 알아도 나머지는 알아가면서 충분히 테스트를 작성할 수 있을 거라고 본다.</p>\n<h3>주의할 점</h3>\n<p>cypress를 실제 프로젝트에 적용하면서 까다로웠던 부분이다.</p>\n<p>우선 요소를 가져오는 방법이다. contains를 사용하면 좋다고 했지만 실제로는 사용하지 못하는 경우들이 많았다. data 속성이나 alt가 있는 이미지라면 다행이지만 그렇지 않은 경우에는 대부분 selector를 사용해야 했는데, 최대한 DOM구조에 의존적이지 않도록 하면서 selector를 작성하는게 생각만큼 쉽지 않았다. 테스트를 할 계획이라면 미리 고려해서 구현하는 것도 좋을 듯 하다.</p>\n<p>두 번째는 api와 같은 비동기 처리다. 위에서도 언급했지만 특정 api가 수행된 이후에 표시되는 화면 요소들은 직접 구현된 코드를 보지 않으면 알기가 어렵다. 더구나 보통의 경우에는 문제 없이 테스트가 통과하기 때문에 여러번 반복해서 테스트를 실행해야 에러가 발생한다. 물론 응답 속도 자체도 테스트의 일부에 포함시켜 실패로 간주할 수 있지만, 그렇지 않다면 코드를 일일이 확인하거나 반복하는 수밖에 없다.</p>\n<p>마지막으로는 아무래도 유저 행동을 테스트하는 부분이다 보니 조건부 테스트가 필요한 곳들이 생긴다. 즉 유저의 현재 상태에 따라 테스트가 진행되어야 하는데 그런 상황을 코드로 모두 만들어 내는 것이 쉽지 않은 경우들이 있다. 그래서 원하는 테스트를 만들 수 없는 경우도 있고, 미리 조건을 만들어 놓고 테스트를 해야만 하는 경우도 있는데 실 서비스 환경에서 처리해야 하기 때문에 이것도 간단하지는 않을 수 있다.</p>\n<p>적용이 어려운 부분들이 조금 있고 아쉬운 부분들도 있긴 하지만, 모니터링 목적으로 주기적으로 CI에서 돌리고 있고 그 와중에 실제 문제들도 잡아서 제 역할도 나름 하고 있다. 완벽하지는 않아도 일단 간단하게 나마 적용해보는 것도 나쁘진 않을 것 같다.</p>","fields":{"slug":"/dev/cypress/"},"frontmatter":{"date":"2020/08/02","title":"cypress 무작정 따라하기","description":"","tags":["cypress","E2E"]}}},{"node":{"excerpt":"…","html":"<p><strong>“어깨에 힘 좀 빼세요”</strong></p>\n<p>주말에 운동을 갈 때 마다 자주 듣는 말이다. 자세 교정을 위해 운동하는 모습을 영상으로 찍고 확인해왔기 때문에 내 어깨에 힘이 들어간다는 건 오래 전 부터 알고는 있었다. 어깨가 안좋아지는데도 한 몫 했을 거다.<br>\n그동안 어깨에 힘을 빼기 위해 노력을 안해본 건 아니다. 강습이 끝나면 혼자 쉬운 루트를 수없이 반복하면서 어떻게 해야 어깨에 힘이 덜 들어가는지 연습을 해왔다. 하지만 팔로 매달린 상태에서 어깨에 힘을 뺀다는게 도통 느낌이 오지 않았다. 그리고 어김없이 이번주도 강습을 받다가 한 소리를 들었다.<br>\n“어차피 연습이잖아요. 떨어지면 어때요. 어깨에 힘 좀 빼고 하세요.” 그 말을 듣고 문득 생각이 들었다. “떨어져도 되는구나.” 그래서 왠만한 높이에서 떨어져도 아프지 않을 두툼한 매트리스가 바닥에 넓게 깔려있었다.</p>\n<p>강습이 끝나고 한동안 가만히 앉아서 다른 사람들이 하는 모습을 구경하면서 곰곰이 생각을 해봤다. 클라이밍은 시작하면 떨어지지 않고 마지막 홀드를 두 손으로 잡고 내려와야 성공이다. 작은 홀드를 잡고 딛은 상태에서 버텨야 하기 때문에, 최대한 적은 힘으로 매달리고 움직이는 것이 핵심이고 그러기 위한 기술들을 익힌다. 그런데 욕심이 과해지면 몸이 긴장을 하면서 자세가 무너지고 버티기 위해 과도하게 힘이 들어가게 된다. 잘하기 위한 마음이 오히려 방해가 되고 있었다.</p>\n<p>사실 클라이밍 뿐 아니라 모든 운동에서 제 실력을 발휘하기 위해서는 힘 빼기는 필수적이다. 골프의 스윙에서도 복싱의 펀치에서도 야구의 배팅에서도, 심지어 팔을 쓰지 않는 등산에서 조차 잘하기 위해서는 어깨에 힘을 빼야 한다. 힘을 뺀다는 건 힘을 전혀 주지 않는 것과는 다르다. 필요한 순간 필요한 곳에 집중해서 힘을 주기 위해 불필요한 곳에 힘을 빼는 것이다.</p>\n<p>얼마 전부터 요가를 배우기 시작했다. 기존에 생각했던 것과는 아주 많이 달랐다. 명상이나 스트레칭 정도로 생각했는데 막상 직접해보니 어지간한 운동보다 힘이 많이 든다. 하지만 아이러니 하게 요가는 힘을 빼는 방법을 수련하는 운동이다. 요가의 동작 중에는 몸을 접거나 비트는 동작들이 많다. 처음 하다보면 어떻게든 조금이라도 더 하기 위해 몸에 힘을 준다. 힘만 더들고 진전은 없다. 하지만 한 호흡씩 가다듬고 몸에 힘을 빼다 보면 오히려 몸에 여유 공간이 생긴다. 그리고 나면 힘을 많이 주지 않아도 자연스레 더 유연해져 있다. 마찬가지로 힘을 제대로 주려면 먼저 힘을 뺄 필요가 있는 것이다.</p>\n<p>어깨에 힘을 뺀다는 건 과한 욕심을 부리지 않는다는 의미이기도 하다. 그렇기 때문에 이 힘 빼기는 일상 속에서도 중요하다. 언젠가 몸도 마음도 너무 긴장하고 살고 있다는 생각을 한 적이 있다. 그래서 비우기와 내려놓기를 해보자 마음을 먹었지만 오래가지 않았다. 항상 마음의 여유를 갖기란 몸에서 힘을 빼는 것 이상으로 어려운 일이었다.</p>\n<p>최근 올해 목표(월 1권 독서)를 달성하기 위해 다시 책을 펴기 시작했다. 첫 번째로 선택한 책은 한수희 작가의 <code>무리하지 않는 선에서(오래오래 좋아하기 위해)</code>이다. 제목처럼 오래가기 위해 무리하지 않는 삶을 사는 자신의 이야기를 에세이로 만들었다. 어찌보면 힘 빼기와 비슷하지 않을까하는 생각이 들었다. 아래는 책의 내용 중 일부다.</p>\n<blockquote>\n<p>(…중략…) 한계가 극복이 아닌 다룸의 대상이라는 말은 한계를 수동적이고 체념적으로 받아들이라는 뜻이 아니다. 오히려 한계가 다룸의 대상이 될 때 사람은 무리하지 않으면서 성장을 도모할 수 있다. 따라서 우리가 알아야 하는 것은 사람마다 재능이 다른 만큼이나 한계도 다르다는 사실이고, 각자가 그 한계를 아는 것이 자기를 파괴하지 않기 위해 중요하다는 점이다.<br>\n(이건 다른 책에 나온 내용을 작가가 언급한 내용이다.)</p>\n</blockquote>\n<blockquote>\n<p>잠은 충분히 자고, 욕심부리지 않고 하루에 중요한 일 두어 가지만 처리하며, 마감일은 스스로 이틀 정도 앞당겨둔다. 오늘 다 끝내고 내일은 노는게 아니라, 오늘도 즐겁게 일하고 내일도 즐겁게 일하는 시스템을 만든다. (…중략…)<br>\n쓸데없이 애쓰지 않는다. 내 한계를 받아들인다. 내 페이스를 유지한다. 뭐든 천천히. 꾸준히 해나간다. 한 번에 한 걸음씩 옮기면 어려울 것은 없다. 무엇보다 중요한 건 무리하지 않는 것이다.</p>\n</blockquote>\n<p>글을 쓰다보니 요즘 너무 힘을 주어 살고 있는게 아닌가 하는 생각도 다시 들었다. 몸에도 마음에도 여러모로 힘을 뺄 필요성이 많이 느껴진다.</p>","fields":{"slug":"/life/relaxation/"},"frontmatter":{"date":"2020/07/26","title":"어깨에 힘 빼기","description":"힘 빼기가 필요하다. 몸도 마음도.","tags":["무리하지 않는 선에서"]}}},{"node":{"excerpt":"…","html":"<p>가끔 너무나 무기력해지는 주말이 있다. 그리고 그 주말이 또 찾아왔다.\n해야겠다 생각했던 일들은 제대로 뭐 하나 하지 못하고 벌써 끝나버렸다. 심지어 글도 쓰다가 마무리를 못해 실패하고 마음을 다잡고 새로 쓰고 있다.</p>\n<p>최근에는 주말마다 할 일들이 쌓여 있었다. 거기에 클라이밍 주말 강습을 시작하면서 토요일은 운동을 마치고 오면 저녁 때라 하루가 거의 사라진다. 그리고 밀린 일들을 하다보면 정신없이 주말이 끝났다. 이번주도 해야지 했던 일들은 많았으나,,, 역시나 외압(?)이 없이는 힘들었던 것 같다. 지난주 까지는 사람들을 만나거나, 정해진 데드라인을 맞춰야 한다거나 하는 일들이었다면 이번엔 그나마 여유가 생기고 개인적인 일들을 계획했었는데, 결과는 대실패다.</p>\n<p>요즘 좀 피곤한 감이 살짝 있었는데 몸이 알아서 반응을 한 것 같다. 운동이 끝나고 유난히 힘들다 싶었는데 일요일이 되자 눈을 뜰 수가 없었다. 보통은 누워 있고 싶어도 오래 있질 못하는데, 신기하게도 가끔씩 이렇게 몸이 지맘대로 쉬어간다. 그야말로 정신승리가 아닌 신체승리라고 할 수 있다. 머리로는 끝없이 일어나라고 외쳐도 몸이 꿈쩍도 안하니까 말이다. 더구나 이렇게 주말이 끝나고 나면 다시 보람을 느끼고 정신승리가 올 때까지는 또 왜 그랬을까 자책하면서 보낸다.</p>\n<p>아마 내일 눈을 뜨면 했어야 했는데를 계속 생각하면서 또 일주일이 시작될 예정이다. 하지만 지맘대로 쉬었던 몸은 또 열심히 달리고 있겠지.</p>\n<p>언제쯤 이 두 놈들이 합이 잘 맞아질런지 모르겠다.</p>","fields":{"slug":"/life/nothing/"},"frontmatter":{"date":"2020/07/20","title":"또 아무것도 하지 않은 주말","description":"머리도 몸도 지들 맘대로","tags":[]}}},{"node":{"excerpt":"…","html":"<p>어떤 선택에는 <code>그럼에도 불구하고</code>가 존재한다.</p>\n<p>누군가는 번역투라거나 군더더기(불구하고가 없어도 의미가 통하기 때문에)가 붙어있는 말이라 사용을 자제해야 한다고도 하지만 그럼에도 불구하고 나는 이 말을 좋아한다. 그 군더더기가 없을 때 보다 있을 때 전해지는 느낌이 있기 때문이다.</p>\n<p>일상에서 ‘그럼에도 불구하고’를 사용할 만한 경우는 많지 않다. 대부분은 싫으면 싫고, 좋으면 좋은 걸로 선택이 쉽게 결정되기 때문이다. 하지만 어떤 중요한 선택과 그 결과에는 ‘그럼에도 불구하고’가 있다. 아니 있어야만 한다. 그 선택이 옳든 그렇지 않든.</p>\n<p>예전 창업에 관심을 가졌을 때, ‘그럼에도 불구하고’가 없었던 난 실행으로 옮기지 못했다. 그 이후 나와 비슷한 사람들을 만나면 난 대부분 반대를 외친다. 경험상 확률적으로는 그 편이 더 나은 조언이라고 보기 때문이다. 하지만 누군가는 ‘그럼에도 불구하고’ 실천으로 옮긴다. 그런 경우엔 마음속으로 진심을 담아 응원해 준다.</p>\n<p>누군가를 좋아하는 일도 그렇다. 좋아했던 그 이유로 헤어진다라는 말도 있듯이, 처음에 누군가 마음에 들어오면 모든 것이 다 좋아 보이지만 곧 그렇지 않다는 걸 깨닫게 된다. 하지만 그럼에도 불구하고 계속 좋아할 수 있다면 평생을 함께 할 수 있는 것이다.</p>\n<p>즉, 누군가에게는 실패할 이유가 수백가지가 되고 모든 사람이 반대해도 해야 하는 이유가 있고, 맞지 않는게 수두룩 하고 매번 다투더라도 사랑할 이유가 있다. ‘그럼에도 불구하고’에는 해내고 말겠다는, 함께 하겠다는 희망과 의지 그리고 용기 같은 것들이 담겨있다.</p>\n<p>생각해보면 우리 모두에겐 ‘그럼에도 불구하고’가 있다.<br>\n누구나 힘이 드는 순간이 있고, 남 모를 아픔과 슬픔을 간직하기도 하고, 잘못된 길인가 잠시 서서 헤맬 때도 있다.\n그럼에도 불구하고 출근을 하고, 그럼에도 불구하고 함께하고, 그럼에도 불구하고 웃고 다시 살아간다.</p>\n<p>하지만 긍정적일 수 만은 없다. 반대로 그럼에도 불구하고 하지 않을 수도, 싫어질 수도 있다. 그 선택 또한 어찌보면 의지고 용기다. 결과가 어떻든 그건 선택에 대한 책임이다. 결과를 미리 알 수도 없을 뿐더러 결과만 가지고 선택의 옳고 그름을 따질 수도 없다.</p>\n<p>난 아직 ‘그럼에도 불구하고’가 부족하다. 말 처럼 적용하기란 쉽지 않은 것도 사실이다. 그럼에도 불구하고 언젠간 회피보단 선택을 하고 결과를 마주해야 한다.</p>\n<p>피곤했던 주말 그리고 월요일 새벽, 그럼에도 불구하고 난 글을 쓰고 있다. 힘든 시기 우리 모두가 그럼에도 불구하고 힘을 내고 행복했으면 좋겠다.</p>","fields":{"slug":"/life/nevertheless/"},"frontmatter":{"date":"2020/07/13","title":"그럼에도 불구하고","description":"한 번 쯤은 믿고 외쳐 볼 만한 말","tags":[]}}},{"node":{"excerpt":"최근 같은 건물에 있는 SK바이오팜이 상장을 했다. 상장 전부터 많은 이슈가 됐지만 가장 관심이 컸던 건 직원들의 우리사주 취득이었다. 기사들에 의하면 인당 평균…","html":"<p>최근 같은 건물에 있는 SK바이오팜이 상장을 했다. 상장 전부터 많은 이슈가 됐지만 가장 관심이 컸던 건 직원들의 우리사주 취득이었다.<br>\n기사들에 의하면 인당 평균 9억의 이익을 올렸다고 하는데 이는 분명 실제와는 차이가 있는 내용일 것다. 하지만 현재 가치로만 따진다면 분명 많은 이익을 기대할 수 있긴 할 거다.<br>\n관련해서 말도 많고 많이 들리기도 하지만 정확한 내용을 몰라 언젠가 도움이 되겠지 하고 이것 저것 정리해봤다.</p>\n<p>우리사주는 말 그대로 근로자가 회사의 주식을 저렴하게 구매할 수 있는 제도로 자본주의를 위한 기업모델로 볼 수 있다.\n이미 미국이나 영국등 외국의 경우에는 많이 활성화 되어 있는데 기업과 근로자 둘 모두에게 이득이 있기 때문이다.</p>\n<p>기업입장에서는 우선 근로자가 얻는 이익으로 인해 생상성을 기대할 수 있다. 회사가 잘되야 개인의 이익도 커지기 때문이다. 추가로 기업에 속한 근로자들이 주주역할을 할 수 있기 때문에 경영권이 안정화되는 효과를 얻는다.</p>\n<p>근로자에게는 주주로서의 경영참여 그리고 경제적인 이득을 얻을 수 있다. 사실 SK바이오팜 처럼 대부분 경영에 참여하는 것 보다는 재산에 더 관심이 많을 것이라고 본다.</p>\n<p>이렇게 노사가 모두 이득을 볼 수 있기 때문에 같은 목적을 가지고 협력적인 관계를 유지할 수 있다는 측면에서 괜찮은 제도라는 생각도 든다.</p>\n<p>하지만 반대의 경우도 있다. 아직 우리나라가 활성화 되지 못한 이유이기도 하다. 근로자 입장에서는 회사가 잘되면 주가 상승으로 개인적인 이득도 커지기 때문에 좋지만, 반대로 회사가 어려워지면 손해가 발생하기도 하고 일자리까지 위협을 받는 상황이 생기기 때문에 무조건 적극적일 수 없다. 실제로 우리나라에는 이런 경우들이 생각보다 많은 비율을 차지한다고 한다. 대표적인 예로 한진해운을 들 수 있는데, 우리사주를 2만원대에 배정하고 4만원을 넘어섰던 주식이 그 잠깐을 이후로 계속 내리막길을 가다가 결국은 파산을 했기 때문이다. 보호예수기간에 걸려 정작 고가일 때는 팔지도 못했다.</p>\n<p>이런 경우를 위해 외국에서는 원금보장 등과 같은 방식으로 손실을 보전해 주는 제도들이 있다. 또 보통 우리사주를 한 번에 많은 양을 취득하게 되면 보통 대출을 받게 되는데 이 때 내는 이자를 인센티브 처럼 보전해 주는 회사들도 있다고 하니 이런 제도들이 적용되면 근로자 입장에서는 부담이 줄어 들어 더 활발해 지지 않을까 싶다.</p>\n<p>좀더 자세히 보면,\nSK바이오팜의 경우는 상장사가 아닌 상장을 하는 시점이었다. 상장시 공모를 하게 되는데, 공모를 하게 되면 우리사주조합에 20%의 우선배정 절차를 의무적으로 거쳐야 한다. 그렇기 때문에 보통 상장사들의 우리사주보다 훨씬 많은 물량이 직원들에게 할당이 되고, 실제로 이 중 40%는 소화가 안돼 실권이 되었다고 한다.</p>\n<p>그렇다고 기회가 왔을 때 무조건 구입을 해야 하는 것도 답은 아니다. 위에 언급한 것 처럼 우리사주는 보호예수 기간(최소 1년)이 있기 때문에 바로 팔 수가 없다. 일단 매수하게 되면 우리사주조합을 통하게 취득을 하게 되고 보호예수 기간이 지나야 가능하다. 따라서 1년 뒤 주가가 어떻게 될 지 모르기 때문에 무조건 취득했다가는 안좋은 예처럼 손해를 보는 경우도 있을 수 있기 때문이다.<br>\n그 밖에도 퇴직, 사망, 조합의 해산시에도 가능한데 이 때문에 SK바이오팜 직원들이 퇴사를 고민한다는 소문이 돌기도 한다. 실제로 한 명이 퇴사를 한다고 하는데 SK바이오팜의 경우 한달에 한 번 퇴직자에게 주식을 전환해주기로 되어 있어 퇴사와 매도 시점 사이에 한 달 정도의 간극이 존재한다. 따라서 그 이유는 아니라고 한다. 아마 나라면 바이오의 경우 가능성도 크고 SK에서 주력으로 밀어주는 회사이기도 하니 장기적인 가치를 생각했을 때 계속 다니는 게 좋지 않을까 하는 생각이다.</p>\n<p>관련해서 세금도 알아둘 필요가 있다. 아무래도 우리사주제도 자체가 노사간의 상생을 위한 제도 이기 때문에 많은 세제 혜택를 제공해 주는 듯 하다. 일단 우리 사주 출자금에 대해서는 연 400만원(벤처는 1500만원) 까지 소득공제 및 비과세를 받을 수 있다. 취득시에는 취득 시점 시가의 70%에 대해서 과세하는데 이도 인출시까지 과세이연한다. 즉 출자 및 취득시점에는 대부분 과세를 하지 않고 인출 시점까지 연기해준다. 또한 장기간 보유할 수록 세금 감면 혜택이 있다.<br>\n예로 들면, 1000만원 어치를 구매하고 이때 평가금액이 2000만원이라면 70%인 1400만원과 1000만원의 차액인 400만원에 대해서는 근로소득을 내야 하는데 이를 실제 인출 시점까지 이연 해 주는 것이다. 인출시에는 보유기간에 따라 2~4년인 경우는 인출금의 50%, 4년이상은 75%를 비과세한다(규모에 따라 다른 듯 하다). 중소기업의 경우에는 6년이상 보유할 경우 100% 비과세한다고 한다.\n또한 주식을 보유하고 있기 때문에 배당금이 발생할 텐데 이에 대해서도 비과세가 적용된다. 하지만 금액적인 제한이 있는 듯 하다.</p>\n<p>찾아보니 복잡하고 명확하게 정리된 곳이 없어 이해가 어려운 부분이 있다. 아직은 헷갈리는 부분들이 있지만 당장은 필요없으니 차차 알아가보면 될 듯 하다. 우리도 곧 상장하는 시점이 올테니 그 땐 기사 주인공이 되서 행복한 고민 한 번 해봤으면 좋겠다.</p>","fields":{"slug":"/life/esop/"},"frontmatter":{"date":"2020/07/05","title":"우리사주","description":"SK 바이오팜으로 핫해진 우리사주에 대해 알아보기","tags":["우리사주","스톡옵션"]}}},{"node":{"excerpt":"…","html":"<p>몇년 전 부터 일본에서 지내는 후배에게 오랜만에 연락이 왔다.<br>\n얼마 전 결혼을 했는데, 곧 와이프가 한국으로 들어와야 해서 같이 들어올 계획이라면서 이직에 대해 이것저것 얘기를 나눴다. 대학을 졸업하고 바로 일본으로 취업해서 계속 있었기 때문에 한국의 회사나 상황들은 잘 모르기에 궁금한 것 들이 많은 듯 했다.\n연락은 가끔씩 했지만 같이 일을 해본 적이 없고 그동안 어떤 커리어를 쌓아왔는지 알 지 못해 우선 그런것들을 정리해보고 좀 더 자세한 얘기를 해보자고 제안을 했다. 참고차 다른 사람들이 작성 한 것들과 이전에 만들어 뒀던 내 포트폴리오와 경력 기술서를 전달해 줬다.</p>\n<p>다음날 다시 연락이 왔다. 그리고 하는 말이, 그 동안 자기가 했던 건 애들 장난 수준이었다고. 다들 그렇게 엄청난 일을 하는지 궁금했다고 한다. 그 말을 듣고 나도 그렇게 생각했던 적이 있었다는 생각이 났다. 아마 나도 이직을 준비하던 시기였을 거다. 그동안 내가 한 일들을 떠올려보면 뭔가 그렇게 대단한 일들 같지 않고 그냥 그런 일을 하면서 살아온 것 같은데 다른 사람들이 한 일을 보면 잘 이해도 안가고 나보다 대단한 일들을 하는 것 같은 느낌이 든다.</p>\n<p>후배에게는 우선 이직 준비 보다는 그동안 해 온 것들을 돌아보고 회고하는 시간을 가져보라고 조언을 해줬다. 나도 그 시간이 많은 도움이 됐었다. 그리고 결국 내가 남들을 보듯이 남들도 나를 보면서 같은 생각을 하기 때문에 큰 걱정은 하지 말라고 했다. 하지만 나도 잘 하지 못하는 거라 말하면서도 어색했다.</p>\n<p>나도 그렇고 내가 아는한 그 후배도 나름 열심히 사는 사람들이다. 물론 단순 자기 만족이나 합리화는 아니다. 어쨋든 더 나은 삶을 위해 조금이라도 노력하고 현재를 열심히 살고 있다는 의미다.<br>\n그런데 다른 사람의 시선으로 나를 보는 순간 내 존재는 한 없이 작아진다. 내가 누군가를 보고 하는 생각을 누군가 나를 보고도 같은 생각을 하고 있을 텐데. 또 비슷하게 남들의 시선을 지나치게 의식하기도 한다.</p>\n<p>물론 다른 사람의 시선을 신경 쓴 다는 것이 나쁜 것 만은 아니다. <code>피그말리온</code>효과 처럼 누군가의 긍정적인 기대나 판단은 나를 좀 더 나은 모습으로 만드는데 도움을 줄 수 있다. 물론 그 정도가 적절해야 하고 스스로의 노력이 받침이 되어야 한다. 나도 그런 효과를 어느정도 보면서 살아가는 편이다. 지나친 의식으로 인한 부작용도 있지만 그 기대에 부응을 하기 위한 노력으로 어쨋든 조금씩 발전하고 있는 것이다.</p>\n<p>우리가 누군가를 바라 볼 때는 진짜 그 사람이 아닌 내 마음을 통해 누군가를 판단하게 된다. 같은 사람에 대해서 각자가 바라보는 시선이 다 다른 것이 그 이유일 것이다. 마찬가지로 누군가 나를 바라볼 때도 그 사람의 기준으로 나를 판단하고 있을 것이다. 그렇기 때문에 우리가 아무리 객관화 한다 하더라도 그것을 정확히 알 수는 없다.<br>\n결국 타인의 시선으로 나를 바라본다는 건 결과적으로는 내가 바라보는 타인 그리고 내가 나를 바라보는 시선에 가까울 수도 있다. 그렇기 때문에 타인을 이해하려는 노력과, 내 마음에 비친 내 모습을 긍정적으로 만드는게 중요하지 않을까 생각한다.</p>\n<p>점점 갈수록 타인의 시선에 많이 노출되고, 의식을 하게 되는 세상이다. 각종 SNS나 온라인을 통해 남들이 보는 나의 모습을 가꾸기에 바쁘고, 구독과 좋아요 갯수가 밥벌이와 연결되기도 하기 때문이다.\n그렇기 때문에 결코 무시할 수 있는 것은 아니다. 하지만 결국 중요한 것은 나를 포함한 세상에 대한 나의 시선이라는 사실을 잊지 않는다면 타인의 시선에서 자유롭고 당당하게 살아가 갈 수 있지 않을까 하는 생각이 들었다.</p>","fields":{"slug":"/life/others-opinion/"},"frontmatter":{"date":"2020/06/28","title":"타인의 시선","description":"세상을 바라보는 나의 시선","tags":[""]}}},{"node":{"excerpt":"…","html":"<p>운동을 쉰지도 한 달이 지나간다. 상태로 봐선 이젠 슬슬 시작해도 되지 않나 싶지만, 재발이 될 수 있다는 말에 몸을 사리고 있다. 그러다 전에 들었던 영화라도 보면서 대리만족을 해야겠다 싶어 찾아봤다. 처음엔 <code>프리솔로</code>를 보려고 하다가 <code>던월</code>이라는 영화를 먼저 보는게 좋다는 얘기에 순서대로 두 편을 봐버렸다.</p>\n<p>일단 던월,<br>\n미국의 요세미티 국립공원에 엘 캐피탄이라는 암벽이 있다.(맥북 배경화면 바로 그곳이다.) 높이가 무려 910미터나 되는 곳으로 위에 올라서 내려다 보는 것 만으로도 어마무시 할 것 같은 곳이다.\n그리고 그 중에서도 <code>Dawn Wall</code>이라고 불리는 벽이 있다. 일출시 빛이 가장 빨리 닿는 곳이라 그런 이름이 붙었다고 한다. 이 벽은 다른 곳들에 비해 상대적으로 매끈해서 주인공인 토미 콜드웨로가 케빈 조거슨이 등반하기 전 까지는 아무도 오른 적이 없는 벽이다.</p>\n<p>실화를 바탕으로 한 다큐멘터리이지만 정말 왠만한 영화보다 더 숨죽이고 집중하게 만들었다.</p>\n<p>무엇보다 대단한 점은, 토미 콜드웰은 이 벽을 정복하기 위해 수년간의 연구와 시도를 통해 루트를 찾아내고 도전을 했는데, 멀쩡한 상태로도 힘든 도전을 한쪽 검지가 없는 상태에서 했다는 것이다. 클라이밍을 해 본 사람이라면 알겠지만 이 손가락 하나에 의지하는 힘이 엄청나다. 이게 없다는건 사실 엄청난 핸디캡니다.</p>\n<p>로프 하나, 암벽화와 초크, 테이프. 단지 이것만으로 32개의 피치를 번갈아 가면서 등반을 한다. 중간에 파트너인 케빈이 한 피치를 오랫동안 성공하지 못하자 기다리던 토미는 먼저 앞서 가기 시작한다. 하지만 결국 혼자 오르는 것은 의미가 없다는 생각을 가지고 케빈이 성공할 수 있도록 기다려준다.</p>\n<p>그리고 결국 둘은 처음으로 던월을 함께 정복한다.</p>\n<p>프리 솔로,<br>\n클라이머라면 누구나 아는 알렉스 호놀드의 프리 솔로를 다큐멘터리로 만들었다. 던월에서 토미와 케빈이 한 프리클라이밍(안전을 위해 로프에만 의지해서 오른다.)도 대단 하지만, 프리 솔로는 그와는 또 다르다. 로프도 없이 다른 장비도 없이 혼자 맨몸으로 암벽화와 초크에만 의지해서 암벽을 오른다. 한 번이라도 본 사람은 알겠지만 시도 자체가 목숨을 걸고 가는 것이기 때문에 쉽지 않은 일이다. 내용에도 나오지만 이름있는 유명한 클라이머들이 도중에 많이 추락을 하기도 했다.</p>\n<p>한치의 실수도 용납하지 않기 때문에 완벽만이 답이다. 1mm의 작은 돌기에 온 몸을 지탱해서 올라가는 건 실력도 실력이지만 그 공포심을 이겨내는 것이 더 중요할지도 모른다. 그렇다고 단지 겁이 없어서 시도하거나 성공할 수 있는 것도 아니다. 알렉스도 수 많은 연습과 노력을 통해 공포심을 이겨내고, 안전하다고 생각할 때만 등반을 한다고 한다니 도전 자체가 쉬운 일은 아니다.</p>\n<p>다큐멘터리도 사실 결과를 모르고 제작을 했던 것이기 때문에, 카메라에 완등이 담길지 죽음이 담길지는 모른채로 촬영을 시작한다. 죽음의 순간에도 카메라를 들이대야 하기에 촬영을 하는 것 또한 쉽지 않은 일이다. 준비과정과 일상 생활부터 오르는 과정까지. 최악의 상황이 발생하지 않도록 방해하지 않으면서 도전을 카메라에 담아내야 하는 친구들도 대단한 도전이었다. 그리고 4시간도 채 안된 시간에 세계 최초로 엘 캐피탄의 프리솔로를 해냈을 때는 보고 있는 나조차도 짜릿했다.</p>\n<p>두 편의 영화를 보면서 왜 저들은 계속 오르려고 하는걸까 하는 의문도 들었다. 그리고 한 번 더 클라이밍의 매력에 빠지게 됐다. 단순이 오르는게 목표가 아닌 함께 오르는 것, 인간으로서 느낄 수 있는 한계를 넘어선 공포를 이겨내고 자신을 컨트롤 하는 것. 보는 것 만으로도 전율이 오는 두 편의 다큐멘터리 였다.</p>\n<p>글은 짧지만, 여운은 매우 길었고. 클라이밍을 알지 못하는 사람이라도 한 번쯤은 보기를 추천하는 영화이다.\n아마 반복해서 보게 되는 영화들에 함께 포함되어, 조만간 또 한 번 보지 않을까 생각이 든다.</p>","fields":{"slug":"/life/free-solo/"},"frontmatter":{"date":"2020/06/21","title":"Dawn Wall 그리고 Free Solo","description":"클라이밍 영화 두 편","tags":["free-solo","dawn-wall","climbing"]}}},{"node":{"excerpt":"자주 사용하지 않다보니, 더 정확히는 FE를 한지 오래되지 않아서 사용할 일도 많지 않아서 항상 사용할 때 마다 찾아보게 되는 것 중의 하나가 CSS selector…","html":"<p>자주 사용하지 않다보니, 더 정확히는 FE를 한지 오래되지 않아서 사용할 일도 많지 않아서 항상 사용할 때 마다 찾아보게 되는 것 중의 하나가 CSS selector다. 필요하면 이것저것 써보고 외워놓다가 안쓰면 또 잊어버리기를 반복한다.\n최근 이것저것 작업을 하면서 또 찾아보게 된 CSS selector 들이 있다. 이제 머릿속에 넣어보자는 생각으로 기본적인 것들을 포함해 알아두어야 할 selector들을 정리해 본다.</p>\n<p>만약 selector를 연습하고 싶을 땐 <a href=\"https://flukeout.github.io/\">CSS Diner</a>를 해보면 재미있다.</p>\n<h4>기본적인 Selector</h4>\n<p><code>selector-list</code>: 선택자들을 <code>,</code>로 구분해서 나열하면 매칭되는 모든 엘리먼트들을 선택한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token comment\">/* 태그로 선택 */</span>\n<span class=\"token selector\">element</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/* 클래스로 선택 */</span>\n<span class=\"token selector\">.class_name</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">/* [class~=class_name] { }도 가능 */</span>\n\n<span class=\"token comment\">/* id로 선택 */</span>\n<span class=\"token selector\">#id_value</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">/* [id=id_value] { }도 가능 */</span>\n\n<span class=\"token comment\">/* 전체 선택 */</span>\n<span class=\"token selector\">*</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>Attribute Selector</h4>\n<p>attribute의 존재 여부 또는 값에 따라 선택한다. 다른 selector 뒤에 붙여서 함께 쓸 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token comment\">/* 해당 attribute가 존재하는 경우 */</span>\n<span class=\"token selector\">[attr]</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/* 값이 정확히 일치하는 경우(전체가 일치) */</span>\n<span class=\"token selector\">[attr='value']</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/* 값이 정확히 일치하는 경우(공백으로 구분되는 여러 값 중 일치하는 값이 존재) */</span>\n<span class=\"token selector\">[attr~='value']</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/* 값이 일치하거나, 위에 값이 -로 이어져 있는 경우 */</span>\n<span class=\"token selector\">[attr|='value']</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/* value로 시작하는 경우 */</span>\n<span class=\"token selector\">[attr^='value']</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/* value로 끝나는 경우 */</span>\n<span class=\"token selector\">[attr$='value']</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/* value(문자열)을 포함하는 경우 */</span>\n<span class=\"token selector\">[attr*='value']</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>Combinator</h4>\n<p>seletor들을 결합해서 사용한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token comment\">/* former_element 다음에 바로 다음에 나오는 target_element*/</span>\n<span class=\"token selector\">former_element + target_element</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/* former_element 다음에 나오는 target_element  */</span>\n<span class=\"token selector\">former_element ~ target_element</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/* parent 바로 아래 자식인 child */</span>\n<span class=\"token selector\">parent > child</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/* 의 자손인 descendant */</span>\n<span class=\"token selector\">parent descendant</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>Pseudo Class</h4>\n<p>특정한 상태를 만족할 때 선택된다. 워낙 다양해서 유용하지만 외우기 힘든 것들만 모아본다.</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token comment\">/* 형제들 중 가장 먼저 나오는 엘리먼트(모든 자식들 중 첫번재) */</span>\n<span class=\"token punctuation\">:</span>first-child\n\n<span class=\"token comment\">/* 같은 타입의 형제들 중 가장 먼저 나오는 엘리먼트 */</span>\n<span class=\"token punctuation\">:</span>first-of-type\n\n<span class=\"token comment\">/* 형제들 중 가장 나중에 나오는 엘리먼트(모든 자식들 중 마지막) */</span>\n<span class=\"token punctuation\">:</span>last-child\n\n<span class=\"token comment\">/* 같은 타입의 형제들 중 가장 나중에 나오는 엘리먼트 */</span>\n<span class=\"token punctuation\">:</span>last-of-type\n\n<span class=\"token comment\">/* selector-list와 매칭 되지 않는 엘리먼트 */</span>\n<span class=\"token punctuation\">:</span><span class=\"token function\">not</span><span class=\"token punctuation\">(</span>selector-list<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">/* 형제들 중 위치가 nth(1부터 시작하는 정수, odd, even, an+b등)인 엘리먼트 */</span>\n<span class=\"token punctuation\">:</span><span class=\"token function\">nth-child</span><span class=\"token punctuation\">(</span>nth<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">/* 같은 타입의 형제들 중 위치가 nth인 엘리먼트 */</span>\n<span class=\"token punctuation\">:</span><span class=\"token function\">nth-of-type</span><span class=\"token punctuation\">(</span>nth<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">/* 형제들 중 뒤에서 부터의 위치가 nth인 엘리먼트 */</span>\n<span class=\"token punctuation\">:</span><span class=\"token function\">nth-last-child</span><span class=\"token punctuation\">(</span>nth<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">/* 같은 타입의 형제들 중 뒤에서 부터의 위치가 nth인 엘리먼트 */</span>\n<span class=\"token punctuation\">:</span><span class=\"token function\">nth-last-of-type</span><span class=\"token punctuation\">(</span>nth<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">/* 형제가 없는 엘리먼트(:first-child:last-child, :nth-child(1):nth-last-child(1)와 동일) */</span>\n<span class=\"token punctuation\">:</span>only-child\n\n<span class=\"token comment\">/* 같은 타입의 형제가 없는 엘리먼트 */</span>\n<span class=\"token punctuation\">:</span>only-of-type</code></pre></div>\n<h4>참고</h4>\n<p><a href=\"https://developer.mozilla.org/ko/docs/Web/CSS/CSS_Selectors\">CSS selectors - MDN</a><br>\n<a href=\"https://www.w3schools.com/cssref/css_selectors.asp\">CSS Selectors - w3schools</a><br>\n<a href=\"https://css-tricks.com/almanac/selectors/\">Selectors - css trikcs</a>\n<a href=\"https://code.tutsplus.com/ko/tutorials/\">https://code.tutsplus.com/ko/tutorials/</a><br>\n<a href=\"the-30-css-selectors-you-must-memorize--net-16048\">반드시 기억해야 하는 CSS 선택자 30개</a></p>","fields":{"slug":"/dev/css-selector/"},"frontmatter":{"date":"2020/06/07","title":"쓸 때 마다 찾아보는 CSS selector","description":"알아두면 쓸모있는 신기한(?) CSS selector","tags":["css","selctor"]}}},{"node":{"excerpt":"뭔가 주제를 정해서 하나씩 쓰려고 마음을 먹기가 쉽지가 않다. 그럴 땐 그냥 짧게 주저리 쓰는게 편하겠다 싶다. AWS 최근 새로운 배포 환경을 설정하면서 AWS…","html":"<p>뭔가 주제를 정해서 하나씩 쓰려고 마음을 먹기가 쉽지가 않다. 그럴 땐 그냥 짧게 주저리 쓰는게 편하겠다 싶다.</p>\n<h3>AWS</h3>\n<p>최근 새로운 배포 환경을 설정하면서 <code>AWS</code>를 이것저것 만져보는 계기가 됐다. 이전까지는 그냥 있구나 정도였다면 이번엔 나름 본격적으로 건드려 볼 수 있었다.</p>\n<p>간단하게나마 다뤄봤던 이전의 기억들을 떠올려보면 상당히 번잡스러웠다. 잘 모르기도 했고. 그에 비해 <code>AWS</code>는 어느정도 개념만 있으면 적당히 따라서 잘 쓸 수 있을 것 같았다. 물론 잘 쓰는 건 다른 이야기일 테지만.</p>\n<p>이것 저것 설정을 하고 배포 환경을 만들어 었는 과정이 쉽지는 않았다. 차라리 처음부터 새로 만드는 상황 이었다면 차라리 더 쉬웠겠다 싶었다. 기존 프로젝트를 옮기는데 이전 환경에 대한 가이드나 방법을 모르다 보니 하나씩 보면서 눈치 코치로 만들어야 하는데 뭔가 하나를 놓치거나 달라지면 찾아 내는데 삽질의 삽질을 거듭해야 했다. 물론 그 과정이 나름 재미는 있었다. 뭐든지 삽질을 하면서 배우는게 효과가 있는법 아닌가.\n아직 할 일은 더 남은 듯 하지만 일단 마무리가 됐다.</p>\n<p>아직 맛만 본 정도긴 하지만 어쨋든 지금까지의 결과로는 어느정도 쓸 줄 알고 익숙해진다면 참 편하겠다 싶었다. 물론 모든 것이 그렇듯 편해지는 만큼 댓가(결제)는 필요하다.</p>\n<h3>Obsidian</h3>\n<p>최근에 새로운 메모앱을 사용하기 시작했다. 이름이 <a href=\"https://obsidian.md/\">obsidian</a>이다. 흑요석이라고 불리는 보석(?)인 듯 한데 이름은 좀 어렵다. 우연히 보게되서 써봤는데 나쁘지 않아서 열심히 마이그레이션을 했다. 아직은 베타라 불안정한 점이 계속 보이지만 나름 아직은 잘 쓰고 있다.</p>\n<p>개인적으로 메모 혹은 정리하는 것에 관심이 많았다. 이것저것 방법론도 찾아보고, 좋다는 앱들을 써보고 결제도 해봤는데 아직 마음에 쏙 드는 건 찾지 못했다. 처음엔 유행하던 <code>에버노트</code>를 썼었고 유료화가 되면서 <code>원노트</code>로 옮겼다. 그리고 한동안 잘 사용하다가 마크다운으로 관심을 옮겼고 이것저것 써보다 최근엔 <code>boostnote</code>를 사용하고 있었다. 할 일 관리 앱도 별도로 쓰다가 포기했다. 요즘엔 <code>notion</code>을 많이들 사용하는 것 같은데, 뭐랄까. 내 눈엔 일단 디자인이 맘에 들지 않고 복잡해 보였다. 일단 디자인이 이뻐야 눈이 간다. 디지털 세계의 외모 지상주의랄까.</p>\n<p><code>obsidian</code>으로 옮긴 이유는 크게 대단하지 않았다. 사용하던 <code>boostnote</code>의 디자인과 심플함은 좋았지만 새로운 버전은 로컬동기화가 안되고, 기존 사용하는 버전은 디렉토리 구조를 중첩을 만들지 못한다. 그래서 데이터를 조직화 시키는게 맘에 들지 않았다. 그런데 새로운 이 아이는 동일하게 테마를 통해 디자인을 고를 수 있었고 이미 만들어져 있는 테마가 맘에 들었다. 그리고 폴더 구조를 그대로 따라가기 때문에 중첩이 가능했다. 단지 그 뿐이다.</p>\n<p>이사를 가거나, 가구 배치를 바꾸거나, 아님 대청소라도 하면 기분이 새롭게 전환이 된다. 디지털도 마찬가지 인 것 같다. 기기를 바꾸든지, 포맷을 하든지, 안되면 쓰던 앱이라도 하나 바꾸면 기분 전환이 좀 되는 것 같다. 그덕에 이번에도 메모들을 다시 정리하고 가끔 일기도 써보고 하고 있다. 얼마나 갈지는 모르겠지만.</p>\n<p>내가 필요한 기능들을 모아서 직접 하나 만들어 볼까하고 생각을 한다. 항상 생각만 하고 있어서 언제나 가능할진 모르지만. 그냥 돈 내고 쓸 테니 누가 알아서 맘에 쏙 들게 만들어주면 좋겠다.</p>\n<h3>ByteDegree</h3>\n<p>나름 프로 코드리뷰어(돈 받고 하니까…)로서의 일정이 시작됐다. 처음엔 워낙 간단한 프로젝트고 코드도 한 페이지 분량 밖에 되지 않아서 금방 끝나겠지 했는데, 예상외로 만만치가 않다.</p>\n<p>왠지 모를 책임감과 혹시라도 틀린 내용이 있을까 싶어 확인의 확인을 거듭하고 신경을 쓰다보니 시간이 적지않게 걸린다. 일단 수지타산이 맞을 가능성은 절대 없어보였다. 그나마 다행인건 애초에 그런 목적으로 시작한 일이 아니었다는 점이다.</p>\n<p>예전부터 누군가를 가르치거나 지식을 전달하는 것에 재미를 느꼈던 것 같다. 물론 그러려면 부족하지 않게 준비도 필요하기 때문에 쉽지는 않지만 내 능력이 다른사람에게 도움이 된다는 점에 왠지모를 즐거움이 함께 있다.</p>\n<p>이제 겨우 1차가 끝나가고, 아직 3번의 프로젝트가 더 남았고 갈 수록 양은 늘어날 거라 부담감에 걱정도 조금 되긴 하지만, 핑계삼아 조금 더 부지런하게 살아봐야 겠다.</p>","fields":{"slug":"/life/short-stories-0531/"},"frontmatter":{"date":"2020/05/31","title":"5월 마지막 주","description":"5월의 마지막 생각들 모음","tags":["AWS","Obsidian","Memo","ByteDegree","CodeReview"]}}},{"node":{"excerpt":"…","html":"<p>재택이 길어지고 밖에 나가는 시간이 줄어들다보니 멍하니 있을 때가 많아졌다. 그래서 그런지 시간이 생각없이 마구 지나가고 있는 것 같다. 내 삶이지만 난 요즘 무얼 하고 있나 궁금해졌다. 생각해보니 딱 두 개다. 일 그리고 운동.</p>\n<h4>운동에 미치다</h4>\n<p>일을 제외한 나머지 시간의 대부분은 운동으로 채운다. 오래 한 것 같지만 아직도 1년이 채 되지 않은 클라이밍이다. 평일엔 강습, 주말에도 꼬박꼬박 암장으로 출근한다. 그러다 요즘은 안하던 볼더링에 맛이 들려 더 열심히 하고 있다. 주말엔 같이 강습 받는 사람들을 직접 모아서 원정도 다녀왔다. 무려 6시간 동안을 쉬지 않고 홀드를 잡아댔다.<br>\n가끔 하루종일 앉아있는 일이 아니라 몸 쓰는 일을 했어야 했나하는 생각이 들곤한다. 뭐든지 운동을 할 때면 힘들어도 즐겁다. 그런데 또 생각해보면 밖을 잘 돌아다니는 편은 아니다. 그렇게 생각을 계속 하다보면 결국 다시 답은 그대로다. 목적의식 그리고 실행. 명확한 목표가 있고, 일단 시동을 걸어야 열심히 달린다. 그전까지가 어려울 뿐.</p>\n<p>그런데 이번엔 시작하고 너무 빠졌나 싶은 생각도 든다. 욕심에 최근에 조금 더 강도를 높였더니 어깨가 다시 말썽을 부리기 시작했기 때문이다. 작년에 어깨와 팔꿈치를 다쳤던 후로 운동을 최대한 조심하고 있었는데 계속 쓰다보니 닳는 건 어쩔 수가 없는가 보다. 주말에 운동을 다녀온 후로 왼쪽 팔이 어깨 위로 올라가질 않는다. 갈수록 증상이 심해지는걸 보니 이번에도 호락호락하게 넘어가지는 않을 것 같다. 그래서 이번주도 병원행이다.<br>\n과유불급, 뭐든지 적당히 해야 한다는 걸 알면서도 하다보면 이 놈의 승부욕이 올라온다. 아픈 와중에 가장 큰 걱정이 운동을 못하게 되는 거다. 아주 단단히 미친거다. 그래도 기분이 나쁘진 않다. 몸 관리만 잘 하면 평생 미쳐있어도 좋을 것 같다. 문득 두 번째 직업을 생각한다면 이쪽도 재밌을 것 같다는 생각이 들었다.</p>\n<h4>부업인 듯 아닌 듯</h4>\n<p>우연한 기회에 뭔가를 하게됐다.<br>\n첫 번째로는 외주일 뻔 했던 부업정도랄까. 아는 선배가 외주를 받아서 같이하자는 제안을 했다. 들어보니 뭔가 석연찮은 부분들이 있어서 고민하다 고사를 했다. 그래도 중간에 남는 일을 조금 받아서 하고 용돈벌이를 했다. 웃기는 이야기지만 웹이 아니었다.</p>\n<p>비슷한 시기에 링크드인을 통해 제안을 하나 받았다. 보통은 헤드헌팅 메세지가 오는데 이번엔 한 온라인 강의 업체에서 코드 리뷰어를 해달라는 제안이었다. 리액트 과정을 만들면서 그 중에 현업 개발자의 코드리뷰가 프로젝트 진행 과정에 포함되어 있었다. 리액트를 현업에서 사용하는 일정 연차의 개발자들을 찾아서 제안을 했다고 한다. 재미가 있겠다 싶었다. 부담도 살짝 들어 고민을 했지만 흔쾌히 수락을 했다. 거의 처음 접하는 사람들, 아마도 취준을 하고 있는 대학생들이 주로 신청을 하는 듯 했다. 능력은 없지만 나름 멘토링이나 조언을 빙자한 꼰대 역할을 좋아하기 때문에 잘 할 수 있을 것 같다. 기대가 된다.</p>\n<p>분명 뭔가 더 쓰려고 한게 있었는데 생각이 나질 않는다. 생각을 잃어 버렸다. 잘 때가 된 것 같다.</p>","fields":{"slug":"/life/daily-life/"},"frontmatter":{"date":"2020/05/24","title":"요즘 일상","description":"나도 궁금한 요즘 내 이야기","tags":["일상생활"]}}},{"node":{"excerpt":"redux-saga API는 편의성을 위해서 여러 Effect Creator들을 제공한다. 그 중 액션을 감지하기 위한 목적으로 자주 사용하는 헬퍼인 takeEvery, takeLatest, takeLeading…","html":"<p><code>redux-saga</code> API는 편의성을 위해서 여러 <code>Effect Creator</code>들을 제공한다. 그 중 액션을 감지하기 위한 목적으로 자주 사용하는 헬퍼인 <code>takeEvery</code>, <code>takeLatest</code>, <code>takeLeading</code>가 있다. 이 함수들은 정확하게 사용하지 않으면 예상치 못하게 동작하는 경우를 만나게 된다. 덕분에 나도 한동안 재현하기 힘든 버그를 잡느라 오랜시간을 헤맸는데 그러면서 사용해야하는 기준을 다시 한 번 명확하게 생각해 보게 된 적이 있다. 그래서 간단히 각각의 기능과 사용을 해야 하는 상황들에 대해 정리해 본다.</p>\n<p>어떤 걸 써도 괜찮은 경우가 있을 수도 있을진 모르겠지만 의도하는 바에 맞게 적절한 것을 골라서 사용해 주는 것이 좋다. <code>redux-saga</code>를 주로 api 호출에 사용하는 경우가 많은데, 호출하는 api가 어떤지에 따라 판단해 보면 된다.</p>\n<h3>takeEvery</h3>\n<p>액션이 dispatch될 때 마다 새로운 task를 실행한다. 항상 fork하기 때문에 동시에 호출될 수 있고, 실행 순서가 보장되지 않는다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">takeEvery</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">patternOrChannel<span class=\"token punctuation\">,</span> saga<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>args</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token function\">fork</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token operator\">*</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> action <span class=\"token operator\">=</span> <span class=\"token keyword\">yield</span> <span class=\"token function\">take</span><span class=\"token punctuation\">(</span>patternOrChannel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">yield</span> <span class=\"token function\">fork</span><span class=\"token punctuation\">(</span>saga<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>args<span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>dispatch된 액션에 대한 처리가 동시에 발생하기 때문에 해당 task가 동시에 중복으로 발생해도 문제가 없는 경우에 사용하면 된다. 예를 들어 클릭을 할 때 마다 서버로 클릭을 보내야 하는 이벤트가 있고, 동시에 전송이 되어 처리하는데 문제가 없는 상황이라면 적절하다.<br>\n하지만 파라미터에 따라 결과가 달라지는 api가 있고, 파라미터를 다르게 해서 api를 중복으로 호출 하는 경우가 있어 takeEvery를 사용하면 주의해야 한다. 구현에 따라 다르겠지만 의도와 다르게 동일한 파라미터를 가진 요청이 중복으로 발생할 가능성도 있기 때문이다. 예를 들어 한 화면에 탭으로 구분된 레이아웃에서 데이터를 불러올 때 동일 api에 파라미터만 변경해서 사용한다면 하나의 액션으로 <code>takeEvery</code>를 사용할 수도 있겠지만, 개인적으로 이런 경우엔 액션을 분리해서 <code>takeLatest</code>나 <code>takeLeading</code>로 처리하고 task를 공통으로 사용하는 것도 괜찮을 것 같다.</p>\n<h3>takeLatest</h3>\n<p>액션이 dispatch 됐을 때 이전에 이미 실행 중인 task가 있다면 취소하고 새로운 task를 실행(fork)한다. 즉 항상 최신 액션이 처리되는 것을 보장한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">takeLatest</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">patternOrChannel<span class=\"token punctuation\">,</span> saga<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>args</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token function\">fork</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token operator\">*</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> lastTask<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> action <span class=\"token operator\">=</span> <span class=\"token keyword\">yield</span> <span class=\"token function\">take</span><span class=\"token punctuation\">(</span>patternOrChannel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>lastTask<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">yield</span> <span class=\"token function\">cancel</span><span class=\"token punctuation\">(</span>lastTask<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// cancel is no-op if the task has already terminated</span>\n      <span class=\"token punctuation\">}</span>\n      lastTask <span class=\"token operator\">=</span> <span class=\"token keyword\">yield</span> <span class=\"token function\">fork</span><span class=\"token punctuation\">(</span>saga<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>args<span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이미 처리 중인 상황이라도 동일한 액션이 dispatch되면 취소되고 다시 호출이 된다. 즉 이전 api 요청은 무시되고 최신 data를 받아올 수 있다. 상황에 따라 다르겠지만 대부분 데이터를 가져오는 요청(GET)은 최신 데이터를 받는 것이 좋다. 페이지 전환 또는 새로고침 기능 등을 통해 동일한 api 요청이 발생하는 경우에는 이전 요청은 받아도 의미가 없고 최신 요청을 빠르게 처리해서 보여주는 것이 좋기 때문이다.<br>\n하지만 액션이 dispatch 될 때 마다 취소되고 새로운 요청이 가기 때문에 결과가 같거나 동기화 자체가 그닥 중요하지 않은 api 요청이 중복으로 발생하는 경우에는 불필요한 딜레이가 생길 수 있다. 이럴 땐 <code>takeLeading</code>으로 처리해 주는 것이 좋다.<br>\n보통 GET 요청이면서 파라미터에 따라 결과가 달라지는 api라면 <code>takeLatest</code>를 사용해주면 적절했다.</p>\n<h3>takeLeading</h3>\n<p>액션이 dispatch되고 task가 실행되면 끝날 때 까지 동일한 액션에 대해서 감지를 하지 않는다. 즉 먼저 호출된 액션이 처리되는 것을 보장한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">takeLeading</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">patternOrChannel<span class=\"token punctuation\">,</span> saga<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>args</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token function\">fork</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token operator\">*</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> action <span class=\"token operator\">=</span> <span class=\"token keyword\">yield</span> <span class=\"token function\">take</span><span class=\"token punctuation\">(</span>patternOrChannel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">yield</span> <span class=\"token function\">call</span><span class=\"token punctuation\">(</span>saga<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>args<span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>처리 순서가 중요하거나 중복으로 호출되면 안되는 경우, 위에서 언급한 것 처럼 항상 같은 결과를 반환하는 api를 호출하는 경우(또는 바뀔 가능성이 많지 않고, 바뀌더라도 동기화가 바로 처리될 필요 없는 경우)에 사용해주면 좋다. 데이터를 추가 또는 삭제 등의 경우에는 api에서 처리가 되어 있다면 상관없을 수 있겠지만 중복이 발생하지 않도록 순서대로 처리해 주는 것이 좋고, 고정된 어떤 값을 받아와야 하는 경우에는 이미 요청이 발생한 경우 굳이 다시 요청을 하지 않아도 되기 때문에 <code>takeLatest</code>에 비해 빠르게 응답을 할 수 있기 때문이다.\n일반적으로 GET 요청이 아닌 경우나, GET 요청이면서 결과가 바뀌지 않는 경우들은 <code>takeLeading</code>을 사용해주면 괜찮았다.</p>\n<p>내가 헤맸던 상황은 쿼리에 따라 결과가 달라지는 api를 호출할 때 <code>takeLeading</code>을 사용하고 있었다. 문제는 이 api가 중복해서 호출되는 경우를 예상하지 못했다는 것이다. 하지만 생각치 못하게 같은 api를 요청이 중복으로 발생하는 것이 가능했고 그러다 보니 유저 액션에 따른 화면은 최신 결과를 반영하려 하고 api는 이전의 결과를 받아와서 처리를 하는 상황이었다. 간단히 <code>takeLatest</code>로 바꾸고 해결됐다.<br>\n현재 구현과 상황에 따라 의존적으로 처리 하거나 제약이 필요한 경우도 물론 있겠지만, 기본적으로는 외부상황(api요청 자체만 봤을 때 언제 어디서 호출되는지는 외적인 요인이다)을 배제하고 해당 기능에 대해서만 판단을 하고 구현을 해야 문제가 될 가능성이 줄어든다. 즉 의존성을 줄이는 것으로 볼 수 있다. 소프트웨어에서 어찌보면 당연한 말이지만, 때때로 놓치는 경우가 있다. 다시 한 번 기본의 중요성을 깨닫게 된다.</p>","fields":{"slug":"/dev/redux-saga-effect-creator/"},"frontmatter":{"date":"2020/05/16","title":"takeEvery vs takeLatest vs takeLeading","description":"redux-saga에서 자주 쓰는 effect creator 비교","tags":["redux-saga","jest","test"]}}},{"node":{"excerpt":"…","html":"<p>어릴 땐 그저 아무 생각없이 마시기 위해 마시는게 술이었다면 이젠 즐기기 위해 또 가끔은 취하기 위해 잔을 든다. 그리고 소주를 싫어하는 나로서는 맥주의 배부름을 피할 다른게 필요 했고 그러다 위스키를 만나게 됐다. 아직 조금씩 관심을 가지고 알아가는 중이지만 되짚어 볼 겸 간단한 상식이나 용어들을 정리해 본다.</p>\n<h4>술의 종류</h4>\n<p>술은 크게 발효주(양조주)와 증류주로 나눌 수 있다.<br>\n<code>발효주</code>는 말 그대로 곡물이나 과일등을 발효 시켜서 만드는 술이다. 흔히 마시는 맥주나 막걸리, 청주, 포도주 등이 발효주에 포함된다. 발효를 통해서 만들 수 있는 술은 20도 정도까지 밖에 만들 수 없다. 하지만 증류를 통해 더 높은 도수의 술을 만들 수 있다. 이게 바로 <code>증류주</code>로 우리나라의 소주, 그 외에 위스키, 코냑, 보드카, 고량주 등이 있다. 이런 증류주를 spirits(가열시켜 뽑혼만 뽑았다는 의미)이라고 부른다.</p>\n<h4>증류주의 종류</h4>\n<p>소주: 청주를 증류하여 만든 술을 의미한다. 예로 화요나 안동소주가 있다. 하지만 우리가 흔히 접하는 참XX나 처음XX같은 소주는 증류 후 희석시킨 희석식 소주다.<br>\n위스키: 주로 보리나 밀, 옥수수 같은 곡물로 만든 증류주를 의미한다. 최근에 유행을 일으키는 몰트위스키는 주로 스카치 위스키이고, 이 외에도 미국, 일본 등 여러 곳에서 만들어 진다. 흔히 양주로 알려진 발렌타인, 조니워커 등도 위스키에 속한다.<br>\n코냑: 포도주를 증류시켜 만든 브랜디(과일을 재료로 만들어진 증류주를 일컷는다)이다.<br>\n보드카: 러시아의 증류주이다. 일반적으로 투명하고 냄새가 없는 편으로 칵테일에 자주 사용한다.</p>\n<h4>생명의 물</h4>\n<p>증류주의 정확한 기원은 없지만, 증류 자체는 아주 오래전까지 거슬러 올라간다. 기원전 1세기 이집트에서 향수를 만들어서 사용했는데 이것이 증류주로 이어졌다는 것이다. 하지만 기록상으로는 12세기 연금술에서 증류주가 시작된다. 그리고 신기하게도 유럽의 증류주들인 북유럽의 아쿠아비트(Aquavit), 위스키의 어원인 우스개바흐(Uisce beatha), 보드카의 기원인 지즈 데냐 보다, 프랑스의 오드비(Eau de vie). 이 모든 명칭의 의미는 바로 <code>생명의 물</code>이다. 영어의 스피릿이나 우리나라의 약주라는 단어도 그 의미를 다 같이 한다고 볼 수 있다.\n증류주(위스키)는 처음엔 술이 아닌 페스트의 치료제로 사용되었다. 위 목록에는 없지만 진 또한 처음엔 네덜란드에서 의약품으로 판매 되다가 술로 바뀌게 된 경우다. 술은 아니지만 우리가 흔히 술과 함께 섞어 마시는 토닉워터 또한 애초엔 그 안의 퀴닌 성분으로인해 말라리아 치료제로 사용됐었다. 토닉의 뜻이 강장제의 의미를 가지게 된 기원이기도 하다. 이처럼 사람에게 도움이 되고자 했던 술이 지금은 독이 되는 경우가 더 많으니 참 아이러니 한 일이다.</p>\n<h4>위스키</h4>\n<p>위스키는 여러가지로 분류할 수 있다. 그 중에 요즘 한참 유행이 되고 있는 몰트 위스키가 있다. 이는 재료를 통해 구분하는 방식으로 크게 몰트(싱글몰트) 위스키, 그레인 위스키, 블렌디드 위스키로 나눌 수 있다.<br>\n위스키는 처음엔 맥아(보리)로 만들었다. 그래서 때론 맥주를 증류시켜 위스키를 만든다고 하지만 이는 잘못된 내용이다. 이 맥아만을 사용해 만든 위스키가 <code>몰트 위스키</code>이다. 그리고 한 증류소의 몰트위스키를 담은 것을 싱글 몰트 위스키라고 부른다. 일반적으로 몰트 위스키라고 하면 싱글몰트를 의미한다. 값비싼 맥아 대신 밀, 호밀, 옥수수 등의 곡물로 만든 것이 그레인 위스키이다. <code>그레인 위스키</code>는 주로 몰트를 사용하는 스카치 위스키에서 구분하는 용도로 사용한다. 이외의 미국이나 캐나다 등에서는 다른 곡물을 주로 사용하기 때문에 별도로 구분하지 않지만 이들도 그레인 위스키에 속한다고 볼 수 있다. 마지막으로 위스키를 대중화 시키는데 일조한 <code>블렌디드 위스키</code>가 있다. 말 그대로 여러 위스키를 섞는 것으로 몰트 위스키에 그레인 위스키를 섞어서 만든다. 발렌타인, 조니워커 등이 이 블렌디드에 속한다.<br>\n미국에서도 재료를 통해 옥수수를 주로 사용하면 <code>버번 위스키</code>, 호밀을 주로 사용하면 <code>라이 위스키</code> 등으로 세부적으로 구분하지만 분류가 많고 즐기기 위해서 그정도까지 구체적으로 알 필요는 없다고 본다.</p>\n<h4>몰트 위스키</h4>\n<p>몰트 위스키도 지역에 따라 제조 방식에 따라 다양한 맛과 향을 가지고 있다. 주로 스코틀랜드나 아일랜드에서 생산이 되는데 그 종류가 다양하기 때문에 입에 맞는 위스키를 찾기도 쉽지 않다.\n아마 가장 큰 맛의 차이라고 하면 피트향일 것이다. 피트는 보리를 건조할 때 석탄 대신 사용하는 것으로 쉽게 말하면 석탄이 되기 전의 상태의 퇴적층을 의미한다. 이 피트향이 얼마나 맞는지에 따라 위스키 취향이 갈리게 된다.<br>\n위스키는 전쟁과도 크게 관련이 있다. 애초의 위스키는 석탄을 사용해 피트향이 없는 투명한 증류주였다. 하지만 잉글랜드와의 전쟁으로 인해 석탄을 구하기 어려운 곳에서는 대신 피트를 사용했고 그러면서 피트향이 첨가된다. 또한 전쟁 후 과세를 위해 술에 과도하게 세금을 매기면서 몰래 숨어서 만들고 보관하기 위해 당시 흔하던 셰리통(와인을 숙성하는)에 보관하면서 나무의 향과 색이 첨가되 지금의 색을 갖게 된 것이다. 또한 미국에서는 법적으로 술을 만들 때 사용한 통을 재사용하지 못한다. 그래서 이를 사와서 사용하는데 이에 따라서도 맛과 향이 달라지게 된다. 보통 셰리를 사용하면 과일향이나 달달한 맛이 첨가되고 그렇지 않은 경우는 드라이한 맛이 나게 된다.\n간단하게 위스키의 역사와 종류를 알고 마시면서 본인의 입에 맞는 위스키를 찾아가는 것도 나름 위스키를 마시는 한 가지 재미이다.</p>\n<h4>간단한 용어들</h4>\n<p>위스키를 즐겨 마시는 사람들은 가격 때문에 직접 사서 마시는 경우가 대부분이다. 우리나라에서는 법적으로 세금에 의해 바에서 마시는 위스키의 가격이 직접 사는 가격의 최소 2배를 넘어간다. 하지만 처음 입문을 하는 사람들이 쉽게 접하기에는 바에 가서 한 잔씩 마셔보는 것이 좋다. 이 때 기본적으로 알고 있으면 도움이 될 만한 것들이다.</p>\n<p>니트(neat): 보통 스트레이트라고 부르는 것과 같은 의미다. 스트레이트는 미국에서 유래된 말로 스코틀랜드에서는 니트라고 한다. 위스키의 향을 더 잘 느낄 수 있도록 전용 니트잔이 별도로 있다.</p>\n<p>업(up): 니트와 동일하지만 술을 얼음과 섞거나 차게 한 것을 업이라고 한다.</p>\n<p>샷(shot): 샷 글래스 한잔을 샷이라고 한다. 서부시대 돈은 없지만 총알은 있던 시절 총알 하나로 살 수 있는 술의 양을 의미한데서 유래했다.</p>\n<p>싱글/더블/트리플: 샷의 잔 수를 의미한다. “스카치 스트레이트 더블 업”이라고 하면 스카치 위스키 샷 두잔을 차게 해달라는 의미이다.</p>\n<p>온더락(on the rock): 얼음을 바위(또는 다이아몬드)에 비유한 말로, 큰 얼음을 넣고 마시는 방법이다. 그대로 마시는게 적응이 어렵다면 온더락으로 차게해서 마시면 좀 더 부드럽게 마실 수 있다.</p>\n<p>백(Back): 바에서 주문한 술을 보완하는 다른 글래스의 담겨져 나오는 주문을 의미한다. 일반적으로는 물이나 소다등을 주문하고, 술을 마신 후 마시거나 백을 술에 넣어서 함께 마시기도 한다.</p>\n<p>체이서(Chaser): 도수가 강한 술을 마신 후에 즐기는 물이나 맥주 같은 음료를 의미한다.</p>\n<p>라스트 콜(Last Call): 마지막 주문을 알리는 콜이다. 이 이후에는 추가 주문을 하지 않는게 예의이다.</p>\n<p>웰 드링크(well drink): 바에서 사용하는 저렴한 술을 의미한다. 칵테일을 만들 때 특별히 지정하지 않으면 바에서 주로 사용하는 저렴한 술로 만들어 준다.</p>\n<p>콜 드링크(call drink): 웹 드링크과 반대되는 말로 특정 브랜드의 술을 사용해서 만드는 칵테일을 의미한다. 웹 드링크에 비해 추가 비용이 발생한다.</p>\n<p>하우스(house): 현재 있는 바 또는 레스토랑을 의미한다. 보통 하우스 와인, 하우스 비어라는 말은 흔하게 듣는다.</p>\n<p>버진(Virgin): 술을 넣지 않은 칵테일을 의미한다. 칵테일을 버진으로 달라고 하면 술을 넣지 않고 준다.</p>\n<p>막테일(mocktail): 버진이 기존의 칵테일에서 알콜을 뺀 것과 다르게 막테일은 논알콜 칵테일 자체를 의미한다.</p>\n<p>스퀴즈(squeeze): 과일의 즙을 짜는 것을 말한다.</p>\n<p>필(peel): 과일의 껍질을 의미하고 칵테일 장식으로 사용한다.</p>\n<p>술을 되도록 안마셔야지 하면서 가끔씩 생각날 때는 어쩔 수가 없다. 다행히도 오늘은 생각만하고 글로 대신하는 중이다. 그래도 남은 술 병은 조만간 또 비워지겠지. 생명의 물 함께 마실 분은 언제든 환영합니다.</p>","fields":{"slug":"/life/water-of-life/"},"frontmatter":{"date":"2020/05/03","title":"생명의 물","description":"위스키와 술에 관한 몇가지 상식","tags":["위스키","증류주","술"]}}},{"node":{"excerpt":"…","html":"<p>코로나로 언택트 생활을 이어가던 중 어쩌다 보니 최근에 약속이 많이 잡히게 됐다. 오랜만에 봄 날도 만끽(사실 너무 춥다)하고 사람들도 만났다. 각자 다른 방식으로 열심히 살아가고 있더랬다. 서로 다른 고민과 다양한 삶의 모습들이 신기하기도 하다. 특별하지 않은 평범한 이야기들이지만 익명으로 한 번 적어본다.</p>\n<h5>흰 머리 아저씨</h5>\n<p>최근들어 옆 머리 라인에 흰머리가 살고 있다. 새치로 태어나서 흰머리로 자리 잡았다.\n아침 마다 씻은 후 확인할 때면 마음 한 켠이 아려온다. 내 이야기다. 다시 생각하니 또 슬프다.</p>\n<h5>똥손 사나이</h5>\n<p>최근 다시 주식을 시작했다. 역시나 크지 않은 금액으로. 욕심없이 조금씩 해보기로 한다. 시작하는 김에 해외주식도 거래했다. 2주가 지난 지금 10만원 정도 수익이 났다. 밥 값은 벌었으니 만족한다. 역시 내 이야기다.</p>\n<h5>운동쟁이 S</h5>\n<p>체육 관련 학과를 나와 운동이 좋아 업으로 삼고 살아오다가 이젠 다른 길을 찾기 위해 나섰다.\n그 좋아하는 운동은 취미로만 즐기기로 결정을 했단다. 아무렴 좋아하는 일로 먹고 살기가 쉽지는 않다. 너무나 슬픈 현실이다.<br>\n아무 대책없이 일단 밖으로 나온다고 한다. 힘들겠지만 그래도 근성있는 사람들은 뭐라도 해내겠지.<br>\n뭔가를 시작하기에 늦은 시기란 없다고 한다. 잘 되길 진심으로 응원한다.</p>\n<h5>사랑꾼 H</h5>\n<p>적지 않은 나이긴 하다. 처음 볼 때 부터 부단히 노력을 하던 사내였다. 관심사도 연애와 결혼이 주였는데, 드디어 결혼을 한다는 소식을 들려왔다. 올해를 목표로 한다더니 정말로 해냈다.<br>\n독특하지만 열심히 사는 모습이 인상적이었다. 결혼식을 갈 수 있을진 모르겠지만 역시나 진심으로 축하한다.</p>\n<h5>주당 J</h5>\n<p>가끔씩 모임에서 술을 같이 마실 때 마다 “전 술 자주 안먹어요”를 외치면서 잔뜩 먹고 혼자 멀쩡히 막차를 타러가는 치위생사 J양. 소식을 건네 들을 때도 항상 전날 숙취로 고생을 한다는 얘기가 들려온다. 며칠 전 저녁 모임에도 나오지 않아 물어보니 전날 소주 4병을 드링킹 했단다. 대단하다. 자주의 개념이 나와는 다른 것 같다.<br>\n참고로 치과에서 불필요하게 입을 계속 헹구게하고 자리에서 사라지는 치위생사는 조심하자. 스케일링하다 유독 피가 많이 난 원인은 약한 잇몸이 아니라 그녀의 숙취일 수 있다.</p>\n<h5>디자이너 S</h5>\n<p>직업이 디자이너라 그런지 이모티콘도 그리고 티셔츠도 만들고 이것저것 굿즈도 만든다. 열심히 사는 S양은 생각외로 병에 자주 걸린단다. 오랜만에 점심을 함께하러 만나니 그날 오전에도 휴가를 냈단다. 사유는 “출근을 할 수 없는 병에 걸린 것 같아요” 였다고. 나도 자주 걸리는 병이긴 한데, 그 때마다 휴가를 쓰면 휴가가 남아나지 않을 것 같다.</p>","fields":{"slug":"/life/ordinary-people/"},"frontmatter":{"date":"2020/04/26","title":"주변 사람들의 이야기","description":"최근에 만난 주변의 평범한 사람들의 이야기다.","tags":["변화"]}}},{"node":{"excerpt":"redux-saga는 비동기 처리(data fetching이나 browser cache접근 등) 같은 사이드 이펙트를 좀 더 쉽게 관리하고 사용할 수 있도록 도와주는 라이브러리이다. redux-saga는 redux middleware…","html":"<p><code>redux-saga</code>는 비동기 처리(data fetching이나 browser cache접근 등) 같은 사이드 이펙트를 좀 더 쉽게 관리하고 사용할 수 있도록 도와주는 라이브러리이다. redux-saga는 <code>redux middleware</code>이기 때문에 일반적인 redux action을 통해 동작을 제어할 수 있다. 그리고 비동기 처리를 위해 ES6의 <code>generator</code>를 사용하는데, 바로 이 점 때문에 테스트를 쉽게 작성할 수 있다.</p>\n<p>redux-saga를 사용하면서 작성하는 generator 함수는 내부에서 yield를 사용한다. 그리고 이는 <code>effect</code>라고 부르는 객체를 반환하는데 이 객체를 <code>middleware</code>에서 받아 실행하고 그 결과를 다시 반환한다. 즉 어떤 작업을 생성하는 곳과 실제로 실행하는 곳이 분리되어 있는 것이다. 실행은 middleware에서 하기 때문에 우리는 직접 작성한 코드(생성을 담당하는)를 테스트해야 하는데, 두 부분이 분리되어 있는 덕분에 중간에 끼어들어 실행하지 않고도 테스트를 할 수 있게 되는 것이다.</p>\n<p>목적에 따라 redux-saga의 generator 함수를 테스트 하는 방법이 다를 수 있다. 예를 들면 함수의 각 실행 단계를 테스트 하는 것이다. 다른 방법으로는 함수 최종 결과만 테스트 하는 것이다. 현재 구현을 정확하게 테스트 하는데 있어서는 첫 번째 방법이 좋을 수 있지만 이는 내부 구현에 의존적이기 때문에 같은 기능을 하더라도 구현이 바뀌면 테스트도 함께 수정을 해야 하고, 테스트 코드 작성시 작성자의 개입이 상대적으로 많이 발생한다(테스트를 위한 코드에 개입이 많으면 그 코드에 의해 문제를 발견하지 못하는 경우가 생길 수도 있다). 반대로 두번째 방법은 함수 자체의 기능만 검증하기 때문에 구현에 덜 의존적이고 따라서 테스트 코드를 수정하는 일이 생기진 않겠지만 부가적으로 처리해줘야 하는 것들이 생긴다(중간 개입이 적기 때문에). 또 보다 정확한 테스트를 위해서는 내부에서 사용하는 각 함수들의 테스트도 함께 작성 해주는 것이 좋을 수 있다.</p>\n<p>우선은 간단하면서도 쉽게 적용할 수 있는 첫 번째 방법에 대해 정리해 본다.\n아래와 같은 saga 함수에 4가지를 테스트 한다고 가정해보자.(코드가 실제로 동작하려면 좀 더 필요하지만 간단한 설명을 위해 코드를 간략하게 했다.)</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">function</span><span class=\"token operator\">*</span> <span class=\"token function\">fetchUser</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> action<span class=\"token punctuation\">.</span>payload<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> secret <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">yield</span> <span class=\"token function\">call</span><span class=\"token punctuation\">(</span>getSecret<span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> additionalParams <span class=\"token operator\">=</span> <span class=\"token function\">getParams</span><span class=\"token punctuation\">(</span>secret<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token keyword\">yield</span> <span class=\"token function\">call</span><span class=\"token punctuation\">(</span>callApiForFetchUser<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span>additionalParams<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> userInfo <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    login<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    user<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">yield</span> <span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token function\">setUserInfoAction</span><span class=\"token punctuation\">(</span>userInfo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol>\n<li>secret를 가져오는 effect(<code>getSecret</code>) 생성</li>\n<li>api호출을 하는 effect(<code>callApiForFetchUser</code>) 생성</li>\n<li>redux에 저장하기 위한 effect(<code>setUserInfo</code>) 생성</li>\n<li>실행 완료</li>\n</ol>\n<p>이 테스트 코드는 아래처럼 작성할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Saga Test'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fetchUser'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'사용자 정보를 가져오는 api를 호출하고, redux에 userInfo를 저장하고, 정상 종료한다.'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> <span class=\"token string\">'19870605'</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> iterator <span class=\"token operator\">=</span> <span class=\"token function\">fetchUser</span><span class=\"token punctuation\">(</span><span class=\"token function\">fetchUserAction</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// 1. secret를 가져오는 effect(`getSecret`) 생성</span>\n      <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>iterator<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toEqual</span><span class=\"token punctuation\">(</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>getSecret<span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token comment\">// 2. api호출을 하는 effect(`callApiForFetchUser`) 생성</span>\n      <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>iterator<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> secret<span class=\"token punctuation\">:</span> <span class=\"token string\">'t4lz0mf4lt'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toEqual</span><span class=\"token punctuation\">(</span>\n        <span class=\"token function\">call</span><span class=\"token punctuation\">(</span>callApiForFetchUser<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> param1<span class=\"token punctuation\">:</span> <span class=\"token string\">'param1'</span><span class=\"token punctuation\">,</span> param2<span class=\"token punctuation\">:</span> <span class=\"token string\">'param2'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token comment\">// 3. redux에 저장하기 위한 effect(`setUserInfo`) 생성</span>\n      <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>iterator<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token string\">'nukeguys'</span><span class=\"token punctuation\">,</span> level<span class=\"token punctuation\">:</span> <span class=\"token string\">'vip'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toEqual</span><span class=\"token punctuation\">(</span>\n        <span class=\"token function\">put</span><span class=\"token punctuation\">(</span>\n          <span class=\"token function\">setUserInfoAction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n            login<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n            user<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token string\">'nukeguys'</span><span class=\"token punctuation\">,</span> level<span class=\"token punctuation\">:</span> <span class=\"token string\">'vip'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token comment\">// 4. 실행 완료</span>\n      <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>iterator<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>done<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBeTruthy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>단계별로 나눠보자.</p>\n<p><strong>우선 테스트 할 generator 함수를 호출해서 iterator를 받아온다.</strong><br>\ngenerator이기 때문에 iterator가 반환된다. 따라서 각 실행 단계별로 테스트를 할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> iterator <span class=\"token operator\">=</span> <span class=\"token function\">fetchUser</span><span class=\"token punctuation\">(</span><span class=\"token function\">fetchUserAction</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>1. secret를 가져오는 effect(<code>getSecret</code>) 생성</strong><br>\n위에서 말한 것 처럼 실행 결과가 아닌 effect를 비교한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>iterator<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toEqual</span><span class=\"token punctuation\">(</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>getSecret<span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>2. api호출을 하는 effect(<code>callApiForFetchUser</code>) 생성</strong><br>\n<strong>3. redux에 저장하기 위한 effect(<code>setUserInfo</code>) 생성</strong><br>\n동일하게 effect를 비교한다. 하지만 계속 진행하기 위해서는 이전 실행의 결과가 필요하다. 이를 실제 실행 결과가 아니라 직접 주입시켜서 사용하도록 하는 것이다. 따라서 실제 실행 없이 테스트가 가능하고, 이부분이 테스트 작성자가 개입하게 되는 부분이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>iterator<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> secret<span class=\"token punctuation\">:</span> <span class=\"token string\">'t4lz0mf4lt'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toEqual</span><span class=\"token punctuation\">(</span>\n  <span class=\"token function\">call</span><span class=\"token punctuation\">(</span>callApiForFetchUser<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> param1<span class=\"token punctuation\">:</span> <span class=\"token string\">'param1'</span><span class=\"token punctuation\">,</span> param2<span class=\"token punctuation\">:</span> <span class=\"token string\">'param2'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>iterator<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token string\">'nukeguys'</span><span class=\"token punctuation\">,</span> level<span class=\"token punctuation\">:</span> <span class=\"token string\">'vip'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toEqual</span><span class=\"token punctuation\">(</span>\n  <span class=\"token function\">put</span><span class=\"token punctuation\">(</span>\n    <span class=\"token function\">setUserInfoAction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      login<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      user<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token string\">'nukeguys'</span><span class=\"token punctuation\">,</span> level<span class=\"token punctuation\">:</span> <span class=\"token string\">'vip'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>4. 실행 완료</strong><br>\ndone값으로 generator가 최종적으로 이상없이 완료되었음을 확인한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>iterator<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>done<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBeTruthy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>위에서 언급한 것처럼 이런 방식은 구현 자체에 의존적이기 때문에 구현이 변경되면 테스트도 함께 수정이 필요해진다. 또 주입된 코드에 의해 문제가 있어도 테스트를 통과하는 경우가 발생할 수도 있다. 따라서 필요시에는 최종 결과만을 확인하는 테스트가 필요할 수 있다. 이 경우에는 mocking을 통해 saga를 실제로 실행하고 완료한 후에 확인을 한다. 하지만 saga 내부 로직을 대체하기가 생각보다 까다로운 경우가 많다. 장단이 있기 때문에 두 가지 방법을 적절히 조합해서 사용하는 것이 좋아 보인다. 기회가 되면 두번째 방법도 정리해 볼 예정이다.</p>\n<h3>참고</h3>\n<p><a href=\"https://redux-saga.js.org/docs/advanced/Testing.html\">3.10 Examples of Testing Sagas · Redux-Saga</a></p>","fields":{"slug":"/dev/redux-saga-test/"},"frontmatter":{"date":"2020/04/12","title":"redux-saga 테스트 하기 (feat. jest)","description":"redux-saga generator 함수 순차 테스트 하기","tags":["redux-saga","jest","test"]}}},{"node":{"excerpt":"…","html":"<p>다음주 부터 출근을 하는 줄 알고 있다가 다시 재택근무 연장 공지를 받았다. 정상 출근으로 전환한다는 얘기가 나왔을 때 납득하지 못하는 의견들이 꽤 있었다. 난 출근 자체에는 별 생각이 없었지만 다시 번복하면서 정상출근으로 전환을 결정했던 근거로 원격근무의 어려움이라고 나열된 내용들이 오히려 더 납득이 가지 않았다. …(쓰다보니 이후에 쓴 내용이 참 많았는데 말을 줄였다.) 그런 것 보다 그냥 이러저러한 상황을 고려해 더 나은 방향으로 결정을 바꿨다 정도면 되지 않았을까 싶다. 사실 정부가 사회적 거리두기를 연장하면서 그 영향이 있었겠지만, 그렇지 않았다면 출근 준비를 하고 있었을 거다.</p>\n<p>참고로 내 주변엔 상황이 전혀 나아지지 않았다. 내가 살고 있는 곳에서는 최근 몇주 동안이 오히려 그 전보다 확진자 발생 문자가 더 자주 날아왔다. 또 하나의 걱정은 상황이 지속되다 보니 사람들의 위기의식도 점점 줄어드는 것 같아 보인다는 점이다. 가끔 밖을 나가면 식당이나 카페에 사람이 넘쳐난다. 오히려 마스크 대란이 없어진 지금 마스크를 쓰지 않은 사람들이 더 많이 보이는 것 같다.</p>\n<p>이런 저런 생각들이 원격근무에 대해서도 이어졌다. 전부터 원격근무를 지향했던(하지만 하지 못했던) 입장에서 왜 하지 못하고 있을까 하는 생각을 해봤었다. 내가 내렸던 결론은 결국 신뢰의 문제였다. 그리고 아마 문화적인 영향도 있을 거라고 본다. 개인적인 생각이지만 책상앞에 앉아 있거나 눈에 보여야 일을 한다고 생각하는 경향들이 있는 것 같다. 일의 효율성보다는 노력같아 보이는 퍼포먼스를 중요시 한다는 거다. 물론 들이는 시간이 결과로 이어지는 일부 업들은 어느정도 이해가 되지만 이젠 그렇지 않은 곳들이 더 많다.(그리고 그런 곳들은 점점 더 줄어들게 될 거다.) 실제로 이전 회사에서는 야근을 많이 한 사람들의 순위를 매겨서 상품을 준다거나 처리한 지라 이슈 갯수로 성과를 측정한다는 얘기가 나오기도 했다. 일하다 쓰러져 봤니 따위의 말을 하는 리더도 있었으니 그 말을 건너 들었을 땐 정말 최악이다 싶었다. 배우들이 죽어도 무대에서 죽겠다는 말을 한다곤 하지만 그 말은 배우가 해야지 감독이 해서는 안될 말이다.</p>\n<p>간혹 농담 처럼 하는 말이지만 내가 월급을 줘야하는 사장이라면 어떨까 하는 생각을 해보면, 결국 신뢰가 있다면 가능하다는게 결론이다. 무엇에 대한 신뢰인가도 중요하다. 물론 각 개개인도 중요하지만 어려운 부분이다. 회사입장에서는 조직적인 차원에서 결과 즉 성과면 되지 않을까 싶다. 해보기 전에는 쉽지 않은 일이다. 하지만 자의반 타의반으로 경험을 해버렸다. 비록 준비없이 시작되었지만 아마 많은 사람들의 생각이 바뀌지 않았을까 싶다. 겪기 전의 걱정이나 미지의 두려움이 경험만으로 많이 사라졌을 것이기 때문이다. 그리고 같은 결과를 내는데 공간이 필요 없다면 당연히 회사 입장에서도 이득일 테고 말이다. 제대로 본격적인 준비를 하고 도입을 해서 실행을 한다면 지금보다 효율성이 올라갈 건 당연하다고 본다. 물론 출근 자체를 거부하는 건 아니다. 그저 출근을 안 할 수도 있는 선택지가 있었으면 하는 것이다. 그런 의미에서 여러 회사에서 하고 있는 자율출근도 좋은 방안이라고 생각된다.</p>\n<p>개인적인 바램으로는 코로나가 물러가더라도 이런 변화가 유지되었으면 좋겠다. 내가 최종적으로 원하는 것은 자유다. 시간적으로 공간적으로 그리고 경제적으로 보다 자유로울 수 있는 환경. 내 스스로 나에게 맞는 환경을 직접 만들고 선택하는 것이다. 그리고 그로인한 선순환. 아마 이번을 계기로 그런 시기가 좀 더 빠르게 다가오지 않을까 하는 생각이 들었다.</p>","fields":{"slug":"/life/songpagu-freedom/"},"frontmatter":{"date":"2020/04/05","title":"나에게 자유를 달라","description":"재택근무가 연장되고 들었던 생각","tags":["nukeguys"]}}},{"node":{"excerpt":"…","html":"<p>오랜만에 학교 선배이자 직장 동기였던 형을 만났다. 최근 이직을 준비한다면서 이것저것 물어보고 만나서 대화를 하면서 항상 흘러가는 주제가 있다. 현재의 상태로 인한 미래에 대한 불안, 나아가기 위한 노력과 스스로에 대한 위안 같은 것들 이었다. 이전에도 그리고 요즘에도 나도 들고 있는 생각들이라 많은 공감이 되는 내용들이었다. 그렇게 한참 얘기를 하다 헤어지고 집에 와서 알람을 확인하다가 짧은 글을 하나 보게 됐다. <code>\"될 놈은 되고, 될 일은 된다\"</code>로 시작하는 글이었다. 피드를 넘기고 잠시 생각을 하는 사이에 지나가 버리고 다시 찾을 수가 없어 정확한 문장은 옮기지 못하지만, 될 일은 결국엔 된다. 하지만 해봐야만 될 일인지 알 수 있다. 그렇기 때문에 걱정은 접어두고 열심히 해봐라라는 의미였던 것 같다(내가 받아드린 의미는 이렇지만 실제 문장의 느낌은 많이 달랐다).</p>\n<p>언젠가 나도 농담반 진담반으로 자주 하던 비슷한 말이 있다. <code>될놈될 안될안(될 놈은 되고 안될 놈은 안된다)</code>. 겉으로 느끼기엔 냉소적으로 들릴 수 있으나 실제로는 다른 의미를(적어도 나한테는) 가지고 있는 말이다. 처음 저 말을 떠올리게 된 건 고민을 좀 줄이고 실행에 자신감을 갖기 위함이었다. 원래 성격인지는 모르겠으나 모든 일에 최악을 포함한 여러 경우의 수를 생각하거나 안될 상황에 대한 고민과 걱정이 많은 편이다. 그러다 보니 생각만으로 이미 결론을 내버리고 고민만 하다 지치는 경우가 많았다(물론 아직도 그런 편이기는 하다). 그래서 부담을 내려놓고 일단 조금은 가벼운 마음으로 자신감을 갖고 해보자는 일종의 마인트 컨트롤을 위함이었다. 실제로도 많은 도움이 됐었다.(물론 근거있는 자신감인 경우에)</p>\n<p>그리고 요즘 다시 필요한 말이겠다라는 생각이 들었다. 재택으로 혼자 있는 시간이 많아져서 인지, 코로나 때문에 오는 불안함인지, 몸 상태가 별로라 그런건지는 모르겠으나 걱정과 생각이 많아졌다. 아니면 봄이라 그런건가. 여튼 이러저러한 생각을 하다가 결과적으로 명확해야 겠다는 생각을 했다. 최근 일상이 대부분이 집이고 일 그리고 운동을 제외하면 딱히 하는게 없다 보니 다른 할 것들을 찾기 시작했다. 생각은 많이 나는데 막상 뭘 해야 할 지를 정할 수가 없었다. 이것도 필요하고 저것도 하고 싶고 관심 가는 것도 많다. <code>sensitive</code>, <code>multipotentialite</code> 같은 말로 좋게 지칭하기도 하지만 그건 행동으로 이어졌을 때나 가능하다. 그렇지 않으면 결국 생각많고 선택장애를 가진 몽상가에 불과하다. 여튼 행동을 하기 위해선 선택 그리고 사소하지만 구체적인 지침이 필요했다. 최근에 여러번 접했던 <code>루틴</code>과도 비슷할 듯 싶었다.</p>\n<p>난 행동을 하는데 있어 외적인 요인이 효과적으로 작용하는 편이다. 마치 이시간에 글을 쓰고 있는 것 처럼. 요인이야 다양할 수 있다. 사람이 될 수도 아니면 돈 혹은 다른 보상일 수도. 최근 알게 된 어떤 앱의 컨셉이 “돈을 걸면, 습관이 만들어진다”였다. 격하게 공감이 됐다. 그래서 나도 이것들을 종합해서 사용해 보기로 했다. 가볍게 아침부터 시작해서 반복적이고 필요한 일들, 그리고 좀 더 장기적으로 하고 싶거나 해야할 일들까지. 올해 들어서도 생각만 하고 못했던 일들이 너무 많다. 아직 구체적인 계획은 정해지지 않았지만 어차피 될 놈은 되고 될 일은 되게 되어 있다. 마음 먹었으니 일단 해봐야 겠다.</p>","fields":{"slug":"/life/meant-to-be/"},"frontmatter":{"date":"2020/03/29","title":"될놈될 안될안","description":"어차피 될 놈은 되고 안될 놈은 안된다.","tags":["될놈될","된일된"]}}},{"node":{"excerpt":"COVID-19, 일명 코로나 바이러스 덕분인지 때문인지 재택근무도 어느새 한 달을 지나가고 있다. 처음엔 조금 지나면 괜찮아 지겠지 했었는데 이젠 제법 길어지겠구나 하는 생각으로 바뀌고 있다. 개학도…","html":"<p>COVID-19, 일명 코로나 바이러스 덕분인지 때문인지 재택근무도 어느새 한 달을 지나가고 있다. 처음엔 조금 지나면 괜찮아 지겠지 했었는데 이젠 제법 길어지겠구나 하는 생각으로 바뀌고 있다. 개학도 4월로 미뤄진 만큼 재택도 그 때 까지는 길어질 테고 확진자가 계속 발생하는 이상 지금 상황은 쉽사리 수그러들지 않을 것 같다. 하루 빨리 이 사태가 정리되고 어느 덧 다가온 봄을 즐길 수 있었으면 좋겠다는 생각이 간절하다. 근 한달 동안 재택을 하면서 들었던 생각들을 정리해 본다.</p>\n<h3>재택근무</h3>\n<p>코로나 발생 전에는 국내에서 재택을 하는 회사들은 많지 않았다.(내가 아는 한에서는) 간혹 제한적 재택을 허용하는 곳들은 있다고 들리기는 했으나, 이 계기(좋은 일은 아니지만)가 아니었다면 요즘처럼 많은 회사들이 전사적으로 재택을 시행하는 일은 앞으로도 오랜기간 동안은 없지 않았을까 싶다. 시작이 어떻든 근 한달 동안 재택근무를 경험해 보고 든 생각은 충분히 좋다라는 것이다. 물론 이전에도 재택에 대해 긍정적인 생각이었고 실제로 경험해 보니 그 생각은 더 확고해 졌다.<br>\n사라진 출퇴근 시간, 좀 더 자유롭고 편안한 업무 환경 그리고 예상외로 높아진 업무 집중도(장점인가?) 등 겪어보기 전에 했던 걱정들도 어느정도는 사라졌다. 하지만 대비 없이 시작한 만큼 아쉬운 부분들도 있다. 무엇보다 가장 큰 건 업무 공간이 확실하게 분리되어 있지 않아 삶과 일의 경계가 모호해 졌다는 것이다. 사실 출근을 할 때도 일이 있으면 퇴근 후나 주말에 한 적이 있지만 그 때와는 또 다른 느낌이다. 사실 이건 재택근무의 단점이라기 보다 아직 재택에 대비를 제대로 하지 못한 채 하게 되서 발생하는 상황이라는게 더 맞을 것 같다.<br>\n물론 각자 처한 상황이나 환경마다 받아드리는 자세와 느낌은 많이 다를 수 있다. 하지만 결과적으로 디지털 노마드를 꿈꾸는 한 사람으로서는 충분히 좋다라는게 지금까지의 결론이다.</p>\n<h3>민족 of 배달</h3>\n<p>거의 온 종일을 집에 있다보니 중요한 것 중 하나가 먹는거다. 출퇴근을 하면 밖에서 사먹는 경우가 대부분이었다면 이젠 거의 모든 끼니를 집에서 해결한다. 방법엔 여러가지가 있다. 우선 가장 편한 배달음식. 하지만 그 만큼 비용도 많이 든다. 최소 한끼에 만원 이상이 든다. 나도 처음엔 배달을 애용했다. 그러다 지출이 너무 많아지고 지겨워 질 때 쯤 인스턴트를 주문했다. 그리고 그것도 질릴 때 쯤 이제는 HMR(Home Meal Replacement), 일명 간편식 또는 밀키트라 불리는 것들을 사기 시작했다. 마찬가지로 인스턴트이긴 하지만 더 다양하고 신선하면서 간단한 조리를 해야하기 때문에 조금은 더 요리에 가깝달까. 오늘도 비어가는 곳간을 채우기 위해 생각하다 자연스럽게 주문을 한다. 그러다 문득 역시 우린 배달의 민족(동명의 특정 서비스를 지칭하는 말은 아니다)이고 앞으로도 더 그렇게 되겠구나 하는 생각이 들었다.<br>\n전에는 같은 걸 사더라도 대형마트를 가거나 아니면 최소 동네마트라도 가서 직접 사는 경우가 많았다. 하지만 이젠 당연하게 온라인으로 주문을 하고 받는다. 난 SSG의 새벽배송과 쿠팡의 로켓배송을 주로 사용했다. 그리고 이젠 배송이 아닌 배달을 받는다. 지금 사용하는 건 B마트다. 처음 B마트가 시작됐을 때 까지만 해도 과연 될까 싶었다. 그러다 배달료 무료 이벤트를 이용해 사용을 한 번 해봤다. 나쁘지 않았다. 하지만 해당 회사에서 올해 주력 사업으로 있다는 말에 그정도 일까하는 의구심이 들어 내부 직원에게 직접 물어보기도 했다. 하지만 내 예상외로 잘되고 있었고 주변 반응도 좋았다. 그리고 그 후 얼마 지나지 않은 지금 나도 당연하게 사용하고 있다. 단순 배달대행에 그쳤다면 별로 였겠지만 근처 마트나 편의점에서 사지 못하는 소포장 물품이나 음식, 과일이나 야채같은 신선식품들까지 생각보다 필요한 것 들이 많고 심지어 2만원 이상이면 배달료도 무료이기 때문에 대형마트를 가서 잔뜩 털어올 게 아니라면 전혀 나쁠게 없었다. 오히려 주변 마트보다 저렴한데 바로 문앞까지 배달이 되니 말이다. 바햐으로 진정한 배달의 민족이 되어가고 있는게 아닌가 하는 생각이 든다.</p>\n<h3>블랙미러</h3>\n<p>무료함에 넷플릭스를 다시 사용하기 시작했다. 그리고 시작하자마자 멈췄던 블랙미러를 인기순위로 몇 편을 봤다. 시즌1 몇 편을 보고 접었었는데 이렇게 다시 헤어 날올 수 없는 늪에 빠져들었다. 그나마 다행인 것은 블랙미러는 시리즈가 아니라 단편이라는 점이다. 보고나서 미래의 모습에 대해 잠시 상상해 봤다.<br>\n많은 사람이 공감하는 한 가지 일 것 같은, 변하지 않는 생각 중의 하나는 부의 독과점이다. 특정 인물 혹은 회사나 집단이 부의 대부분을 소유하게 되고 사회는 계층화 된다. 중요한 것은 이 계층이 얼마나 어떻게 나뉘고 각 계층은 어떤 모습일까 하는 것이다.<br>\n첫 번째는 상대적으로 긍적적인 모습이다. 자본주의의 끝은 공산주의라고 했던가. 얼마 전까지 많이 들렸던 기본소득이니 하는 것들이 떠올랐다. 기술이 발전하면서 노동의 의미는 변한다. 더 이상 인간은 생존을 위한 노동을 할 필요가 없어지고 각자의 목적에 따라 삶을 즐기는데 시간을 사용한다. 여기서도 많은 상황들이 있겠지만 어찌보면 상향 평준화라고나 할까. 할 말은 많은데 이렇게 단순하게 정리하려니 어렵다.<br>\n두 번째는 처음과 동일하게 계층 구조는 단순하지만 하위 계층에 속한 인류는 상위 계층을 위해 살아간다. 어찌보면 양 극단이 더욱 벌어지는 구조다. 지금도 사회 구조는 점점 더 뚜렷해지고 부의 대물림, 빈익빈부익부의 세상이 오고 있다고들 한다. 이 구조가 점점 심해져 이분화 되고 누군가의 통제나 제재가 없는 상황이라면 이런 모습도 고려해 볼 수 있지 않을까 싶다.<br>\n몇 가지가 더 떠올랐다. 그러다 결국 상상하고 있는 모습들의 공통점을 발견하고 더이상 하지 않았다. 바로 본인의 의지와 전혀 상관없이 선천적으로 정해진 사회적 계급을 정작 의지와 노력으로는 벗어 날 수 없다는 것이다. 그리는 미래의 모습에 깔려있는 암울한 전제조건이 마음에 들지 않았다. 그리고 왠지 다른 것들보다 현실적이고 들어맞을 것 같은 느낌이 별로였다. 어쩌면 누군가에 의해 이미 만들어진 프레임 속에서 상상하고 있는게 아닐까 하는 생각도 들었다. 기분이 별로다. 글로 옮기는 것도 여기까지만 해야겠다.</p>","fields":{"slug":"/life/several-thought3/"},"frontmatter":{"date":"2020/03/22","title":"생각의 단편들(3)","description":"재택근무를 하면서 든 생각들","tags":["corona","COVID-19","remote-work","black-mirror"]}}},{"node":{"excerpt":"웹 개발을 하다 보면 네트워크 요청시 실제 원하는 요청(GET, PUT, POST, DELETE 등)전에 OPTIONS…","html":"<p>웹 개발을 하다 보면 네트워크 요청시 실제 원하는 요청(GET, PUT, POST, DELETE 등)전에 <code>OPTIONS</code> 요청이 발생하는 것을 볼 수 있다. 이게 뭘까하고 응답값을 확인하면 아무것도 없다. 응답값이 없는 이 요청은 왜 발생하는걸까?\n<code>preflight</code>라고도 불리는 <code>OPTIONS</code> 요청은 브라우저가 서버에게 지원하는 옵션들을 미리 요청하고 허가된 요청에 한해서 전송하기 위한 보안상의 목적이 있다.<br>\n모든 경우에 발생하지 않고, 실제 요청에 비해 많은 부분을 차지하지 않지만 경우에 따라 수백 ms 응답 속도가 중요하다면 발생하지 않도록 하는 것이 좋다. 그러기 위해선 발생하는 상황을 알아야 하는데 이는 <code>CORS</code>와 관련이 있다.</p>\n<h5>CORS(Cross-Origin Resource Sharing)와 보안</h5>\n<p>웹 개발을 하는 사람이라면 대부분 알겠지만 간단히 정리하면, 현재 웹페이지가 웹페이지를 받은 서버와 다른 서버의 리소스를 요청하는 것을 의미한다. 대표적인 예로 웹서버와 분리되어 있는 API 서버로 요청을 보내거나, 아래처럼 CDN의 이미지를 사용하는 것을 들 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">'</span>&lt;cdn-url>/image.png<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>하지만 이는 유용하면서도 보안상의 문제점을 가지고 있다. 웹사이트에서 악의적인 목적으로 외부로 정보를 보내거나 하는 등의 요청을 보낼 수 있기 때문이다. 그렇기 때문에 브라우저는 <code>OPTIONS</code>를 <code>preflight</code>하여 서버에서 허용하는 옵션을 미리 확인하고, 허용되지 않은 요청의 경우 <code>405(Method Not Allowed)</code>에러를 발생시키고 실제 요청은 전송하지 않는다.</p>\n<h5>OPTIONS 요청</h5>\n<p>하지만 모든 CORS 상황에서 <code>OPTIONS</code> 요청이 발생하지 않는다. 아래 조건을 모두 만족하면 OPTIONS 없이 요청을 보낸다.</p>\n<ol>\n<li><code>GET</code>, <code>HEAD</code>, <code>POST</code> 요청 중 하나</li>\n<li>user agent에 의해 자동으로 설정되는(Connection, User-Agent, Fetch 스펙상 <a href=\"https://fetch.spec.whatwg.org/#forbidden-header-name\">forbidden header</a>로 정의되어 있는) 헤더외에 <a href=\"https://fetch.spec.whatwg.org/#cors-safelisted-request-header\">CORS-safelisted request-header</a>로 명시된 헤더들만 포함된 경우(<code>Accept</code>, <code>Accept-Language</code>, <code>Content-Language</code>, <code>Content-Type</code> 등)</li>\n<li>Content-Type은 <code>application/x-www-form-urlencoded</code>,\n<code>multipart/form-data</code>, <code>text/plain</code>만 허용</li>\n</ol>\n<p>위의 조건들 중 하나라도 만족하지 않으면 preflight 요청을 보내게 된다. 이 과정을 간단히 정리하면 아래와 같다.</p>\n<ol>\n<li>브라우저에서 method를 <code>OPTIONS</code>로 요청 전송</li>\n<li>OPTIONS를 받은 서버가 응답헤더에 허용하는 옵션(<code>Access-Control-Allow-*</code>)을 포함해 전송</li>\n<li>브라우저는 응답헤더의 옵션을 확인해 허용되지 않은 요청은 <code>504</code>에러 발생, 허용하는 경우 요청 전송</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1024px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/09a7671f8c2dc6d699843c3075f656de/6f075/options.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.871382636655945%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABSklEQVQoz3WR2XKCQBBF+RBBZRZWURYZluCCqUq5pBJ9yUOSj8j/P9z0gFpFlT6cujDTfWluG5vfP5jt951R+wPWfmG9XqMoCrTbEvt9gfN5SeQ4HhQulxzvJ4XPj5zqCqorUZY9hut5YIwNsG27u2xfd3g7pNTo4XS0SE0yM0ktbDdT7HYTBIHuERCCg3MOQzfrB87ZVXlnmiQJmlWDJMsRhhn8IIWQEUxTYDTiGI8ZLEt/fDiM0RlcuZkJIbBYLJBlGeZRBN934boePM+H4zh0L+/od43USNkbPmJOhmVVoa5foFRBWSls25zO5qhqgrQsI8xmAU0fEqS+/9hQTxnHMVa0mLqukSuFNAuRph5FQVw1jh2qt7vMbzw17DJsGiyXORllFP6sC38ysTGdsjuMDXufGur8KvpdnY/ruh1SisHybsvsTfvzf/sW8+Y51+KkAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"OPTIONS request\"\n        title=\"OPTIONS request\"\n        src=\"/static/09a7671f8c2dc6d699843c3075f656de/3b243/options.png\"\n        srcset=\"/static/09a7671f8c2dc6d699843c3075f656de/00397/options.png 256w,\n/static/09a7671f8c2dc6d699843c3075f656de/c5a17/options.png 512w,\n/static/09a7671f8c2dc6d699843c3075f656de/3b243/options.png 1024w,\n/static/09a7671f8c2dc6d699843c3075f656de/ccc27/options.png 1536w,\n/static/09a7671f8c2dc6d699843c3075f656de/6f075/options.png 1866w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>참고로 CORS가 가능하려면 서버에서 허용된 origin이어야 한다. 서버에서 응답을 보낼 때 헤더에 <code>Access-Control-Allow-Origin</code>을 포함해 함께 보내는데 이 값에 <code>origin</code>이 포함되지 않는다면 에러가 발생하게 된다. 일반적으로 말하는 CORS 문제이다.</p>\n<h5>OPTIONS 요청 없애기</h5>\n<p>첫 번째는 CORS 상황이 되지 않도록 하는 것이다. 즉 웹서버와 동일한 서버의 리소스만 사용하는 것이다. 하지만 API 서버가 분리되어 있는 경우가 많기 때문에 쉽지 않다. 이런 경우에는 웹에서 발생하는 요청을 웹서버와 동일한 서버에서 받아 실제 API서버로 전달하는 중계점을 두면 해결될 수 있다.</p>\n<p>두 번째로는 CORS에서 preflight가 발생하지 않는 조건을 모두 만족시키는 것이다. 하지만 이것도 일반적으로 인증을 위한 헤더를 포함하거나, 최근엔 Content-Type으로 <code>application/json</code>을 사용하는 경우가 많기 때문에 적용하기는 어려울 수 있다.</p>\n<h5>사족</h5>\n<p>관련 정보를 찾아보다가 네트워크 요청을 위한 라이브러리(axios 같은)를 사용하면서 OPTIONS 요청이 발생한다고 문제를 제기하는 경우들 봤는데 이는 http와 관련된 웹 표준이기 때문에 해당 라이브러리들에서는 어찌할 도리가 없다.</p>\n<p>추가로, 내용과는 조금 거리가 있지만 예전부터 요청과 응답을 통제하기 위해 표준에 정의된 헤더나 상태코드를 활용하는 경우를 많지 보지 못했다. 물론 장단점이 있겠지만 좀 더 잘 알고 사용해보면 좋지 않을까 하는 생각이 다시 한 번 들었다.</p>\n<p>[참고] - <a href=\"https://developer.mozilla.org/ko/docs/Web/HTTP/CORS\">교차 출처 리소스 공유 (CORS) - HTTP | MDN</a></p>","fields":{"slug":"/dev/options-request/"},"frontmatter":{"date":"2020/03/15","title":"[TIL] `OPTIONS` 요청은 왜 발생하는가?","description":"OPTIONS와 CORS의 관계","tags":["TIL","OPTIONS","CORS"]}}},{"node":{"excerpt":"개발을 하다보면 자주 안쓰다보니 혹은 너무 당연하게 생각하다 가끔 헷갈리거나 쌩둥맞게 낯설게 다가오는 것들이 있다. debounce와 throttle…","html":"<p>개발을 하다보면 자주 안쓰다보니 혹은 너무 당연하게 생각하다 가끔 헷갈리거나 쌩둥맞게 낯설게 다가오는 것들이 있다. <code>debounce</code>와 <code>throttle</code>도 얼마 전에 뭐가 뭐였지 하고 다시 찾아봤던 것 중 하나다.\n다시 보지 않기 위해 기록한다던 누군가(베토벤이었나?)의 말을 빌려 다신 헷갈리지 않기 위해 정리를 해본다.</p>\n<p>일단 둘다 실행을 제어하기 위해, 좀 더 정확히는 빈번한 실행을 방지하기 위한 목적으로 사용한다.</p>\n<h3>Debounce</h3>\n<p>마지막 호출 이후 특정 시간이 지나야 호출 되도독 제한한다. 다른 말로는 이벤트를 그룹화 한다고도 한다. 즉 연속으로 발생하는 이벤트를 하나의 그룹으로 그룹화해서 한 번만 호출이 발생하도록 제한 것이다.</p>\n<p><a href=\"https://i0.wp.com/css-tricks.com/wp-content/uploads/2016/04/debounce.png\"><img src=\"https://i0.wp.com/css-tricks.com/wp-content/uploads/2016/04/debounce.png\" alt=\"debounce\"></a></p>\n<p><code>debounce</code>를 활용하기 좋은 예제는 자동 완성이다. 사용자가 타이핑을 계속하는데 매번 api를 호출해서 결과를 받아서 그리면 그 사이에 다른 타이핑이 발생하고 결국 보여주기도 전에 새로운 결과가 필요한 상황이 발생하는 비효율이 발생할 수 있다. 따라서 타이핑이 더이상 발생하지 않아 타이핑이 완료됐다는 판단이 들면 요청을 발생시키는 것이다.</p>\n<p><code>debounce</code>에서는 두 가지 선택이 있다. 그룹화 된 호출들의 처음에 호출할지 대기 시간이 지난 후에 호출 할지이다. 즉 이벤트1이 발생하자마자 이벤트1을 실행하고 대기시간이 지난 후의 이벤트2가 발생했을 때 다시 이벤트2를 즉시 실행하거나, 이벤트1이 발생하고 대기시간이 지난 후에 이벤트1을 실행하고 대기시간이 지나고 이벤트2가 발생하면 다시 대기시간이 지난 후에 이벤트2를 실행한다. 차이라고 한다면 즉시 실행을 하게 되면 호출이 빈번하지 않은 경우 <code>debounce</code>가 적용되지 않은 것과 동일한 시점에 이벤트가 발생 한다는 것이다.</p>\n<p><a href=\"https://i2.wp.com/css-tricks.com/wp-content/uploads/2016/04/debounce-leading.png\"><img src=\"https://i2.wp.com/css-tricks.com/wp-content/uploads/2016/04/debounce-leading.png\" alt=\"leading\"></a></p>\n<h3>Throttle</h3>\n<p>일정 주기마다 한 번씩만 호출 되도록 제한한다. <code>debounce</code>와 차이점은 특정 시간 안에 최소 한 번의 실행을 보장한 다는 것이다. 다르게 표현하자면 이벤트가 발생한 후 특정 시간 동안 발생하는 이벤트들을 무시하고 정해진 시간이 지난 후에 다시 이벤트를 발생 시키는 것이다.</p>\n<p><code>throttle</code>의 예로는 무한 스크롤을 수 있다. 다음 내용을 미리 가져오기 위해 끝에 도달했는지를 검사해야 하는데 이를 스크롤이 발생할 때 마다 하는건 매우 비효율 적이다. 실제 이벤트 발생보다 덜 빈번하게 주기를 낮춰서 검사하는 것이 좋은데 이때 사용할 수 있다.</p>\n<h3>requestAnimationFrame(rAF)</h3>\n<p><code>throttle</code>과 동일한 효과를 내는 브라우저 native API이다. 매 프레임 마다 실행 되는데 기본적으로 16ms(60fps)마다 실행이 된다. 차이가 있다면 무엇보다 <code>requestAnimationFrame</code>은 브라우저 API라는 점이다. 그렇기 때문에 사용이 편하고 브라우저가 렌더링 스케줄에 대한 최적화를 하기 때문에 렌더링에 있어서는 더 좋을 수 있다. 하지만 모든 브라우저에서 지원하지 않기 때문에 <code>polyfill</code>이 필요할 수 있고 <code>node.js</code>에서는 지원하지 않기 때문에 서버에서는 사용할 수 없다. 추가로 <code>rAF</code>는 다른 두 함수와 다르게 시작 시점을 직접 컨트롤해야 한다는 것이다.</p>\n<p>그렇다면 언제 사용하는 것이 좋을까?\n<code>rAF</code>의 경우 위에서 언급했듯이 렌더링과 관련된 처리를 할 때 매우 유용하다. 브라우저 native API인데다 렌더링에 맞추어져 있기 때문이다. 대신 렌더링이 아닌 경우, 예를 들어 서버 API 호출이나 애니메이션 같은 렌더링의 시작이나 종료를 결정해야 하는 경우에는 <code>debounce</code>나 <code>throttle</code>이 유용하다. 특히 16ms 보다 덜 빈번하게 주기를 조절해야 하는 경우에는 특히 사용해야 한다.</p>\n<p>정리를 해보면,<br>\n<code>debounce</code>는 키입력과 같이 갑자기 이벤트가 몰리는 상황에서 그룹화를 통한 제어가 필요할 때,<br>\n<code>throttle</code>은 정해진 매 주기마다 이벤트 실행을 보장해야 할 때,<br>\n<code>requestAnimationFrame</code>은 throttle과 유사하지만 렌더링과 관련된 (화면에 무언가를 그린다거나 부드러운 애니메이션 효과 등) 작업을 처리할 때 사용하면 좋다.</p>\n<p>좀 더 자세한 내용과 실제 예제를 확인하고 싶으면 아래 참고의 링크를 확인하면 된다.</p>\n<h3>참고</h3>\n<p><a href=\"https://css-tricks.com/debouncing-throttling-explained-examples/\">Debouncing and Throttling Explained Through Examples | CSS-Tricks</a></p>","fields":{"slug":"/dev/debounce-and-throttle/"},"frontmatter":{"date":"2020/03/08","title":"debounce vs throttle","description":"항상 헷갈려서 정리해 본다.","tags":["TIL","throttle","debounce"]}}},{"node":{"excerpt":"…","html":"<p>대개의 브라우저에서 방향키로 스크롤을 하면 뚝뚝 끊겨서 이동이 된다. 보통은 크게 상관이 없지만 컨텐츠를 소비하는 화면이라면 사용성 경험적으로 좋지 못하다.(물론 마우스로는 가능하나 키보드를 사용하는 경우에 한정된 경우다) 이를 개선하기 위해 뷰어에서 키보드로 이동하는 경우에도 smooth-scroll을 적용하기 위한 컴포넌트를 작성했었다. 시간은 좀 지났지만 정리해 본다.\n(적용된 결과는 <a href=\"https://page.kakao.com/viewer?productId=50896822\">여기</a>에서 먼저 확인해보자.)</p>\n<h3>벤치마킹</h3>\n<p>역시나 바퀴의 재발명은 불필요하다는 생각에, 일단 smooth-scroll 기능을 제공하는 곳이 있는지 이미 구현되어 있는 오픈소스들이 있는지 확인 해 봤다. 여기저기 찾다가 도움이 될 만한 chrome extension 2개(<a href=\"https://github.com/gblazex/smoothscroll\">smoothscroll</a>, <a href=\"https://github.com/franciscolourenco/smoothkeyscroll\">smmothkeyscroll</a>)를 발견했다. 하지만 extension으로만 제공해서 사용하기 불가능했기 때문에 참고해서 직접 구현하기로 결정하고 작업을 시작했다.</p>\n<h3>1. Queue를 사용한 가속도 처리</h3>\n<p>기본적인 아이디어는 키 이벤트가 발생하면 <code>발생 시간</code>과 <code>스크롤 거리</code>를 큐에 저장하고 <code>requestAnimationFrame</code>을 호출한다. 그러면 각 단계에서는 <code>스크롤 거리x(현재시간-발생시간)/한 번의 이벤트에 걸리는 시간</code>으로 현재 프레임에 이동할 거리를 구한 후 스크롤(<code>window.scrollBy</code>)한다. 그리고 최종적으로 해당 이벤트에 대한 이동이 끝났으면 큐에서 제거한다.<br>\n이전 스크롤이 끝나기 전에 동일 방향의 이벤트가 다시 발생하면 큐에 새로 추가하고 각 프레임에서는 큐에 들어있는 모든 이벤트에 대해 위의 이동 거리를 계산 후 합해서 스크롤을 한다. 이렇게 되면 키를 계속 누르고 있는 경우에는 이벤트가 큐에 누적되기 때문에 가속이 발생하게 되고, 키를 다시 때게 되면 순차적으로 이벤트가 완료되면서 큐가 줄어들기 때문에 감속이 된다. 또한 한 번에 사용되는 시간이 정해져 있기 때문에 무한정 누적되지 않아 일정한 속도 이상은 늘어나지 않게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">// ...</span>\n  <span class=\"token function-variable function\">_keydown</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event<span class=\"token punctuation\">:</span> KeyboardEvent</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n\n    <span class=\"token keyword\">let</span> y<span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>keyCode<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">case</span> <span class=\"token constant\">KEY_CODE</span><span class=\"token punctuation\">.</span><span class=\"token constant\">UP</span><span class=\"token punctuation\">:</span>\n        y <span class=\"token operator\">=</span> <span class=\"token operator\">-</span>scrollDistance<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">case</span> <span class=\"token constant\">KEY_CODE</span><span class=\"token punctuation\">.</span><span class=\"token constant\">DOWN</span><span class=\"token punctuation\">:</span>\n        y <span class=\"token operator\">=</span> scrollDistance<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">default</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">_scrollArray</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">_scrollArray</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">y<span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">_directionCheck</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_que<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      scrollY<span class=\"token punctuation\">:</span> y<span class=\"token punctuation\">,</span>\n      lastY<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n      start<span class=\"token punctuation\">:</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_pending<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> animationTime <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">step</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> now <span class=\"token operator\">=</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">let</span> totalY <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_que<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> item <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_que<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">const</span> elapsed <span class=\"token operator\">=</span> now <span class=\"token operator\">-</span> item<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">const</span> finished <span class=\"token operator\">=</span> elapsed <span class=\"token operator\">>=</span> animationTime<span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">const</span> rate <span class=\"token operator\">=</span> finished <span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">:</span> elapsed <span class=\"token operator\">/</span> animationTime<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">const</span> distY <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>scrollY <span class=\"token operator\">*</span> rate <span class=\"token operator\">-</span> item<span class=\"token punctuation\">.</span>lastY<span class=\"token punctuation\">)</span> <span class=\"token operator\">>></span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n        totalY <span class=\"token operator\">+=</span> distY<span class=\"token punctuation\">;</span>\n        item<span class=\"token punctuation\">.</span>lastY <span class=\"token operator\">+=</span> distY<span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>finished<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_que<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          i<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n\n      window<span class=\"token punctuation\">.</span><span class=\"token function\">scrollBy</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> totalY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>y<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_que <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_que<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>step<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_pending <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>step<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_pending <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">_directionCheck</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">y<span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> direction <span class=\"token operator\">=</span> y <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token constant\">DIRECTION</span><span class=\"token punctuation\">.</span><span class=\"token constant\">DOWN</span> <span class=\"token punctuation\">:</span> <span class=\"token constant\">DIRECTION</span><span class=\"token punctuation\">.</span><span class=\"token constant\">UP</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_direction <span class=\"token operator\">!==</span> direction<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_direction <span class=\"token operator\">=</span> direction<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_que <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// ...</span></code></pre></div>\n<h3>2. 고정거리 스크롤</h3>\n<p>위 방법으로 하면 가속도 처리가 되긴 하지만, 버벅임이 발생하는 문제가 있었다. 그래서 단순하게 테스트로 이벤트가 발생할 때 마다 일정한 거리를 이동하도록 해봤더니 훨씬 부드러운 스크롤이 됐다. 매 프레임마다 큐를 모두 확인하는 계산이 가볍지 않아서 일까 싶었고 부드러운 스크롤이 목표였기 때문에 가속은 굳이 필요하지 않았다.</p>\n<p>최종적으로 키이벤트가 발생하면 방향에 따라 일정한 이동거리를 저장한다. 그리고 각 프레임에서는 저장된 거리만큼 스크롤을 시킨다. 훨씬 간단하지만 더 자연스럽게 동작했다.</p>\n<p>참고로 처음 구현을 하고 나서도 가끔 끊기는 현상이 있었다. 아래에 주석처럼 키 이벤트에 대한 브라우저의 기본 스크롤 동작이 있기 때문에 함께 동작하면서 발생한 현상이었다. 기본 동작을 방지하기 위해서 <code>event.preventDefault();</code>를 호출해 주어야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">// ...</span>\n  <span class=\"token function-variable function\">onKeyEvent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event<span class=\"token punctuation\">:</span> KeyboardEventObject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n    <span class=\"token keyword\">const</span> newDirection <span class=\"token operator\">=</span>\n      keyType <span class=\"token operator\">===</span> KeyboardKeyType<span class=\"token punctuation\">.</span>ArrowUp <span class=\"token operator\">?</span> Direction<span class=\"token punctuation\">.</span>Up <span class=\"token punctuation\">:</span> Direction<span class=\"token punctuation\">.</span>Down<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span><span class=\"token keyword\">type</span> <span class=\"token operator\">===</span> <span class=\"token string\">'keydown'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 호출하지 않으면 브라우저의 기본 스크롤 동작 때문에 끊기는 현상이 생긴다.</span>\n      event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">scroll</span><span class=\"token punctuation\">(</span>newDirection<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n      event<span class=\"token punctuation\">.</span><span class=\"token keyword\">type</span> <span class=\"token operator\">===</span> <span class=\"token string\">'keyup'</span> <span class=\"token operator\">&amp;&amp;</span>\n      newDirection <span class=\"token operator\">===</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scrollDirection\n    <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">scroll</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">direction<span class=\"token punctuation\">:</span> Direction</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scrollDirection <span class=\"token operator\">=</span> direction<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> scrollSpeed <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scrollDistance <span class=\"token operator\">=</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scrollDirection <span class=\"token operator\">===</span> Direction<span class=\"token punctuation\">.</span>Up <span class=\"token operator\">?</span> <span class=\"token operator\">-</span>scrollSpeed <span class=\"token punctuation\">:</span> scrollSpeed<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>currentFrame<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>currentFrame <span class=\"token operator\">=</span> <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>step<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scrollDirection <span class=\"token operator\">=</span> Direction<span class=\"token punctuation\">.</span>None<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scrollDistance <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>currentFrame<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">cancelAnimationFrame</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>currentFrame<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>currentFrame <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function-variable function\">step</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>currentFrame <span class=\"token operator\">=</span> <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>step<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      window<span class=\"token punctuation\">.</span><span class=\"token function\">scrollBy</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scrollDistance<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ...</span></code></pre></div>\n<p>다시 최종 결과를 비교해서 확인해 보자.(참고로 내가 좋아하는 두 웹툰이다.)<br>\n<a href=\"https://comic.naver.com/webtoon/detail.nhn?titleId=183559&#x26;no=470\">네이버 만화, 신의 탑</a> vs <a href=\"https://page.kakao.com/viewer?productId=50896822\">카카오페이지, 나 혼자만 레벨업</a></p>","fields":{"slug":"/dev/smooth-key-scroll/"},"frontmatter":{"date":"2020/03/01","title":"smooth key scroll 구현하기","description":"키보드를 이용해 부드러운 스크롤 동작시키기","tags":["scroll"]}}},{"node":{"excerpt":"과학 vs…","html":"<h3>과학 vs 공학</h3>\n<p>과학과 공학의 차이는 무엇일까. 개인적으로 구분을 하자면 과학은 기술 자체에만 의미를 둔다. 하지만 공학은 효율을 고려한다. 기술 뿐 아니라 비용, 시간 등의 다른 것들도 함께 고려해 효율성을 기준으로 하는 것이다.<br>\n그렇다면 내가 하는 일은 어디에 가까울까? 아마 당연히도 공학일 것이다. 심지어 전공도 ‘컴퓨터 공학’이니 말이다.<br>\n이전 회사에서 일 할 때 였다. 개발자들은 습성상 하나에 꽂히면 파고든다. 헤어나오지 못한다고 할까. 그런 상황에서  누군가 하는(팀장급의 리더였다) 말이 스쳐 지나갔다. “우리가 하는 일은 과학이 아니라 공학이잖아요” 정확하진 않지만 이런 말이었다. 동의는 한다. 비지니스에서는 고려해야 할 것들이 좀 더 다양하니까.<br>\n하지만 문제는 정도의 차이다. 어디까지 허용하고 어디까지 양보해야 할까. 아직도 일을 하다보면 고민되는 경우가 종종있다. 가끔은 그 조금의 양보로 인해 더 큰 부수효과가 생길 때도 있다. 말 그대로 지금은 괜찮았던 것들이 이후에 예상치 못했던 문제가 되고 그 처리가 더 복잡해지는 경우다. 예측을 할 수 없으니 어쩔 수 있을까 싶은 생각도 이해는 된다. 그렇다고 한 가지에 매달려 파고드는 것도 크게 보면 효율성을 떨어뜨리는 일이 될 수도 있다.<br>\n하지만 난 아직도 조금은 더 과학을 추구하고 싶다. 과학이 빠진다면 공학도 유지될 순 없을테니까. 물론 공학을 하면서 말이다.</p>\n<h3>부정적인 생각이 늘면, 지쳐가고 있다는 증거다.</h3>\n<p>최근 들어 투덜이가 되어가고 있다는 생각이 들었다. 언제부턴지는 모르겠지만 평소라면 그냥 지나갔을 작은 일들에도 불만을 갖는 것이다.<br>\n왜일까,,, 생각해보니 이번이 처음은 아닌 것 같았다.<br>\n곰곰히 생각해보니 지쳐가고 있던 것 같다. 여러가지 이유로 몸도 마음도.<br>\n그래도 이번엔 다행스럽게 모처럼 휴가를 갖게 됐다. 아쉽게 계획했던 휴가는 못 보냈지만 그래도 적절한 타이밍에 쉬어 가는 것 같다.</p>\n<h3>답은 내 안에 있다.</h3>\n<p>모처럼 휴가에 추천을 받았던 심리상담을 신청했다. 어떤 느낌일까 궁금했는데 결과적으로 그냥 내 말만 하고 온 것 같다. 짧았지만 하지 못했던 말들을 그냥 하다보니 정리가 되는 느낌도 들었다. 사실 상담 받을 때는 이게 무슨 상담인가 싶기도 하고 전문가가 맞는건지 의구심이 계속 들었다.(물론 아직도 조금은…) 하지만 어쨋든 다른 곳에서 하지 못하는 내 얘기를 누군가에게 털어 놓으면서 그 과정에서 정리가 되어 가는 것 같았다.<br>\n따지고 보면 나만큼 나에 대해 잘 아는 사람은 없다. 결국 내가 나를 잘 살피다 보면 답은 내 안에 들어 있을 것 같았다. 아직은 확실히 모르겠지만 생각보다 이런 시간도 나쁘지는 않은 것 같다.</p>\n<h3>배려</h3>\n<p>내가 좋아하는 <code>어라운드</code>를 보다가 발견한 글이다. 나에게도 내 주변의 누군가들에게도 해당되는 말인 것 같았다.</p>\n<blockquote>\n<p>배려와 소심의 한끗차이..<br>\n배려와 바보의 한끗차이..<br>\n배려와 무시의 한끗차이..<br>\n배려와 무능의 한끗차이..</p>\n</blockquote>","fields":{"slug":"/life/several-thought2/"},"frontmatter":{"date":"2020/02/16","title":"생각의 단편들(2)","description":"모처럼 휴가 중에 떠오른 생각들","tags":["nukeguys"]}}},{"node":{"excerpt":"…","html":"<p>두 명의 사건 용의자가 체포되어 서로 다른 취조실에서 격리되어 심문을 받고 있다. 이들에게 자백여부에 따라 다음의 선택이 가능하다. 당신이라면 어떤 선택을 하겠는가?</p>\n<ul>\n<li>둘 중 하나가 배신하여 죄를 자백하면 자백한 사람은 즉시 풀어주고 나머지 한 명이 10년을 복역해야 한다.</li>\n<li>둘 모두 서로를 배신하여 죄를 자백하면 둘 모두 5년을 복역한다.</li>\n<li>둘 모두 죄를 자백하지 않으면 둘 모두 6개월을 복역한다.</li>\n</ul>\n<p>형식을 조금 변경해서 게임으로 변형해보자. 두 명의 플레이어가 있다. 둘 다 침묵을 선택하면 각 3점씩, 한 명이 배신을 하면 배신한 사람만 5점, 둘 다 배신을 하면 각 1점씩 주어진다. 이 게임을 반복적으로 계속 했을 때 높은 점수를 얻기 위해 취할 수 있는 전략이 무엇일까? </p>\n<p>위의 내용은 알만한 사람은 누구나 다 아는 <a href=\"https://ko.wikipedia.org/wiki/%EC%A3%84%EC%88%98%EC%9D%98_%EB%94%9C%EB%A0%88%EB%A7%88\">죄수의 딜레마</a>이다.\n그리고 이 죄수의 딜레마를 반복적인 게임으로 변형 했을 때 가장 강력한 전략 중의 하나가 바로 <a href=\"https://ko.wikipedia.org/wiki/%ED%8C%83%ED%8F%AC%ED%83%AF\">tic-for-tat</a>이다.</p>\n<p>구체적인 내용은 복잡하지만 간단히 정리하면, 시작은 침묵(신뢰)이다. 그리고 처음 상대의 결과에 따라 나도 대응한다. 즉 상대가 침묵을 했다면 다음엔 나도 침묵을, 상대가 배반을 했다면 다음엔 나도 배반을 선택한다. 이는 단순하지만 다른 더 복잡한 전략들보다 훨씬 뛰어난 결과를 보였다.</p>\n<p>죄수의 딜레마란 결국 두 사람의 상호 신뢰에 따른 개인의 이익과 관련이 있다. 하지만 또 이렇게 단순하지만도 않다. 자유주의 시장경제에 반하는 입장에서 정부의 존재 이유를 정당화하는 이론적 근거의 하나로도 사용되고 있다고 한다.\n그리고 간단하지만 강력한 <code>tic-for-tat</code> 전략도 마찬가지로 단순 게임에서만 유용한 전략이 아니다. </p>\n<p>난 이 전략을 인간관계에서 활용한다. 정확히는 자연스럽게 활용하고 있었다는 말이 맞는 것 같다. 누구나 그렇겠지만 난 사람들에 대한 호불호가 개인적인 기준으로 쉽게 갈리는 편이다. 그리고 기준의 울타리 안으로 들어온 사람과 그렇지 않은 사람에 대한 대우는 첨예하게 다르다. 하지만 낯선 사람들을 만나다보면 나중에 이 사람과 어떤 관계가 될 지는 알 수 없다. 하지만 그렇기 때문에 한 사람 한 사람이 중요하다. 자칫 어떤 인연을 흘려 보낼 수도 있기 때문이다. 이 때 tic-for-tat이 적용되는 것이다. 일단 울타리 안으로 분류한 후에 시간이 흐른다. 그리고 상대에 따라 나도 맞춰진다. 결과적으로 남아있든 나가든 정리가 된다. 심플하다. (물론 실제는 더 많은 상황과 경우들이 있기 때문에 단정짓기는 힘들다.) 또 이와 유사한 것이 각종 종교나 철학에 나오는 바로 <code>황금률</code>이다. 가장 익숙한 말을 들어보자면 기독교의 ‘남에게 대접을 받고자 하는 대로 너희도 남에게 대접하라’가 있다. 그리고 이전글 내용과도 어느정도 통하는 부분이다.</p>\n<p>갑자기 <code>tic-for-tac</code>을 떠올리게 된 건 최근의 경험 때문이다.<br>\n짧지 않은 시간 알고 지냈던 누군가를 함께 만났다. 대화가 이어지지만 들리는 그의 말에는 혼자만 힘들어 알아달라는 어리광, 한 편으로 상대적으로 뛰어난 점은 과감히 드러내며 일반적으로 뭉뚱그려 그 조건에 못한 사람을 무시한다. 함께 있는 사람에 대한 배려가 없다. 같은 생각이 든 사람과 눈이 마주쳤다. 서로 그냥 웃어버렸다. 한 번이라면 그저 웃고 지나가지만, 어린 아이가 아닌 이상 반복이 되면 듣는 것도 지친다. 이러다 보니 이제 그만 정리 해야하나 싶었다.</p>\n<p>관계란 밖에서 안으로 들어오는 경우는 좋으면 좋았지 나쁠게 없다. 하지만 이처럼 반대로 안에서 밖으로 나가려는 경우에는 뭔가 썩 좋지 않은게 사실이다. 이럴 땐 많은 생각이 든다.\n남들은 웃고 넘기는데 내가 민감한 건지, 왜 그렇게 변했을까 혹은 원래 모습일까. 그것도 아니라면 내가 변했기 때문에 상대적으로 그렇게 느껴질까. 관계를 한 쪽의 일방적인 역할이나 책임으로 돌릴 수는 없는 것이기 때문이다.<br>\n그리고 평소의 나에 대해서도 다시 한 번 생각하게 된다. 그리고 반성을 한다. 하지 않아야지 했던 다짐들이 무색했던 순간들, 알게 모르게 던져버린 말 들. 피해주지 않고 살고 싶지만 생각만큼 쉽지 않은 것 같다. 혹시라도 피해자가 되었던 분들에게 사과를 드린다.</p>","fields":{"slug":"/life/tic-for-tat/"},"frontmatter":{"date":"2020/02/09","title":"tic-for-tac","description":"게임이론을 따르는 인간관계 전략","tags":["tic-for-tat","게임이론","인간관계"]}}},{"node":{"excerpt":"…","html":"<p>한 때 열심히 봤던 미스 함무라비의 원작을 쓴 문유석 판사의 책이다. 제목만 봤을 때는 어떤 내용일까 싶었는데 읽다보니 비슷한 생각들로 공감도 많이 했다. 자신의 이야기를 시작으로 주변 사람들, 더 나아가 우리 사회의 현재와 다른 국가의 모습들을 통해 성숙한 사회의 지향점을 제시하기도 한다. 하지만 그렇다고 정치적이라거나 자신의 생각을 강요하는 느낌은 전혀 들지 않았다.</p>\n<p>시작은 판사 자신의 <code>개인주의</code>에 대해 털어 놓는다. 둘레길 입구까지 갔다가 등산복 차림의 무리를 보고 발길을 돌리거나, “사랑합니다, 고객님” 하는 114 교환원에게 “왜요?” 라고 답하는 인간 혐오증에 가까울 정도로 사람들과 함께 있는 것을 싫어하지만 결국 사회속에서 함께 살아가는 이상 무수한 ‘그럼에도 불구하고’가 발생할 수 밖에 없다. 그렇기 때문에 오히려 더 스스로의 자유를 확보하기 위해서 어쩔 수 없이 양보와 타협을 하고, 괜찮은 척을 해야 하는데 심지어 본인은 그런 일을 잘 해내고 있다고 한다. 하지만 마음속 구석에 쌓인 것들을 토해내고 싶을 때도 있다고 한다. 우리가 보통 말하는 어른이라느니, 사회생활이라는 것과 비슷하구나 하는 생각이 들었다. 하고싶은 대로만 살 수 없기 때문에, 아니 오히려 편하게 살기 위해서라도 마음 한구석의 불편함을 감수하고 어울려 살아가는 것 말이다.</p>\n<p>작가는 사회를 스타워즈에 나오는 서로 다른 별에서 온 외계인들이 북적대는 술집에 비유한다. 즉 서로 다른 환경에서 다른 경험을 갖고 살아온 사람들에게 모두 같은 생각을 강요할 수 없다. 결과적으로 서로 다른다는 것만 알게 되고 그 차이를 이해하는 것 밖에는 할 수 없는 것이다. 작가도 말하지만 다르다는 것은 불편하다. 하지만 공존을 위해 타협하고 불편함을 참아주는 <code>톨레랑스</code>가 필요하다. 나 또한 다른 것을 많이 불편해 하는 편이다. 그게 사람이든 무엇이든. 하지만 친해지거나 익숙해 지지는 못하더라도 큰 피해만 받지 않는다면 이해하려 노력한다. 이게 바로 내가 생각하는 <code>다양성</code>이다. ‘네 이웃을 사랑하라’는 말은 예수님, 부처님 정도 되니까 할 수 있지 않을까 생각한다.</p>\n<p>나도 <code>개인주의</code>를 지향한다. 하지만 일반적으로 생각하는 나 자신만을 생각하는 그런 개인주의가 아니다. 내가 손해 보지 않는 선에서 어느정도 희생을 감수하고 살아간다. 그로 인해 내 자유를 보장 받는 것이다. 개인인 나 자신이 중요하지만 우리가 사는 세상은 이 개인과 개인이 함께 살아가는 곳이고 결국 관계로 이루어져 있다. 결국 개인이 중요하다는 말에는 나 뿐 아니라 타인도 포함이 된다. 그렇다면 이것이 개인주의인가 하는 의문이 들 수도 있다.\n위에서도 언급했지만 개인주의자로 살다보면 왜 나와 다른 타인을 존중해야 하는지, 왜 내가 양보하고 내 자유를 자제하며, 타인과 타협하고 연대해야 하는지. 이런 무수한 고민을 하게 되는데 결국은 내가 행복하기 위해서라고 말한다. 인간은 사회적 동물이며 타인은 생존과 번식을 위한 유용한 자원이고, 그렇기 때문에 그런 고민들은 행복이라는 목적을 이루기 위한 방편이라는 것이다. 하지만 개인의 행복을 위한 도구인 집단이 거꾸로 개인의 행복의 잣대가 되어버리는 순간 비극이 시작된다. 집단 내의 서열이나 타인과의 비교가 행복의 기준인 사회에서는 개인의 행복을 찾기가 어려워 진다는 것이다.</p>\n<p>한강의 기적을 일으키고, 민주화를 성취한 전 세계에서 몇 안되는 나라이며 따지고 보면 더 살기 좋은 곳은 열몇 곳 밖에 없는 대한민국에서 사람들은 점점 더 행복을 찾기가 어려워지고 있고 그 원인은 전근대적인 집단주의 문화이며, 따라서 근대적 의미의 <code>합리적 개인주의</code>가 필요하다고 한다.<br>\n책에도 나오고 나도 오래 전부터 든 생각이지만 우리나라의 조직들은 군대문화를 기반으로 형성되어 있다. 그리고 주변에서 나이가 좀 있으신 분들에게 종종 듯는 박정희 시대의 찬양이나 새마을 운동. 한강의 기적의 근간이 된 제조업 기반의 사회 구조나 문화. 분명 그 시대에는 효과적이었고 도움이 되었을 것이다. 그리고 결과적으로도 성공적이었던 것들이다. 하지만 시간은 흐르고 세상도 변한다. 결과에 대한 공로는 충분히 인정하지만 이제는 변해야 하는 것이다. 내 기억에 어릴 때는 이기주와 더불어 나 혼자만 생각하는 서구의 개인주의는 지양해야 한다고 배웠다. 하지만 이는 개인주의를 잘못 이해하고 해석한 결과라고 본다. 다른 사람에게 해를 끼치지 않으면서 내 행복을 추구하고 극대화 하려는 노력이 무슨 잘못인가 말이다. 우리는 히어로에 열광한다. 하지만 내가 항상 하는 말 처럼 세상에 정답은 없고 완벽한 사람은 없다. 즉 그런 히어로는 세상에 없다. 하지만 그래서 우리는 더 열광하는 것이고, 때문에 이런 개인의 불완전성과 비합리성을 고려하고 이해하는 합리적인 자세가 더욱 필요한 것이다.</p>\n<p>작가는 <code>집단주의 문화</code>에서 비롯한 <code>수직적 가치관</code>이 우리를 ‘더’ 불행하게 만든다고 한다. 즉 구성원들이 추구하는 가치가 획일화 되어 줄세우기를 통해 행복을 평가하는 것이다. 그 논리에서는 완전히 행복할 수 있는 사람은 있을 수 없고, 이런 경쟁의 피라미드 상층부에 있는 사람들도 이로부터 자유롭지는 못하다는게 내 기준에서는 사회의 상류층에 속하는 작가의 관찰 결과라고 한다. 주위에서 이런 말을 들을 때가 있다. 그저 ‘남들 처럼 평범하게 살고 싶다’ 라든지 바라는 것 없이 ‘나와 비슷한 환경이나 조건의 사람을 만나고 싶다’ 라든지. 물론 어떤 다른 의도가 담긴 건 아니겠지만 우리의 무의식 속의 기준으로 서로의 비교와 차이가 자리잡고 있는게 아닌가 하는 생각이 들었다. 물론 아래를 보고 현재에 만족하고 살라는 그런 단순한 이야기를 하는 것은 아니다. 작가도 말하지만, 그저 우리가 더 행복해질 수 있음에도 그렇지 못한 이유는 우리 스스로 자승자박하고 있기 때문이 아닌가 하는 것이다.</p>\n<p>그렇다면 <code>행복</code>해지기 위해선 어떻게 해야할까? 책에서는 심리학자인 서은국 교수의 말을 인용하는데, 행복감이란 뇌에서 느끼는 쾌감으로 인간이 행복감을 가장 많이 느끼는 원천은 인간이며 행복은 기쁨의 강도가 아니라 빈도라고 한다. 위의 내용과 연결지어 보면 수직적 가치에 따라 비교를 통한 행복은 달성하더라도 무한하지 않다. 다시 또 계속 위로 올라가기 위해 계속해서 집착하게 될 뿐이다. 그렇기에 더더욱 획일화된 가치관을 버리고 다양성을 존중하는 것이 사회 전반적으로 행복해지는 방법이라고 본다. 나를 포함해 주변에서 종종듣는 북유럽에 대한 동경(?) 같은 것이 있다. 실제 유엔 발표에서도 행복지수가 높은 나라들의 대부분이 포함되어 있기도 하다. 세계 초강국인 미국 조차 10위 안에 들지 못하고 있는데 말이다. 그런데 그 이유가 개인주의적 문화 때문이라는 것이다. <code>자유와 타인에 대한 신뢰</code>, <code>다양한 재능과 관심에 대한 존중</code>. 이런 것들이 행복의 원동력이 된다고 한다. 집단주의가 문제가 되는 이유는 그 관계에서 강요나 의무, 복종 같은 것이 생기고 이로 인해 개인의 자유를 박탈 당하기 때문에 오히려 불행의 원천으로 작용하기 때문이다.\n나에겐 좀 아쉬운 내용이긴 하지만 연구 결과에 따르면 내향적인 사람보다 외향적인고 사회성이 뛰어난 사람이 행복해지기 쉽다고 한다. 물론 내향적인 사람도 관계에서 만족감을 느끼고 행복을 경험한다. 단지 조금의 거리가 더 필요할 뿐이다. 누구나 다양성 속에서 얼마든지 존중을 받고 충분히 행복할 수 있다.</p>\n<p>우리 사회가 더 행복해지고 발전하기 위해서는 좌우 자판기를 철거해야 한다고 한다. 즉 이념을 통해 좌우를 구분하고 진영 논리로 단순화 시키는 것은 아무런 도움이 되지 않는 다는 것이다. 이념 또한 결국 인간의 행복을 위한 수단이 불과 하기 때문에 어느 한 쪽으로 치우져서는 안되며 구성원들의 자유와 평등의 가치 공유를 위해 <code>끊임없는 대화와 토론</code>이 필요하다고 말한다. 물론 우리 각 개인 또한 관심을 가지고 함께 고민을 해야 한다.</p>\n<p>작가는 또한 <code>강한 책임을 기꺼이 질 수 있는 가치관</code>을 배양해야 한다고 한다. 위에서 말했듯이 개인은 완벽하지 않으며 그렇기 때문에 실수를 한다. 그리고 우리 사회는 시도하고 실질적인 일을 만들어 내는 창작자보다 남의 잘잘못을 지적하고 평가하는 평론가가 많다고 말한다. 비평할 논리는 얼마든지 있는데, 본질적인 해결이 아니라거나 구조적인 문제를 일부만 건드리는 것은 의미가 없다거나 한계를 벗어나지 못했다거나…하는 결과론 적인 말로 노력하는 남을 냉소함으로써 자신을 위로한다는 것이다. 나 또한 반성을 하게 되는 내용이었다. 어차피 세상은 바뀌지 않는 다는 냉소로 핑계를 대고 아무것도 하지 않는 것이 더 큰 잘못이다. 우리가 영화에 나오는 그런 히어로는 될 수 없지만, 현실 속에서의 히어로들은 종종 보고 들을 수 있다. 영화와 마찬가지로 이들은 위기 속에서 모습을 들어내고 실수와 남들의 비판을 감내하면서 그로 인한 책임을 기꺼이 지는 사람들일 것이다.</p>\n<p>작가는 서두에 책에 담은 이런 생각들도 결국 개인이 아닌 사회에 관한 것들이며, 개인주의자 본인이 바라본 세상의 여러 얼굴들이라고 언급하면서 한 마디로 요약한다. “누구나 자기 몫의 아픔은 안고 살고 있더라”는 것이다. 그리고 보편적이지는 않지만 자신과 비슷한 생각을 가진 꽤 많은 사람들이 있을 것이라고. (나도 그 중에 한 명에 포함되지 않을까 하는 생각을 잠시 해봤다.)<br>\n인류은 갈수록 더 행복을 추구하지만 그만큼 사는게 더 힘든 세상인 것 같다. 그럴수록 서로에게 관심을 갖고 기댈 곳이 되어 위로가 되는 존재가 되어야하지 않을까하는 생각이 든다.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 50%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div><iframe src=\"https://www.youtube.com/embed/coiOZVNrToQ\" style=\" position: absolute; top: 0; left: 0; width: 100%; height: 100%; \"></iframe></div> </div></p>","fields":{"slug":"/book/individualist-9788954637756/"},"frontmatter":{"date":"2020/02/02","title":"개인주의자 선언","description":"합리적 개인주의자가 바라보는 세상","tags":["book","문유석"]}}},{"node":{"excerpt":"…","html":"<p>지난 주 늦은 회고를 하고(하지만 지난 해의 목표를 정한 시기나 구정을 기준으로 생각하면 적절한 타이밍이었다고 생각한다.) 간만에 여유로운 설 연휴에 역시나 이런저런 생각들을 하면서 올해도 새로운 목표를 정해보자 싶어 간단히 정리해본다.</p>\n<p>첫 번째로는 운동이다. 별것 아닌 듯 싶지만 운동을 꾸준히 할 때와 아닐 때는 컨디션 뿐 아니라 많은 것들이 다른 느낌이다. 그래서 운동은 어쨋든 계속 해 나가야 한다. 클라이밍 처럼 중간에 새로운 운동에 빠질 진 모르겠으나 일단은 하던대로 마라톤과 클라이밍이 목표다. 마라톤은 처음 만큼 열심히 하고 있지 못하지만 그래도 여유가 생길 때 마다 계속 참여를 해 볼 생각이다. 작년과 동일하게 올해도 10km 4회 그리고 클라이밍은 정기 강습을 계속 들으면서 대회 참가하기. 클라이밍이라는게 레벨이라는게 있긴 하지만 딱히 내가 얼만큼이다라고 명확히는 알 수 없어서 아마추어 대회에 한 번 나가보고 싶다.</p>\n<p>그리고 블로그와 독서. 아직 습관처럼 자리 잡지는 못했지만 글을 쓰는 것도 나름대로의 재미가 있다. 물론 할 얘기나 쓸 내용이 있을 때긴 하지만, 언젠가 내 책 한권 쓸 때를 기약하면서 꾸준히 써 볼 생각이다. 더불어 항상 실패했던 월 1권 독서도 다시 도전해 본다. 사실 정해진 목표 달성 보다는 습관으로 만들고 싶은 두 가지다. </p>\n<p>추가로 항상 실패 했던 개발 공부. 일 때문에 하긴 하지만 그 외에는 전혀 시도 조차 하지 못했기 때문에, 이번엔 좀 더 구체적으로 목표를 잡고 난이도를 낮춰서 해볼까 한다. 그래서 개발 책 2권 이상 완독하기를 생각해봤다. 작년에도 몇 번 시작을 했지만 결과적으로 완독하고 책장을 덮은 책은 없다. 조금 부담을 낮추고 시작해볼까 한다.</p>\n<p>새로운 목표로는 여행 그리고 전혀 새로운 분야의 도전 또는 경험이다. 여행의 필요성을 알긴 하지만 막상 시간이 주어지면 뭘 할지 몰라 그냥 흘려 보내게 된다. 언제까지 가능할 지는 모르겠지만 이제라도 시간이 허락하는 한 여행을 다녀볼까한다. 가까운 국내부터 해외까지. 얼마나 어떻게 가야할 지는 아직 모르겠다. 구체적인건 차차 생각하도록 하고 일단 다음달 제주도부터 시작이다. 그리고 새로운 뭔가의 경험. 새로운 것들은 하기 전까지는 두렵기도 설레기도 하지만 막상 겪어보면 별 것 아닌, 하지만 하길 잘했다는 생각이 든다.(물론 항상은 아닐 수 있지만) 올해도 생각지 못했던 새로운 사람들과 새로운 경험들을 할 기회를 만들어 봐야 겠다.</p>","fields":{"slug":"/life/2020-as-what-i-say/"},"frontmatter":{"date":"2020/01/26","title":"2020년 새해 목표","description":"목표를 세웠으면 남은 건 행동이다.","tags":["2020","목표","새해다짐","작심삼일"]}}},{"node":{"excerpt":"2020년이 시작되고 1월도 절반이 넘게 지났지만 이제서야 미뤄뒀던 2019년 회고를 작성해 본다. 2019년 목표 달성 작년…","html":"<p>2020년이 시작되고 1월도 절반이 넘게 지났지만 이제서야 미뤄뒀던 2019년 회고를 작성해 본다.</p>\n<h2>2019년 목표 달성</h2>\n<p>작년 2월, 그 때도 뒤 늦은 새해 목표를 세웠었다. 사실 이전 같았다면 목표만 세우고 흘러갔기 때문에 확인 할 필요 조차 없었지만 이번엔 나름 노오력이란 것을 했기 때문에 결과를 한 번 정리해 본다.</p>\n<blockquote>\n<p><strong>2019 목표</strong><br>\n이사<br>\n운동 - 10km 마라톤 2회, 한라산 등반, 지속적인 운동<br>\n공부 - 주1회 블로그 포스팅, 월 1권 독서, 개발 공부<br>\n기타 - 취미 1개, 카카오페이지 월 1작품 보기, vim 익히기</p>\n</blockquote>\n<p><strong><em>이사</em></strong><br>\n당연히 할 수 밖에 없는 일이었다. 조금 급하게 준비한 감이 있지만 위치 상으로는 너무나 만족스러운 곳에 살고 있다. 아쉬운 점이 있다면 조금 더 깔끔한 곳을 구했으면 좋았겠다는 것이다.</p>\n<p><strong><em>운동</em></strong><br>\n마라톤은 3/4/5/11월 총 4번의 대회에 참가했다. 꾸준히 하지 못해 목표로 했던 기록은 얻지 못했지만 마라톤에 흥미를 가지게 되어 만족스럽다. 새해에도 꾸준히 참여해 볼 생각이다.<br>\n한라산 등반, 완전한 실패다. 한라산은 커녕 제주도 땅을 밟지도 못했다.(왠지 이럴 것 같은 예감이 들었다…)<br>\n운동은 초반엔 헬스, 그리고 마라톤에 이어 클라이밍까지 꾸준히 해왔다. 개인적으로 잘 맞는 운동을 시작하고 즐길 수 있어 너무 좋다.</p>\n<p><strong><em>공부</em></strong><br>\n주1회 포스팅은,,, 절반 정도의 성공인 것 같다. 이렇게 아직까지 하고 있는 것 만으로도 이전에 비하면 만족스럽지만 애초의 목표였던 주1회 포스팅은 실패다. 블로그를 다시 시작하고 2019년 총 27개의 글을 작성했다. 목표를 위해 함께 하는 사람들이 있다는게 너무나도 큰 도움이 된다. 블로그도 블로그지만 무엇보다 참 기분좋은 일이다.<br>\n월 1권 독서, 얼마나 읽었을까… 완독은 하지 못한 책들을 포함해도 대략 10권 정도밖에 되지 않는다. 올해는 좀 더 노력해보자.\n개발 공부는 사실 거의 못했다. 일과 관련된 분야는 어쨋든 계속 하게 되지만 그외는 전혀 없었던 것 같다. 항상 이게 가장 어렵다. 뭔가 방법을 찾아야 한다.</p>\n<p><strong><em>기타</em></strong><br>\n취미, 운동에도 포함되었지만 클라이밍이 새로운 취미로 자리 잡았다. 그리고 뒤늦게 몰트 위스키에 관심이 생겼다는 것. 아직 취미라고 할 정도 까지는 아니지만 뭔가 새로운 분야에 대해 관심을 갖고 조금씩 알아가고 있다.<br>\n페이지 월 1작품 보기, 작품 구분은 무의미 한 것 같다. 달빛조각사를 시작으로 웹툰에 영상까지 포함하면 애초에 의도했던 개밥먹기는 충분히 달성했다.<br>\nvim 익히기, vi를 자주 사용하는 편이 아니다 보니 쉽지 않다. vi를 익혀서 키보드를 바꿔보려던 생각이었으나 아직도 적응하지 못했다. 좀 더 자주 사용할 계기를 만들어 봐야겠다.</p>\n<p>전체적인 달성도 만으로도 개인적으로 후회스럽지 않을 정도는 된 것 같다. 물론 조금 더라는 아쉬움은 많이 남는다. 하지만 무엇보다 목표만 세우고 흘러갔던 이전에 비해 작지만 지속적인 노력을 해왔다는 것이 나에겐 많은 변화였다. 많은 의미에서 새로운 시작이었던 만큼 개인적으로는 보람있는 한 해 였다.</p>\n<p>새해의 목표는 아직 생각해 볼 여유가 없었기 때문에, 다시 시간을 갖고 정리해 볼 예정이다.</p>\n<h2>그리고 회고</h2>\n<p>지금까지 살면서 최악이구나를 처음으로 느꼈던 해가 2018년이었다. 그래서 2019년은 개인적으로 다시 시작의 느낌을 가진 해였다. 그래서 더 열심히 하고 싶었는지도 모르겠다. 떠오르는 기억들로 한 해를 정리해 본다.</p>\n<p>무엇보다 좋은 사람들을 많이 만났다. 지금은 그만두었지만 연초부터 참가한 스터디로 많은 사람들을 만났고, 덕분에 여러모로 좋은 계기들이 생겼다. 회사에서도 주변에 좋은 영향을 주는 사람들과 함께하고 있다. 뭐든지 사람이 가장 중요하다고 생각하는 입장에서 이 부분에서는 너무나 만족스러운 한 해였다. 이 사람들이 올해는 더욱더 행복해지길 바래본다.</p>\n<p>블로그, 마라톤, 그리고 클라이밍을 비롯한 다른 여러가지 새로운 경험들을 할 수 있었다. 모두 혼자선 시작하거나 겪어보지 못했을 것들이다. 아직은 조금 부족한 느낌이긴 하지만 그래도 실행을 하고 계속할 수 있다는게, 그리고 함께할 누군가 있다는게 참으로 감사한 일이다.</p>\n<p>걱정이 많았던 것 중 하나다. 회사를 옮기면서 전혀 해보지도 않았고 할거라도 생각지 못했던 일을 하고있다. 하지만 배운 것도 많고 나름 재미나게 즐기고 있다. 이제 발을 담근지 1년이라 갈 길도 멀고 새로운 것들 투성이긴 하지만 하나하나 알아가고 만들어 가는 재미는 무엇이든 동일한 것 같다. 커리어 따위 생각하지 않고 닥치는대로 살아왔고 지금도 그렇기 때문에 언제 또 어떤걸 하고 있을지는 모르겠지만 하는 동안은 열심히 재미나게 해 볼 생각이다.</p>\n<p>조금 아쉬움이 있다면 2019년을 시작할 때는 남다른 마음가짐이었던 것 같은데 역시나 시간이 지나면서 초심을 유지하기란 쉽지 않았다. 일이 워낙 바쁘다 보니 조금 지친 것도 핑계라면 핑계다. 어느정도 정리되면 조금 쉬어가는 시간을 갖고 다시 열심히 살아보자.</p>\n<p>개인적으로 오랫동안 풀지 못한 숙제가 하나있다. 풀고 싶지 않은 마음도 크다. 혼자 풀 수 있는 것도 아니다 보니 더더욱 쉽지 않다. 엎친데 덮친 격으로 새해가 되면서 풀기는 커녕 더 어려워 지고 말았다. 당분간은 별로 쳐다보고 싶지도 노력을 하고 싶지도 않다. 일단은 별다른 노력없이 그대로 둘 생각이다.</p>\n<p>올해는 작년과는 또 다른 시작의 느낌이다. 어딘가 불안하면서도 좋은 예감이 함께 든달까. 어쨋든 다시 시작이다.</p>","fields":{"slug":"/life/goodbye-2019/"},"frontmatter":{"date":"2020/01/18","title":"때 늦은 2019 회고","description":"나이 먹는 건 싫지만 새로움은 좋다.","tags":["2019","retrospect","review 2019"]}}},{"node":{"excerpt":"일정을 맞추기 위해 일부 웹페이지에 외부의 도움을 받기로 했다. 프로젝트를 공유해서 작업하는 방식이 아닌 별도의 웹페이지를 제작하면 현재 프로젝트의 특정 화면에 html…","html":"<p>일정을 맞추기 위해 일부 웹페이지에 외부의 도움을 받기로 했다. 프로젝트를 공유해서 작업하는 방식이 아닌 별도의 웹페이지를 제작하면 현재 프로젝트의 특정 화면에 html을 그대로 삽입해서 보여주는 방식이다. 이를 처리하는 과정에서 직면한 문제와 돌고돌아 생각보다 간단하게 해결만 방법을 정리해본다.</p>\n<p>추가해야 할 페이지(outer_html)는 이미 알고 있다고 하면 현재 페이지의 하나의 탭 화면으로 추가해야 한다면 어떻게 해야 할까.</p>\n<p>첫 번째 구현방식은 <a href=\"https://developer.mozilla.org/ko/docs/Web/Web_Components/Using_shadow_DOM\">shadow DOM</a>을 사용하는 것이었다.\b <code>shadow DOM</code>은 간단히 DOM안에 포함되어 있지만 캡슐화 된 DOM이라고 할 수 있다. 예를 들어 다른 누군가가 만든 컴포넌트 또는 코드를 가져다 사용한다고 하면 겹침이 발생할 가능성이 있다. 이럴 때 class명에 prefix를 지정한다거나 하는 방식으로 가능하겠지만 shadow DOM을 사용하면 해당 DOM에서 사용된 style은 외부에 영향을 주지 않도록 하면서 자유롭게 작업이 가능하다. 처음 이 방법을 적용했을 때 <code>&#x3C;script></code> 태그의 실행이 되지 않아 별도 처리가 필요했다.(마지막 방식을 적용해면서, 다시 해보면 될 것 같다는 생각을 했다.) 그리고 다음 방법을 적용해봤다.\n아래처럼 React에 shadow DOM을 만들어주는 component를 만들고 필요한 곳에서 가져다 사용하도록 했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token operator\">&lt;</span>ShadowDom html<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>outer_html<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre></div>\n<p>두 번째는 <code>dangerouslySetInnerHTML</code>를 상용해서 코드를 그대로 표시할 DOM하위에 추가하는 것이었다. 물론 위에서 언급한 것 처럼 style의 중첩 등이 발생할 수 있지만 내부에서 진행한데다 크게 문제되지 않을 것 같다는 판단에 간단한 방법으로 처리했다. 위와 비슷한 정도지만 <code>ShadowDom</code> 컴포넌트를 사용하지 않는다는 점이 다르다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token operator\">&lt;</span>div dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> __html<span class=\"token punctuation\">:</span> outer_html <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre></div>\n<p>하지만 여기에도 문제가 하나 있었다. 동일하게 CSR(Client Side Rendering)시에 외부 페이지에 있는 <code>&#x3C;script></code>가 실행되지 않는 것이었다. 하지만 SSR(Server Side Rendering)시에는 정상적으로 실행이 되고 있었다. 원인을 찾다가 알게 된 것들을 정리해 본다. (대부분 보안상의 이유로, 정확한 내용들은 찾아보면 금방 알 수 있다.)</p>\n<blockquote>\n<ol>\n<li>innerHTML로 추가하면 script는 동작하지 않는다.</li>\n<li>script태그에 dangerouslySetInnerHTML로 스크립트를 입력하면 동작하지만, DOM을 추가하면 그 내부의 스크립트는 실행되지 않는다.</li>\n<li>동적으로 추가한 DOM 내부의 script를 수행하려면 <code>createContextualFragment</code>라는 것을 사용하면 된다.</li>\n</ol>\n</blockquote>\n<p>세 번째는 위에서 알게 된 <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Range/createContextualFragment\">createContextualFragment</a>를 사용하는 것이었다. 아직 정확한 내용은 파악하지 못했지만 비슷한 상황에서 사용하면 된다는 <a href=\"https://github.com/facebook/react/issues/8838#issuecomment-348860974\">내용</a>을 보고 적용해 봤다. 리액트에 적용하는 것이어서 마운트 된 이후에 처리되도록 <code>useEffecrt</code>내에서 적용헀다. <code>containerRef</code>는 코드를 추가하기 위해 미리 만들어 둔 element의 reference이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> range <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createRange</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> containerEl <span class=\"token operator\">=</span> containerRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>containerEl<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  range<span class=\"token punctuation\">.</span><span class=\"token function\">selectNode</span><span class=\"token punctuation\">(</span>containerEl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> fragment <span class=\"token operator\">=</span> range<span class=\"token punctuation\">.</span><span class=\"token function\">createContextualFragment</span><span class=\"token punctuation\">(</span>outer_html<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  containerEl<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>fragment<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>web API인데다 사용하는 코드들도 발견했고 호환성도 충분한 듯해서 적용했고 동작도 정상적으로 됐다. 허나 고려하지 못한 부분이 하나 있었다. 외부 코드를 추가하는 페이지를 정적파일을 생성해서 서비스하고 있다는 것이었다. 마운트 된 이후에 DOM을 추가하다보니 SSR시에는 서버에서 빈페이지를 보내는데 이 결과가 정적파일로 만들어지고 있기 때문에 굳이 정적파일로 서비스하는 의미가 없어진 것이다. 그래서 SSR과 CSR을 구분해서 처리할 필요가 있었다. 그래서 SSR시에는 두 번째 방법을 유지하고 CSR시에는 마운트 이후에 해당 DOM을 제거하고 세 번째 방법으로 새로 추가하는 것이다. 적용하고 동작하는 것은 확인까지 했으나 아직 확실하게 파악하지 못한데다 곧 실서비스가 되어야 하는 상황에 좀 더 안전한 방법을 찾았다.</p>\n<p>마지막으로는 좀 더 간단하게 방법을 찾았다. 문제가 되는 부분은 해당 CSR시 DOM의 <code>&#x3C;script></code>태그가 실행이 되지 되지 않는다는 것이다. (SSR시에는 server에서 이미 DOM에 포함되어 내려오기 때문에 브라우저 입장에서는 원래 있는 \u001d코드와 다르지 않기 때문에 정상적으로 실행되는 것이다.) 그래서 단순히 CSR시에 해당 마운트 된 이후에 DOM에 있는 script를 수동으로 호출해 주면 해결될 수 있었다.(좀 더 복잡한 상황에서는 어떨지 모르겠다.)</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> containerEl <span class=\"token operator\">=</span> containerRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>containerEl<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> scripts <span class=\"token operator\">=</span> containerEl<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'script'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> script <span class=\"token keyword\">of</span> scripts<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">eval</span><span class=\"token punctuation\">(</span>script<span class=\"token punctuation\">.</span>innerHTML<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">...</span>\n<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div\n      ref<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>containerRef<span class=\"token punctuation\">}</span>\n      dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> __html<span class=\"token punctuation\">:</span> outer_html <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>useEffect에서 CSR인 경우에 <code>containerRef</code>의 하위에 있는 script를 찾아서 <code>eval</code>을 호출해 주는 것으로 실행해주는 효과를 본다.(eval 대신 new Function(script)를 실행할 수도 있다.)</p>\n<p>최종적으로 적용해 놓고 보니 생각보다 간단한 방법인데 돌고 돌아 왔다는 생각이 들었다. 물론 삽질로 많이 배우듯이 짧은 시간 그 과정에서 많은걸 알게 되었기 때문에 좋은 경험이었다. 아직 좀 더 다양한 경우와, 정확하게 이해를 하지 못해 부족한 부분이 있을 수도 있겠지만 일단은 동작은 충분했고, 결과는 곧 나올 예정이다.</p>\n<p>어느 덧 2019년이 지나고 2020년도 빠르게 지나고 있다. 하루라도 빨리 2019년의 회고를 작성하고 싶지만 워낙 바쁜데다 급하게 작성하고 싶지 않아, 조금 더 뒤로 미루기로 했다. 어서 프로젝트가 잘 마무리되고 여유가 생겨서 찬찬히 돌아볼 수 있는 시간을 가질 수 있었으면 좋겠다.</p>","fields":{"slug":"/dev/include-outer-html/"},"frontmatter":{"date":"2020/01/06","title":"리액트에 외부에서 만든 웹페이지 삽입하기","description":"외부 웹페이지 로딩 & 자바스크립트 실행하기","tags":["react","js","dangerouslySetInnerHTML","createContextualFragment","eval"]}}},{"node":{"excerpt":"웹 페이지들을 개발하다 보면 외부 라이브러리를 비롯한 여러 js…","html":"<p>웹 페이지들을 개발하다 보면 외부 라이브러리를 비롯한 여러 js파일들을 포함시켜야하는 경우가 많다. 크기가 작은 파일들은 문제가 되지 않을 수도 있지만, 조금이라도 웹의 성능을 높이기 위해서는 목적에 따라 로드하고 실행하는 시점을 다르게 가져가야 할 필요가 있다. 사용 목적에 따라 js 파일을 포함하는 방법을 정리해 본다.</p>\n<h2>1. 최우선으로 로드되어야 하는 경우</h2>\n<p>일반적으로 <code>&#x3C;script></code>태그로 포함된 js파일은 기술된 순서대로 로드가 된다. 문서를 파싱하는 과정에서 script 태그를 만나면 파싱을 멈추고 스크립트를 로드하고 실행한 후에 이어간다. 따라서 그 만큼 지연이 생기된다. 보통 렌더링 보다는 기능적인 부분을 담당하는 경우가 많을 것으로 예상되지만, 경우에 따라 웹페이지 로드보다 우선해서 실행되어야 한다면 이 스크립트는 <code>&#x3C;head></code>내에 정의하면 된다. 아래의 예를 보면 스크립트를 다운로드하고 실행하기 전까지 아래에 있는 내용이 화면에 표시되지 않는다. 즉, 그만큼 사용자에 대한 응답시간이 길어지게 되는 셈이다. 꼭 필요한 상황이 아니라면 다음에 나오는 방식으로 상황에 따라 적절한 지연으로 웹페이지 성능을 올려보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>head<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>script src<span class=\"token operator\">=</span><span class=\"token string\">'https://external_script.js'</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>head<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>body<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>스크립트 실행 후에 보이는 내용<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>body<span class=\"token operator\">></span></code></pre></div>\n<h2>2. 웹 페이지 로드 전까지 지연 시키기</h2>\n<p>고전적인 방식으로 <code>&#x3C;head></code> 대신 <code>&#x3C;body></code>태그의 마지막에 <code>&#x3C;script></code>태그를 추가하게 되면 html 파싱이 완료된 후에 js의 로딩 및 실행이 이뤄진다. 따라서 병목없이 웹 페이지를 해석하고 빠르게 보여주게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>body<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>script src<span class=\"token operator\">=</span><span class=\"token string\">'https://external_script.js'</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>body<span class=\"token operator\">></span></code></pre></div>\n<p>이 방법은 오래됐지만 그 만큼 브라우저 호환 걱정 없이 효과적으로 사용할 수 있다. 굳이 빠르게 로드할 필요가 없는 파일이라면 이렇게만 해도 충분히 효과를 볼 수 있다. 하지만 위의 경우와 반대로 html을 모두 파싱하고 난 후에야 js파일이 로드되기 때문에 사용자와 인터랙션을 담당하는 역할을 하는 등의 스크립트라면 처음 그려지는 것만 빠를 뿐 반응 자체는 동일하게 딜레이가 생기게 된다. 인터넷이 빠른 환경에서는 괜찮지만 그렇지 않은 환경에서는 여전히 문제가 될 수 있다.</p>\n<h2>3. <code>defer</code> 다운은 빠르게 실행은 순서대로</h2>\n<p><code>&#x3C;script></code>태그에 <code>defer</code> 속성을 사용하게 되면 파싱을 멈추지 않고 다운로드와 병행하게 된다. 이후 해석이 완료되고 <code>DOMContentLoaded</code> 이벤트 발생 전에 스크립트를 <code>순서대로</code> 실행한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>head<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'DOMContentLoaded'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"defer 스크립트 실행 후 호출\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>script defer src<span class=\"token operator\">=</span><span class=\"token string\">'https://external_script.js'</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>head<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>body<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>스크립트 실행 전에 보인다<span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>body<span class=\"token operator\">></span></code></pre></div>\n<p>위의 코드에서는 아래 script 태그를 만나도 파싱이 그래도 이어지면서 다운로드를 받고, 파싱이 완료된 후에 스크립트를 실행한다. 그리고 나서 alert가 표시된다.\n만약 스크립트가 두 개 이상 포함된다면 브라우저는 병렬적으로 스크립트를 다운로드 받는다. 그렇게 되면 순서에 상관없이 크기가 작은 스크립트의 다운로드가 먼저 완료된다. 하지만 실행 자체는 기술된 순서대로 이루어 진다. 즉 실행순서에 의존적인 스크립트들을 포함해야 한다면 <code>defer</code>를 사용하면된다. 주의할 점은 defer는 외부 스크립트에만 사용할 수 있다는 점이다.(src 속성이 없는 스크립트에서는 무시된다.)</p>\n<h2>4. <code>async</code> 비동기로 다운 받고 바로 실행</h2>\n<p><code>async</code>속성을 주면 defer와 다르게 순서에 의존적이지 않고 <code>DOMContentLoaded</code> 이벤트와도 서로 의존적이지 않게 의미 그대로 비동기적으로 스크립트를 실행한다. 즉 파싱을 멈추지 않고 다운로드를 진행하고 다운이 완료된 스크립트를 바로 실행한다. 단, 실행하는 동안은 문서의 파싱이 멈추게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>script <span class=\"token keyword\">async</span> src<span class=\"token operator\">=</span><span class=\"token string\">'https://external_script_big.js'</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>script <span class=\"token keyword\">async</span> src<span class=\"token operator\">=</span><span class=\"token string\">'https://external_script_small.js'</span><span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre></div>\n<p>위와 같은 경우에 defer라면 파싱이 모두 끝난 뒤에 <code>external_script_big.js</code>가 먼저 실행되고 이후 <code>external_script_small.js</code>가 실행된다. 하지만 async로 선언된 경우에는 크기가 작은 <code>external_script_small.js</code>가 먼저 다운로드가 끝나면 실행도 먼저 이루어진다.\n따라서 <code>async</code>는 다른 스크립트에 종속적이지 않고 실행 시점을 정확하게 알 필요가 없는 파일의 경우에 유용하게 사용할 수 있다(예를 들면 ga나 광고 같은 경우). 만약 비동기로 로드하되 순서대로 실행하고 싶다면 <code>async=fase(기본값 true)</code>를 사용할 수 있다.\n마찬가지로 외부 스크립트에만 적용된다.\n추가로 동적으로 element를 생성해서 추가하는 경우에는 <code>async</code>가 기본적으로 적용된다. 따라서 순서에 의존적으로 실행되어야 하는 경우에는 <code>async=false</code>를 명시적으로 선언해 주자.</p>\n<p>일반적으로 script가 <code>&#x3C;/body></code>앞에 존재하는 경우라면 <code>async</code>나 <code>defer</code>효과가 크지 않을 수 있다. 그 때 쯤이면 문서의 모든 파싱이 끝난 상태이기 때문에 지연시키는 것이 큰 의미가 없을 수 있기 때문이다. 그러나 head에 모아 두거나 동적으로 추가하는 경우라면 적절하게 지연시킬 필요가 분명히 있다.\n만약 다른 파일에 종속적이지 않고 DOM과 상관없이 실행되어도 괜찮다면 <code>async</code>를, DOM이 관련해 실행순서가 중요하다면 <code>defer</code>를 사용하면된다.<br>\n한 가지 주의할 점은 대부분의 브라우저를 지원하긴 하지만 모든 브라우저에서 지원하지 않는다는 점이다.(역시나 IE가 한 몫 한다)<br>\n만약 async와 defer가 모두 선언되어 있다면, <code>async > defer</code>의 순서로 적용이 된다. 즉 async가 지원되는 브라우저는 async로 동작하고 그렇지 않다면 defer로, 먄약 defer도 지원하지 않으면 동기적으로 스크립트를 실행하게 된다.</p>\n<p><strong>참고</strong><br>\n<a href=\"https://www.growingwiththeweb.com/2014/02/async-vs-defer-attributes.html#script\">async vs defer attributes - Growing with the Web</a><br>\n<a href=\"https://developer.mozilla.org/ko/docs/Web/HTML/Element/script\">&#x3C;script> - HTML: Hypertext Markup Language | MDN</a><br>\n<a href=\"https://javascript.info/script-async-defer\">Scripts: async, defer</a></p>","fields":{"slug":"/dev/import-js-script/"},"frontmatter":{"date":"2019/12/22","title":"웹 페이지에 javascript 포함시키기","description":"외부 js파일을 로드하고 실행하는 여러가지 방법들","tags":["js","<script>","async","defer"]}}},{"node":{"excerpt":"…","html":"<h3>성난 사람들</h3>\n<p>왜인지 사람들이 모두 화가 나 있다. 각기 이유는 다르겠지만 화가 난 상태다.\n집 앞에서 큰소리로 싸우는 파이터들, 길 가다 창 창문을 내리고 뭐라고 내 뱉고 가는 운전자, 그 밖에 오가며 마주치는 많은 사람들이 화가 난 표정으로 지나간다.<br>\n화를 참으면 병이되서 밖으로 뿜어대는 건지, 화도 전염이 되어 점점 퍼져 나가서 그런 건지 모르겠다.\n나도 한 땐 너무 쉽게 뿜어댔고, 또 한 때는 열심히 삭히면서 지냈다. 전자는 주위가 힘들고 그러다 결국 나도 힘들어진다. 후자는 내가 힘들고 그러다 결국 주위에도 영향을 미친다. 어쨋든 화는 풀어야 한다. 단, 건전한 방법으로.<br>\n난 한 땐 코인노래방을 열심히 애용했다.(일명 혼코노) 천원에 2~3곡 열심히 소리를 지르다 보면 좀 가라앉는다. 천원짜리 한 두장이면 되니 이만한 가성비가 없다. 요즘엔 운동을 한다. 사람이 아닌 홀드와 문제와 싸운다. 그러다보면 다른 일들은 머리에서 떠나간다. 물론 둘 다 끝난 뒤에 오는 현타는 어쩔 수 없는 것 같다.</p>\n<h3>운동을 합시다.</h3>\n<p>군대에서 이후로 요즘처럼 꾸준하게 운동을 한 적도 드문 것 같다. 물론 강습을 끊어 놓은 효과도 있고 잘 맞는 운동을 찾은 덕도 크다. 하지만 이전에는 일이 바빠지면 운동을 조금씩 줄여 나갔다. 정확히는 줄이기 보다는 피곤과 귀차니즘으로 안했다는게 맞는 표현이다. 하지만 그렇게되면 오히려 몸도 정신도 더 피곤해 진다. 그러다 순간 번아웃을 마주하면 더 답이 없다. 일이 바쁠 수록 정신력의 소비가 클 수록 운동을 꾸준히 해줘야 버틸 수 있다. 운동으로 체력과 근력만 키우는게 아니다 정신력도 같이 길러진다. 운동은 생존이다. 우리 모두 운동을 합시다.</p>\n<h3>미움받을 용기</h3>\n<p>한 때 유행했던 책 제목이기도 하다. 모든 사람에게 좋은 사람이기는 사실상 불가능하다. 하지만 알면서도 받아드리기는 쉽지 않다. 남들보다 조금 더 착하거나, 보편적인(?) 성격의 사람이라면 좀 더 많은 사람들에게 좋은 사람일 수는 있다. 타고난 성격이 그렇다면야 좋겠지만, 그렇지 않다면 스스로의 개성을 어느정도는 포기해야 할 수도 있다. 물론 정답은 없다. 개인이 살아가는 방식에 대한 선택의 문제라고 본다.<br>\n누군가 그랬다. 관계라는게 결국 필요한게 있으면 유지하고 아님 아닌 비지니스의 일종이라고. 하지만 난 그런걸 잘 못한다. 그냥 내가 좋으면 좋고 싫으면 싫은, 하지만 무난하게 지내려 노력할 뿐이다. 나도 보기보다는 보편적이지 않은 성격이기도 하고, 쉽사리 사람을 믿지 않기 때문에 그것도 쉽지는 않은 것 같다. 넓은 인맥이나 많은 인정을 바라진 않는다. 그냥 어울릴 수 있는 몇몇의 비슷한 사람들만 있어도 난 괜찮겠다 싶다.<br>\n얼마 전 글을 하나 읽고나서 예전에 봤던 시가 생각났다. 이규경 시인의 <code>용기</code>라는 시다.</p>\n<blockquote>\n<p>넌 충분히 할 수 있어<br>\n사람들이 말했습니다</p>\n<p>용기를 내야 해<br>\n사람들이 말했습니다</p>\n<p>그래서 나는 용기를<br>\n내었습니다</p>\n<p>용기를 내서 이렇게<br>\n말했습니다</p>\n<p>나는 못해요</p>\n</blockquote>\n<h3>사람이 좋다 (feat.zico)</h3>\n<p>얼마 전까지 자주 반복해서 들었던 노래가 있다. <code>사람(지코)</code>이다. 우연히 듣고 있는데 가사가 귀에 들어왔다. 그냥 누구나 공감할 수 있는 내용이라 그런걸 수 도 있겠지만, 요즘 따라 듣다보면 가사에 집중하게 되는 노래들을 자주 듣게 되는 것 같다. 노래를 들을 때 멜로디 보다 가사를 듣기 시작하면 나이를 먹은거라고 하던데, 언제부턴가 정말 가사들이 귀에 더 잘 들리기 시작했다. 맙소사…<br>\n아래는 사람의 가사 일부다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">다를 거 없이 하찮은 하루 / 유독 좋은 일만 피해 갔구나 / 어릴 적 그림 속 어른이 된 난 / 분명 기쁜 표정이었는데\n한 평생이 오늘까지면 / 발길을 돌릴 곳이 있나요 \n...\n조심해 시간은 무섭게 속력을 낼 거야 / 넘어지지 않게 서로 손잡이가 되어줘 / 개인이 할 수 있는 일은 실망밖에 없어 / 터질 듯 쌓여버린 이야기보따리를 풀어\n/ 삶은 교묘한 장난을 안 멈춰 uh / 네가 공짜로 생명을 얻은 날부터 UH / 우선시되는 무언가에 늘 묻혀있지 행복은 / 화려한 꽃밭 틈에서 찾는 네 잎 클로버  \n\n나쁜 마음씨를 들킬까 / 너 나 할 것 없이 눈치 봐 / 걱정 마 좀 부족해도 누군가는 / 인간다움을 느껴\n/ 남의 눈에 좋은 사람이기 전에 / 나 자신한테 먼저 화해를 청해 / 어렵다는 거 모두가 알아 / 이번이 처음 살아 보는 거잖아\n...</code></pre></div>","fields":{"slug":"/life/several-thought/"},"frontmatter":{"date":"2019/12/08","title":"생각의 단편들","description":"최근 든 생각들의 기록","tags":["nukeguys"]}}},{"node":{"excerpt":"얼마 전 글쓰기가 가치 있는 일이 되기를 바라는 소망이 담겨있는 책을 한 권 선물 받았다. 의미에 걸맞게 유시민의 글쓰기 특강이었다.\n이 책은 논리적인 글쓰기에 대해 이야기 한다. 그리고 처음 가장 기본적인 3가지 원칙을 소개한다. 사실 이…","html":"<p>얼마 전 글쓰기가 가치 있는 일이 되기를 바라는 소망이 담겨있는 책을 한 권 선물 받았다. 의미에 걸맞게 <a href=\"https://page.kakao.com/home?seriesId=47467405\">유시민의 글쓰기 특강</a>이었다.\n이 책은 논리적인 글쓰기에 대해 이야기 한다. 그리고 처음 가장 기본적인 3가지 원칙을 소개한다. 사실 이 3가지가 가장 기본이면서도 핵심이 아닐까 생각해서 소개해본다.</p>\n<p><strong>첫째, 취향 고백과 주장을 구별한다.</strong><br>\n어느 한 가지만 필요하다는 내용은 아니다. 취향 고백을 주장처럼 말하지 말라는 의미이다. 두번째 내용과도 이어지지만 논리적인 글쓰기에서 주장은 반드시 논증이 되어야 한다. 하지만 명확히 옳고 그름을 판단할 수 없는 취향을 주장처럼 해버리는 순간 논증을 해야 하는데, 이는 사실상 어렵기 때문이다.\n아마 누구나 쉽게 하는 실수일 것 같다. 나도 별 생각없이 글을 쓰거나 말을 하다보면 내 생각이나 의견으로 판단을 내리거나 사실 처럼 확정하는 경우가 종종 있는 것 같다.</p>\n<p><strong>둘째, 주장은 반드시 논증한다.</strong><br>\n사실과 주장을 구별해야 한다고 한다. 사실은 기술만하면 되지만 주장은 논증을 해야 한다. 주장이 논증이 되고 많은 사람이 받아드리면 사실이 되는 것이다. 하지만 주장만 하고 논증을 하지 않으면 바보가 된다. 안타깝게도 이런 경우도 주위에 흔하게 존재한다. (목소리 크면 이긴다는 말이 어울리는 상황이 이런 경우가 아닐까)\n논증이 필요한 이유는 반박을 할 수 있어야 하기 때문이다. 반박을 할 수 있도록 논증을 해야 주장이 되고, 그래야 받아들어지거나 반박을 할 수 있다. 논증이 없는 주장은 그저 요구에 지나지 않을 것이다. 이 부분에서 가장 공감이 갔던 내용이다.\n글쓰기를 업으로 삼는 사람들도 실수를 하고 지키기 어려운 부분이라고 하니 꾸준한 연습과 노력이 필요한 부분인 것 같다. </p>\n<p><strong>셋째, 처음부터 끝까지 주제에 집중한다.</strong><br>\n주관적 감정에 의해 주제를 벗어나지 말고 애초에 말하려던 주제를 끝까지 이어가야 한다. 이 부분도 지키기 쉽지 않는 내용이다. 글이란게 쓰다보면 감정이 들어가고 그러면서 사실에서 벗어나 주제가 흐려질 때가 있다. 물론 에세이 같은 글이라면 상관없을 수 도 있겠지만 논리적인 글쓰기에서는 반드시 지켜야 할 내용이다.</p>\n<p>이 다음 내용부터는 글을 잘 쓸 수 있는 많은 방법들에 대해 이야기 한다. 하지만 이 첫장이 가장 핵심적이고 중요한 내용이 아닐까 싶어 정리를 해봤다. 그리고 정리하기 위해 다시 한 번 책을 훑어 보니, 위의 원칙들이 글쓰기 뿐 아니라 말하기에도 해당하는 내용이라는 생각이 들었다. 말을 하다보면 감정이 필요한 경우도 분명 많지만, 어떤 경우에는 감정이나 취향에 빠져 마치 사실인냥 혹은 주장처럼 내 생각을 말하고 가치 판단을 너무나 가볍게 내린다. 오히려 신경을 쓰게 되는 글쓰기 보다 더 쉽게 이런 상황이 발생하지 않을까 싶다. 돌이켜 보니 나 또한 그런 경우가 많은 것 같아서 반성이 되기도 한다. 아마 누군가에겐 여러모로 불편한 상황이지 않았을까.</p>\n<p>아직 책이 절반은 넘게 남아있다. 바쁘다는 핑계로 많이 보진 못했지만 글쓰는 것에 대해 다시 한 번 생각을 할 수 있었던 것 같다. 또한 저자가 직접 자신이 말하는 대로 책을 써서 인지 쉽게 읽히고 이해되다 보니 더 와닿게 되는 것 같다. 혹여나 누군가 글쓰기에 대해 관심이 있다면 한 번쯤은 꼭 보라고 추천 할 만한 책인 것 같다.</p>","fields":{"slug":"/book/writing-9788965133520/"},"frontmatter":{"date":"2019/11/24","title":"유시민의 글쓰기 특강","description":"가치있는 글쓰기","tags":["book","유시민"]}}},{"node":{"excerpt":"…","html":"<p>언젠가 선이라는 단어를 듯고 여러가지 선에 대하여 생각을 해 본 적이 있다.\n한자로 선(善)을 의미할 수도 있고, 물리적인 특히 인체의 선(아름다움)을 의미할 수도 있다. 그리고 다른 기준이나 한계를 의미하기도 한다.(보통 선을 넘었다 라고 표현하기도 한다.)</p>\n<p>사람들은 다양하다. 그 만큼 나와 다른 사람도, 다른 모습도 많다는 의미이다. 나만해도 어제와 오늘, 기분에 따라 상황에 따라 달라지는데 나와 남을 비교하면 오죽할까. </p>\n<p>이런 세상에서 우리는 함께 살아간다. 너무나 다양한 사람들을 만나고 지나치면서. 그러다 보면 어쩔 수 없이 나와 다른 모습 또는 성향의 사람도 마주치게 된다. 이 다름의 정도와 나의 선(기준)에 따라 우리는 둘 도 없는 사이가 되기도 혹은 다시 보지 않을 적대적인 사이가 되기도 한다.</p>\n<p>\b개인 적인 선의 정도를 너비로, 타인의 선을 받아드리는 정도를 선의 높이로 표현해보자.</p>\n<p>난 개인적으로 선이 대부분 좁고 낮은 편이다. 선이 좁다는 걸 다른 말로 해석하면 호불호가 뚜렷하지 않다고도 할 수 있을 것 같다. 그래서 선택 장애가 있다. 하지만 선이 낮기 때문에 다른 선들을 잘 받아드리는 편이다. 그래서 내가 지향하는 두 가지 중의 하나가 다양성이기도 하다.(다른 하나는 미니멀리즘이다) 물론 내가 정한 혹은 가지고 있는 어떤 선들은 아주 넓기도 혹은 높기도 하다. 물론 그것들은 변한다. 더 납득할 혹은 그럴듯한 무언가가 생겼다면.</p>\n<p>반면 어떤 사람들은 아주 넓고 높은 선들을 가지고 있다. 그래서 모든 상황, 모든 일들에 대해서 판단하거나 결정할 기준이 있고 그렇게 행동한다. 또한 자신이 선호하는 바가 분명하기 때문에 비슷한 사람들과 함께하면 너무나 행복할 수 있다. </p>\n<p>선이 넓거나 좁은 것은 대부분 문제가 되지 않는 것 같다. 문제는 거의 높이에서 발생한다. 다른 말로하면 이해라고 할 수 있을 것 같다. 나도 어릴 때는 선이 아주 높은 사람이었다. 나와 다르거나, 내 맘에 들지 않고 이해되지 않는 것들이 너무 나도 싫었다. 하지만 점점 나이가 들면서 다양한 사람들을 만나고 선들도 바뀌고 높이도 낮아졌다. 그래야만 했을 수도 있을 것 같다. 선을 넘어오는 상황에서 발생하는 스트레스가 너무나도 싫었고 힘들었기 때문에. 그러면서 깨달았던 것 같다. 항상 옳은 것은 없다는 것을. 하지만 그럼에도 누구나 선을 가져야 한다는 것을.</p>\n<p>때론 선이 없거나 너무 좁은 경우도 문제가 된다. 더구나 이건 누군가와의 관계가 아니라 스스로 문제에 빠진다. 내가 그런 편이다. 선이 필요한 경우 없는 선을 만들다가 제 풀에 지쳐버린다고나 할까. 그리고 주위에 영향을 미치기도 한다. 당연히 좋은 영향은 아니다.</p>\n<p>개인적으로는 선이 넓은 사람들이 부럽다. 나 스스로가 답답할 때가 많으니. 하지만 그렇다고 선들을 쉽게 쉽게 만들고 싶지는 않다. 물론 그렇게 되지도 않지만. 이건 나이의 문제도 아닌 것 같다. 난 나이가 들면 변할 줄 알았으니까. 아직은 잘 모르겠다. </p>\n<p>내 확고한 선 중에 하나는 인생엔 정답이 없고, 세상에 완벽은 없으며, 100%는 디지털 세상에만 존재한다는 것이다. 예전에 적어놓은 이 글을 보고 누군가 나에게 댓글을 남겼다. 인생에 정답이 없다면, 니가 적은 그 말 또한 정답이 될 수 없다라는 의미였다. 그리고 다시 난 생각했다. 역시 정답은 없구나 하고.</p>","fields":{"slug":"/life/about-limit/"},"frontmatter":{"date":"2019/11/16","title":"선에 관하여","description":"잠 안오는 밤 사색하기","tags":["선","limit","critical point"]}}},{"node":{"excerpt":"…","html":"<p>스타일런 이후로 뉴발란스 런온서울과 아디다스 마이런을 등록 했다가 일정상 취소하면서 오랜만에 달리게 됐다. 준비는 전혀 못하는 바람에 걱정이 많았지만 올해 마지막 메이저 대회인데다 오래 기다렸던 대회라 어떻게든 참가하기로 했다.</p>\n<p>아침 일찍 출발해야 하기 때문에 토요일에 미리 준비를 하던 찰나, 헬스장에 러닝화를 두고 챙겨오지 않았다는 사실을 깨달았다. 주말에는 문을 열지도 않기 때문에 가지러 갈 수도 없는 상황이라, 고민 끝에 오래 신을 생각으로 러닝화를 새로 샀다. 맙소사 간만에 쇼핑을 할 계획이었는데 대신 러닝화만 하나 더 생겼다.</p>\n<p>아침일찍 일어나 말썽인 무릎에 테이핑을 단단히 하고 여의도 공원에 도착했다. 짐을 맡기고도 뭔가 모를 불안감이 계속 들었다.(자기 전에 본 오늘의 운세가 최악으로 나온 탓일거다. 일년 중 피해야할 서른날 중 하나라나…) 적당히 몸을 풀고 화장실에 가기 위해 줄 서 있는데 누군가 손을 툭 치고 지나가고 폰은 그대로 낙하. 역시나 안좋은 예감은 틀리지 않는 건가, 그렇게 떨어 뜨려도 멀쩡하던 폰의 필름이 깨져 있었다. 순간 올라오는 감정을 다시 누르고 릴렉스. 액정이 안깨진게 다행이겠지… 액땜했다 치기로 했다. 왜인지 이런날은 그냥 조용히 지나가는게 좋을 듯 하다.</p>\n<p>jtbc에서 주최를 해서 그런지, MC는 jtbc의 아들 장성규. 그리고 홍모 모델인 청하를 비롯해 여러 연예인들이 나와서 인사를 하고 일부는 같이 참여도 한단다. 청하 얼굴도 구분을 못하는 판이라 관심이 1도 안갔다.</p>\n<p>드디어 출발, 역시나 큰 대회는 정신이 없다. 10km 인원만 2만명이 넘고 4개 그룹으로 나눠서 달리니 어쩔 수 없다. 초반엔 앞으로 나갈 수도 없고 달리면서 치고 간다. C그룹에서 달리다 보니 앞 그룹 마지막 러너들을 만난다. 또 막힌다… 이번에 사은품으로 준 러닝색 덕분에 노래도 듣고 기록 측정도 하면서 달리는데 이러다 늦게다 싶지만 페이스 조절이 안된다. 뛰다보면 막히고, 그렇게 좀 지나니 무릎이 말썽이다. 통증 때문에 속도를 올릴 수가 없다. 사람이 워낙 많아서 그런건지 매너가 없는 사람들도 많다. 달리다 갑자기 제자리에 서버리고, 터널안에서 소리를 지르고, 러닝크루인지 주로 한 가운데를 차지하고 단체로 걸어간다. 결국 기록은 어느정도 포기하고 완주를 했다. 50분 하고도 많이 지나 있을 줄 알았는데 기록증을 보니 50분 39초. 준비도 못하고 무릎도 상태가 안좋은데 나름 잘 나왔다 싶다가도 40분대를 못 들어가서 조금만 더 뛸 걸 하는 생각에 드는 아쉬움은 어쩔 수 없다.\n그러다 우연히 스타일런 기록을 봤는데 50분 38초 54. 이렇게 똑같이 나오다니 신기하다.</p>\n<p>마치고 돌아오는 길. 역시나 계단 오르기가 힘들다. 무릎이 또 고장이다. 주인을 잘못 만나서 관절들이 참 고생이 많다는 생각을 했다.</p>\n<p>등록만 해놓고 연습도 제대로 못하고 준비도 없이 혼자 참가한 것 치고는 나름 잘 달린 것 같다. 올해 목표한 기록은 달성하지 못했지만 그래도 나름 꾸준히 참여해서 달렸다는 점에 뿌듯했다. 바빠지기도 했고 클라이밍도 시작하면서 러닝을 못해서 이제 힘들겠다 싶었는데 하루 뛰고 나니 내년엔 좀 더 하는 욕심이 다시 생긴다. 이번 대회 모토가 “달리자 나답게” 였던가. 마라톤만 의미하지는 않겠지 하는 생각이 든다. 앞으로도 열심히 달려보자 나답게.</p>","fields":{"slug":"/life/jtbc-seoul-marathon/"},"frontmatter":{"date":"2019/11/03","title":"달리자 나답게","description":"2019 jtbc 서울 마라톤 참가 후기","tags":["마라톤","10km","완주"]}}},{"node":{"excerpt":"…","html":"<p>클라이밍을 시작한지 두 달 쯤이 지나고 드디어 내 클라이밍화를 구매했다. 센터에서 대여하는 신발은 너무 오래 많은 사람들이 신어서 상태도 좋지 않고 발에 맞는 신발을 찾기도 쉽지 않다. 눈이 높아져서 이것저것 보고 갔지만 결국에는 신기 편한 초급용으로 추천받아서 구매했다. 그래도 이제 <code>신력</code>은 갖췄으니 <code>실력</code>만 갖추는 일만 남았다.</p>\n<p>마침 강습도 중급으로 넘어왔고, 스텝도 <code>아웃사이드</code>로 넘어왔기 때문에 겸사겸사 이전에 했던 내용들과 사전지식으로 알아두면 좋은 암벽과 홀드에 대해 정리해본다. (참고: 클라이밍 교과서)</p>\n<p><strong>암벽의 형태</strong></p>\n<p>페이스 : 수직에 가까운 벽(직벽)으로 힘보다는 기술을 요하는 경우가 많다.<br>\n코너 : 벽끼리 만나는 모서리로 홀드 대신 벽을 짚거나 손을 쓰지 않고 두 발로만으로도 버틸 수 있다.<br>\n슬랩 : 경사가 90도 이하인 벽으로 상대적으로 쉬운 편이다.<br>\n칸테 : 코너와 반대로 튀어나온 모서리로 훅을 주로 사용한다.<br>\n오버행 : 경사가 90도를 넘어서 앞으로 기울어진 벽으로 힘이 어느정도 뒷받침이 되어야 한다.<br>\n크랙 : 암벽에서 갈라진 틈을 의미한다. 인공암벽에서는 잘 볼 수 없다.<br>\n루프 : 천정같은 벽으로 거꾸로 매달리는 것 처럼 된다.</p>\n<p><strong>홀드의 종류와 그립</strong></p>\n<p>홀드란 벽에 튀어나온 부분을 의미한다. 이 홀드들을 손으로 잡고 발로 딛어서 움직이는 것이다.\n실제 암벽과 비슷하도록 여러 모양들을 가지고 있고 이 홀드들을 잡는것을 그립이라고 한다. 그리고 모양과 잡는 방법등에 따라 구분되어 불려진다.</p>\n<p>오픈핸드 : 손끝을 홀드에 걸고 쭉 펴서 매달린다.<br>\n클링 : 매달릴 수 있는 홀드를 의미한다. 방향에 따라 사이드클링, 언더클링 등도 있다.<br>\n저그 : 감싸 쥐듯 잡을 수 있는 홀드로 스타트에서 주로 볼 수 있다.<br>\n포켓 : 구멍이 있는 홀드에 손가락 일부만 들어간다.<br>\n언더 클링 : 홀드의 아래 쪽을 잡는 방법으로, 보통 언더라고 부른다.<br>\n사이드 풀 : 옆으로 당기는 그립으로 균형 감각이 필요하다.<br>\n가스통 : 사이드 풀과 반대 방향으로 잡는 경우로 어깨 힘이 필요하다.<br>\n파밍 : 손 전체를 사용해 감싸듯 쥐는 그립으로, 슬로퍼를 잡을 떄 사용한다.<br>\n볼륨 : 튀어나온 대형 홀드로 볼륨 위에 다른 홀드를 붙이기도 한다.</p>\n<p><strong>삼지점과 인사이드 스텝</strong></p>\n<p>클라이밍을 쉽게 말하면 벽에 매달려 목표한 지점까지 이동하는 것이다. 벽에 매달리기 때문에 팔힘이 필요하긴 하지만 팔힘만으로는 아무리 좋아도 한계가 있기 마련이다. 반면에 다리는 하루 종일 걸어다닐 수 도 있다. 따라서 매달린 상태에서도 팔힘보다 다리힘을 최대한 사용하는 것이 효율적이다. 이를 위해서 가장 기본적인 자세가 <code>삼지점</code>이다. <code>삼지점</code>은 두 발과 팔을 이용해 삼각형을 만들어 균형을 잡는 방법으로 팔을 쭉 뻗어 두 다리에 힘을 분산시켜 팔힘을 적게 들이고 안정적인 자세를 만들 수 있다.(일명 개구리 자세) 얼마나 팔힘을 적게 들이고 이동하는지가 클라이밍의 핵심이라고 볼 수 도 있기 때문에 처음 배우면 어디서든 귀에 못이 박히게 듣는 말로 클라이밍의 기본중의 기본이다.</p>\n<p>삼지점을 만들어 안정적인 자세를 취한 후 남은 한 손으로 다음 홀드를 잡고 다시 삼지점을 만드는 것이 무빙이다.\n(삼지점 외에도 이지점도 있고, 여러 다양한 무빙도 있지만 이게 기본이다.) 무빙 방법의 가장 기본에는 인사이드 스텝과 아웃사이드 스텝 두가지가 있다.</p>\n<p>인사이드 스텝은 벽을 마주 본 상태에서 팔자걸음으로 이동하는 방법이다. 즉 발을 바깥쪽으로 벌려 홀드에 엄지발가락을 올려 매달린다. 이 때 주의 할 점은 양팔을 쭉 펴서 두 다리에 무게를 충분히 실어야 한다는 점이다. 이동시에는 팔로 당겨서 이동하는 것이 아니라 다리의 미는 힘을 이용해 무게중심을 이동하려는 방향으로 이동시킨다. (물론 움직임을 시작하는 시점에는 팔힘도 같이 들 수 밖에 없다. 하지만 순간적으로 들이고 난 후에는 다리로 밀기 때문에 팔엔 큰 힘이 걸리지 않는다.)</p>\n<p>조금 쉽게 이해하기 위해 벽 앞에 무릎을 붙여 쭈구려 앉는 상태에서 일어나는 것을 생각해 보면 된다. 앉은 상태에서는 어느정도 일어나다 보면 균형을 잡느라 무릎이 앞으로 나가게 된다. 하지만 벽이 있기 때문에 몸이 뒤로 밀힌다. 이 떄 두 손으로 벽을 잡을 수 있다면 몸은 뒤로 밀려있지만 팔로 당겨진 상태에서 움직일 수 있게 된다. 그리고 어느정도 서게 되면 다시 다리만으로 몸을 지탱할 수 있게 된다. 즉 이 밀리는 순간에는 어쩔 수 없이 팔 힘을 들이게 되지만 그 이후에는 힘이 들지 않는다. 힘이 드는 순간에도 필요한건 아래로 매달리는 힘이 아니라 앞으로 당기는 수평적인 힘이다. 따라서 적은 팔 힘과 다리 힘으로 벽을 앞에두고 이동할 수 있다. (내가 직접 하면서 느낀 개인적인 비유이다.)</p>\n<p>모든 무빙의 기본이기 때문에 처음에 배우는 스텝이고, 나도 한달 간 그리고 아직도 인사이드 스텝을 쓰면서 오르고 있다. 아직 아웃사이드는 적응이 안되어 부자연스러운 상태이기 때문에 다음 스텝으로 나아갈 때 정리해 보겠다.</p>","fields":{"slug":"/life/climbing-inside/"},"frontmatter":{"date":"2019/10/26","title":"클라이밍 일지 #2","description":"홀드의 종류와 기본자세 \"삼지점\"","tags":["climbing","hold","three-point","inside-step"]}}},{"node":{"excerpt":"바야흐로 지난 주말, 뭔가 규칙적으로 끄적여 볼까 해서 간단하게 그날그날 생각난 단어들을 기록하고(가능하면 문장도) 영어로 한 번 씩 바꿔보는 걸 시작해봤다. 역시나 아직 습관이 안들어서 잔뜩 빼먹었지만 기록차 남겨본다. 2019.10.1…","html":"<p>바야흐로 지난 주말, 뭔가 규칙적으로 끄적여 볼까 해서 간단하게 그날그날 생각난 단어들을 기록하고(가능하면 문장도) 영어로 한 번 씩 바꿔보는 걸 시작해봤다. 역시나 아직 습관이 안들어서 잔뜩 빼먹었지만 기록차 남겨본다.</p>\n<p><strong>2019.10.19</strong></p>\n<p>철벽남, 팔꿈치, 칼국수, 행복<br>\nice prince, elbow, chopped noodle, happiness</p>\n<p>세상의 모든 것은 올라가고 있다. 하지만 행복은 추락하고 있다.<br>\nEverything in this world is going up. But happiness is going down.</p>\n<p>우리 모두 행복할 의무가 있다.<br>\nWe have an obligation to happy.</p>\n<p><strong>2019.10.15</strong></p>\n<p>컨디션 난조, 휴식, 일정, 마라톤<br>\nbad condition, rest, schedule, marathon</p>\n<p><strong>2019.10.20</strong></p>\n<p>제사, 피곤, 휴가, 호수<br>\nancestral rites, tired, vacation, lake</p>\n<p>오늘 따라 맥주가 땡기네(강렬하니까 여러 문장으로)<br>\nI want to drink beer today.<br>\nI could use a beear today.<br>\nI am craving beer today.</p>","fields":{"slug":"/life/english-word-diary-191020/"},"frontmatter":{"date":"2019/10/20","title":"10월 셋째주 영단어 일기","description":"단어로 일기 쓰고 영어로 바꾸기","tags":["diary","english"]}}},{"node":{"excerpt":"…","html":"<p>지난 달 부터 클라이밍 강습을 시작했다. 우연히 기회에 체험을 하러 갔던게 계기가 되었다. 처음엔 재미있네 정도 였다가 두번째는 다른 사람들은 되는데 나는 왜 안되지하는 자괴감 + 오기가 합쳐져서 배워보자하고 강습을 끊었다. 그리고 한 달 넘게 꾸준히 해오고 있다. 이젠 기초는 넘어가고 강습도 중급으로 올라가서 어느정도 놀(?) 줄 아는 정도가 됐지만 아직 빵<sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup> 수준이라 한참은 부족하다. 그래도 생각보다 재밌게 하고 있고 앞으로도 꾸준히 하게 될 듯하여 과정들을 기록해 볼까 한다.</p>\n<p>처음으로 클라이밍에 대한 간단한 설명부터 시작해본다.</p>\n<p><strong>클라이밍의 역사</strong></p>\n<p>요즘엔 실내에서 하는 클라이밍은 공간의 제약 때문에 <code>볼더링</code>이 대부분이다. 볼더링의 기본적인 룰은 정해진 Start 지점부터 같은 색의 홀드를 잡고 올라가 최종 Top에 두손을 모으는 것이다. 하지만 홀드들이 결코 만만하지 않기 때문에 힘 뿐만 아니라 유연성, 균형감각 무엇보다 길을 찾는 창의력을 요구한다. 그렇기 때문에\n볼더링은 낮은 높이에서 암벽등반을 연습하거나 훈련하는데 사용되었다. 그러다 영국의 존 길(John Gill)이라는 클라이머가 볼더링을 독립된 스포츠로 발전시켰고 1968년 영국의 리즈대학에 최초의 인공 암벽이 세워 진 것이 볼더링의 시작이다.</p>\n<p>실제 스포츠 클라이밍은 낮은 높이에서 기술을 요하는 <code>볼더링</code>외에도 일반적으로 떠올리는 장비를 착용하고 줄을 달면서 올라가는 <code>리드</code>와 누가 더 빠르게 올라가는지르 겨루는 <code>스피드</code> 총 3종목으로 이루어져 있다.\n정식종목으로 포함된 내년 올림픽에 클라이밍 여제 김자인 선수를 비롯해 사솔, 김자비, 천종원 등 우리나라에도 세계적으로 뛰어난 선수들이 국가대표로 선발되어 있으니 보는 재미가 쏠쏠할 듯 하다.</p>\n<p><strong>클라이밍의 매력</strong></p>\n<p>처음 센터에 갔을 때 생각보다 많은 사람들이 있었다. 남자들 뿐 아니라 여자들도 많고, 심지어 어린 초등학생들도 벽을 타고 있는 모습을 종종 볼 수 있다. 최근에 개봉한 영화 <a href=\"https://page.kakao.com/home?seriesId=53616114\">엑시트</a> 영향이라는 말도 있지만 사실 그 전부터 클라이밍을 즐기는 사람들이 많았다. 클라이밍은 평소와 다른 근육을 써야하고 낮지는 않는 곳에 올라 매달려서 움직여야 하기 때문에 자칫 부상이나 추락의 위험이 있다. 그럼에도 클라이밍을 즐기는 사람들은 중독되다시피 운동을 다닌다. 아마 정해진 답이 없는 자유로움과 완등했을 때 느끼는 쾌감 때문이지 싶다. 안풀리던 문제를 몇번을 도전하다가 처음 정복했을 때의 그 쾌감은 나 또한 잊을 수가 없다.</p>\n<p><strong>클라이밍 준비</strong></p>\n<p>클라이밍은 다른 운동처럼 장비가 딱히 필요하지 않다. 물론 클라이밍화가 필수적으로 필요하긴 하지만 보통 센터에서 대여를 해주기 때문에 할 마음만 있다면 누구나 편한 옷만 챙겨가서 할 수 있다. 초크도 필요하긴 하지만 센터에 있기도 하고 가격도 저렴하기 때문에 부담이 없다. 물론 어느정도 익숙해지면 더 난이도 있는 문제를 풀기위해 신발에 욕심도 나고 동작을 좀 더 편하게 할 수 있도록 만들어진 클라이밍 전용 옷도 고려하게 되기는 한다.</p>\n<p>그럼 클라이밍을 잘 하기 위해서는 무엇이 필요할까. 도구를 사용하지 않기 때문에 좋은 몸(?)이 무엇보다 중요하다. 처음 접하는 사람들은 팔 힘만 있으면 잘 할 수 있을거라고 생각하는 경향이 있지만 클라이밍은 실제로 전신운동인데다가 팔힘은 한계가 있기 때문에 하체와 코어 근육의 뒷받침이 매우 중요한 운동이다. 물론 팔이나 어깨, 등 근육도 뛰어날 수록 도움이 되는 건 사실이다. 추가로 근력 만큼 필요한게 유연성이다. 이 점 때문에 여자들이 결코 남자들에 비해 뒤쳐지지 않는다. 상대적으로 남자들은 근력이 강하지만 유연성이 부족하기 때문이다.(나도 저주받은 뻗뻗함 때문에 문제가 안풀릴 때는 요가라도 배워볼까 생각했다.) 신기하게도 세계적으로 뛰어난 선수들을 보면 예상외로 말랐다라는 느낌을 받는다.</p>\n<p><strong>주의할 점</strong></p>\n<p>모든 운동이 그렇지만 클라이밍 특히 평소에 하지 않는 자세와 근육들을 쓰기 때문에 몸관리를 잘 해주지 않으면 부상을 입기 쉽상이다. 나 또한 어깨와 팔꿈치로 계속 고생을 하면서 정신차리고 좀 더 준비와 마무리에 신경을 쓰고 있다. 어느정도 오랜 기간 해 온 사람이라면 익숙해져 있겠지만 그렇지 않은 사람들은 준비운동없이 무리하게 근육을 늘리고 뒤틀다 보면 무리가 쉽게 온다. 따라서 시작 전에 전신을 골고루 미리 풀어주는 스트레칭은 필수적이다. 또 몇시간을 매달리고 나면 근육이 손상되고 세포가 파괴된다. 이런 상태를 그대로 두면 계속 진행되면서 회복이 느려지기 때문에 끝난 후에 아이싱을 해줘야 하고, 쿨다운 해주는 스트레칭도 챙겨야 한다.</p>\n<p>간략하게 기본적인 내용들을 정리해봤다. 모든 운동(운동 뿐만 아니지만)은 기본기와 반복적인 노가다가 중요하다고 생각한다. 하지만 점점 익숙해지고 실력이 올라갈 수록 기본을 잊어버리기 쉽상이다. 그러다 보면 분명 어느순간 한계가 오고 극복하기 위해선 더 큰 노력이 필요하다. 그래서 되새길 겸 클라이밍 일지를 작성해보려고 한다. 다음부턴 좀 더 기술적인 부분들에 대해 정리해 보겠다. 그럼 이만 운동하러.</p>\n<div class=\"footnotes\">\n<hr>\n<ol>\n<li id=\"fn-1\">\n<p>체험을 시켜주었던 누군가의 레벨링이다. 빵 > 밤빵 > 왕밤빵 순으로 올라간다고 한다.</p>\n<a href=\"#fnref-1\" class=\"footnote-backref\">↩</a>\n</li>\n</ol>\n</div>","fields":{"slug":"/life/climbing-basic/"},"frontmatter":{"date":"2019/10/13","title":"클라이밍 일지 #1","description":"클라이밍의 시작","tags":["climbing","bouldering"]}}},{"node":{"excerpt":"…","html":"<p>웹의 성능을 올리는 데는 다양한 방법들이 있다. 렌더링을 최적화 하거나 리소스 크기를 최소화 한다. 그리고 가능하다면 리소스의 사용이나 로딩을 필요한 시점까지 연기하거나 비동기로 처리한다. 웹에서 사용하는 리소스들 중 많은 크기를 차지하는 것 중의 하나가 이미지이다. 아무리 최적화를 하고 크기를 줄이더라도 이미지 수가 어느정도 증가하면 로딩에 오랜 시간이 걸릴 수 밖에 없다. 이를 방지하기 위해 ATF<sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup> 영역만 먼저 로딩 하고 나머지는 필요한 시점에 로딩시키는 lazyloading을 많이 사용한다.</p>\n<p>웹에서 이미지를 lazyloading 시키는 방법도 여러가지가 있는데 구글 개발자 사이트(<a href=\"https://developers.google.com/web/fundamentals/performance/lazy-loading-guidance/images-and-video/?hl=ko\">이미지 및 동영상의 지연 로딩</a>)에 보면 관련된 설명을 개념부터 방법까지 친절하게 해주고 있다.</p>\n<p>이 중에서 적용이 쉽고 여러모로 편리한 <code>intersection observer</code>를 사용하는 방법을 정리해 본다.</p>\n<p><code>intersection observer</code>는 MDN(<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API\">Intersection Observer</a>)에서 확인해도 되고, 구글에 검색하면 친절하게 설명되어 있는 글들이 많다. 간단히 설명하면 이름에서 알 수 있듯이 지정된 영역에 대해 교차(intersection) 했는지를 감지하고 해당 시점에 원하는 작업을 할 수 있게 해준다. 안타깝게도 모든 버전의 브라우저에서 지원하지 않고 특히 IE에서는 지원조차 하지 않는다. 다행히 W3C에서 <a href=\"https://github.com/w3c/IntersectionObserver/tree/master/polyfill\">polyfill</a>을 지원해 준다. 하지만 브라우저마다 동작이 조금씩 다를 수 있다고 하니 주의해서 사용하자.</p>\n<p><code>intersection observer</code> 사용을 위해서는 observer 객체를 생성하고 lazyloading을 적용할 이미지를 등록 시켜야 한다. 지정된 영역안으로 들어올 때 뿐 아니라 나갈 때도 callback이 호출되기 때문에 <code>isIntersecting</code> 값이 true일 때만 처리 하고, 로드한 후에는 감시할 필요가 없기 때문에 등록을 해제해 주어야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Image</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> src <span class=\"token punctuation\">}</span><span class=\"token punctuation\">:</span> IProps</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> imgRef <span class=\"token operator\">=</span> useRef<span class=\"token operator\">&lt;</span>HTMLImageElement<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> observerRef <span class=\"token operator\">=</span> useRef<span class=\"token operator\">&lt;</span>IntersectionObserver<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isLoad<span class=\"token punctuation\">,</span> setIsLoad<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">onIntersection</span><span class=\"token punctuation\">(</span>\n    <span class=\"token parameter\">entries<span class=\"token punctuation\">:</span> IntersectionObserverEntry<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    io<span class=\"token punctuation\">:</span> IntersectionObserver</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    entries<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">entry</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>entry<span class=\"token punctuation\">.</span>isIntersecting<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        io<span class=\"token punctuation\">.</span><span class=\"token function\">unobserve</span><span class=\"token punctuation\">(</span>entry<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setIsLoad</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>observerRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      observerRef<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IntersectionObserver</span><span class=\"token punctuation\">(</span>onIntersection<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    imgRef<span class=\"token punctuation\">.</span>current <span class=\"token operator\">&amp;&amp;</span> observerRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">observe</span><span class=\"token punctuation\">(</span>imgRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>img ref<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>imgRef<span class=\"token punctuation\">}</span> src<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>isLoad <span class=\"token operator\">?</span> src <span class=\"token punctuation\">:</span> placeHolder<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>전체 코드와 동작은 아래에서 확인할 수 있다. 눈으로 확인할 수 있도록 <code>threshold</code>를 0.5로 설정했다. 즉 이미지의 절반이 화면에서 나타날 때 로드된다. 스크롤을 천천히 내리면서 확인해보자.</p>\n<p><a href=\"https://codesandbox.io/embed/lazyloading-image-59dxt?autoresize=1&#x26;fontsize=14&#x26;module=%2Fsrc%2FImage.tsx\">https://codesandbox.io/embed/lazyloading-image-59dxt?autoresize=1&#x26;fontsize=14&#x26;module=%2Fsrc%2FImage.tsx</a></p>\n<p>위의 방식도 동작엔 문제가 없지만, 각 Image 컴포넌트 마다 <code>IntersectionObserver</code>를 생성하고 있다. 성능상 얼마나 큰 차이가 있을지는 벤치마킹을 해봐야겠지만 이미지가 많은 경우 매번 생성을 하는건 비효율 적으로 보인다. 따라서 전역적으로 하나만 두고 계속 사용하도록 수정하는 것이 좋아보인다.</p>\n<p>우선 observer를 컴포넌트 밖으로 분리하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Image</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> src <span class=\"token punctuation\">}</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> src<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>observer<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      observer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IntersectionObserver</span><span class=\"token punctuation\">(</span>onIntersection<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    imgRef<span class=\"token punctuation\">.</span>current <span class=\"token operator\">&amp;&amp;</span> observer<span class=\"token punctuation\">.</span><span class=\"token function\">observe</span><span class=\"token punctuation\">(</span>imgRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> observer<span class=\"token punctuation\">:</span> IntersectionObserver <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>하지만 이렇게 하면 IntersectionObserver 생성시 사용한 <code>onIntersection</code> 함수는 첫번째 이미지 내부 함수기 때문에 다른 이미지들에 대해서는 제대로 동작하지 않는다. 따라서 onIntersection도 밖으로 분리한다. 이렇게 분리하다 보면 한가지 문제가 생긴다. <code>setIsLoad</code>는 컴포넌트의 내부에서만 사용가능하기 때문이다. 그래서 함수 외부에서도 호출가능한 방법을 찾아야 한다. 난 <code>CustomEvent</code>를 사용해서 처리했다. CustomEvent는 이름처럼 event를 직접 정의해서 사용할 수 있도록 해준다. 마찬가지로 모든 브라우저 버전에서 지원하지 않으니 주의하고, <a href=\"https://developer.mozilla.org/ko/docs/Web/API/CustomEvent/CustomEvent\">MDN</a>에서 IE에서 사용가능한 polyfill도 제공하니 확인 후 사용하자.\n<code>CustomEvent</code>는 이벤트 타입을 정한 후에 다른 이벤트와 동일하게 <code>addEventListener</code>를 통해 callback을 등록하고, <code>dispatchEvent</code> 호출하면서 해당 이벤트 타입의 객체를 전달하면서 이벤트를 발생시킨다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Image</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> src <span class=\"token punctuation\">}</span><span class=\"token punctuation\">:</span> IProps</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">//  ...</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">loadImage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setIsLoad</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">const</span> imgEl <span class=\"token operator\">=</span> imgRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">;</span>\n    imgEl <span class=\"token operator\">&amp;&amp;</span> imgEl<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LOAD_IMG_EVENT_TYPE</span><span class=\"token punctuation\">,</span> loadImage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      imgEl <span class=\"token operator\">&amp;&amp;</span> imgEl<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LOAD_IMG_EVENT_TYPE</span><span class=\"token punctuation\">,</span> loadImage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>img ref<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>imgRef<span class=\"token punctuation\">}</span> src<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>isLoad <span class=\"token operator\">?</span> src <span class=\"token punctuation\">:</span> placeHolder<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">let</span> observer<span class=\"token punctuation\">:</span> IntersectionObserver <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token constant\">LOAD_IMG_EVENT_TYPE</span> <span class=\"token operator\">=</span> <span class=\"token string\">'loadImage'</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">onIntersection</span><span class=\"token punctuation\">(</span>\n    <span class=\"token parameter\">entries<span class=\"token punctuation\">:</span> IntersectionObserverEntry<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    io<span class=\"token punctuation\">:</span> IntersectionObserver</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    entries<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">entry</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>entry<span class=\"token punctuation\">.</span>isIntersecting<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        io<span class=\"token punctuation\">.</span><span class=\"token function\">unobserve</span><span class=\"token punctuation\">(</span>entry<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        entry<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomEvent</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LOAD_IMG_EVENT_TYPE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>최종 코드와 동작은 아래에서 확인하자.</p>\n<p><a href=\"https://codesandbox.io/embed/image2-v7ii7?autoresize=1&#x26;fontsize=14&#x26;module=%2Fsrc%2FImage.tsx\">https://codesandbox.io/embed/image2-v7ii7?autoresize=1&#x26;fontsize=14&#x26;module=%2Fsrc%2FImage.tsx</a></p>\n<p>처음 lazyloading을 구현할 땐 라이브러리도 고려해보고 방법도 많이 찾아봤었다. 그리고 지금은 위의 방법과 비슷하게 직접 구현해서 사용하고 있다. 코드양은 얼마 되지 않지만 결과를 내는데 까지 적지 않은 시간과 노력을 들였고 그만큼 결과적으로 만족스럽다. (뭐든지 처음이 어렵지…) 조금 더 나은 웹을 위해 하나씩 더 알아가보자.</p>\n<div class=\"footnotes\">\n<hr>\n<ol>\n<li id=\"fn-1\">\n<p>Above-The-Fold의 약자로 가판대에 접혀있는 신문의 보이는 영역을 의미하는데서 시작되었다. 사용자가 처음 진입했을 때 보이는 기본 영역을 의미한다. (참고: <a href=\"https://m.blog.naver.com/PostView.nhn?blogId=beusable&#x26;logNo=220887404946&#x26;proxyReferer=https%3A%2F%2Fwww.google.com%2F\">Above the Fold란?</a>)</p>\n<a href=\"#fnref-1\" class=\"footnote-backref\">↩</a>\n</li>\n</ol>\n</div>","fields":{"slug":"/dev/react-lazyimage/"},"frontmatter":{"date":"2019/10/06","title":"react lazyloading 이미지 컴포넌트 구현하기","description":"intersection observer와 CustomEvent 사용기","tags":["react","lazyload","image","intersection-observer"]}}},{"node":{"excerpt":"무려 5…","html":"<p>무려 58권에 이르는 <a href=\"https://page.kakao.com/home?seriesId=29226849\">달빛조각사</a>를 완독하고, 다음으로 경제 관련 책을 읽어볼까 싶어 쉬울 듯한 책들 중에 <code>빚 권하는 사회에서 부자되는 법</code>이라는 책을 골라봤다. 출간된지는 좀 지났지만 평이 나쁘지 않았고 무엇보다 <a href=\"https://page.kakao.com/home?seriesId=49261107\">카카오페이지</a>에 있었기 때문에 읽어보기로 했다.</p>\n<p>사실 책 소개도 그렇고 내용 자체에 큰 기대는 하지 않았다. 워낙 쉽게 쓰여진 내용이다 보니 어느정도 관심만 있다면 이미 알고 있거나 들어봤을 법한 내용들이었다. 그래도 다른 책들을 읽기 전에 워밍업으로는 나쁘지 않았고, 다시 경제관념을 잡아보는 정도로는 괜찮았다.</p>\n<p>제목에서 알 수 있듯이 빚(대출)과 재테크와 관련된 내용이 주를 이룬다. 시작엔 간략하게 빚의 기원(?)에 대해서도 알려준다. 무려 5,000여 년 전 메소포타미아 시대에 빚이 시작되었다니 놀랍기도 했지만 역시나 하는 생각도 함께 들었다. 저자도 말했지만 이렇게 5,000년이 넘는 시간동안 진화해 온 빚에 사람들이 쉽게 현혹되는건 어찌보면 당연한 일일지도 모르겠다. 더구나 적든 많든 일상에서 많은 부분을 차지하게 되다 보니 빚을 통제하고 관리하는건 무엇보다 중요하다.\n책은 빚에 대한 설명부터 빚을 조절하고 어쩔 수 없는 상황에서 조금더 나은 빚을 지는 방법 그리고 빚테크까지 내용이 이어진다.</p>\n<p>우리가 빚을 지게 되는 가장 큰 이유는 무엇일까? 저자는 더 큰 돈을 벌기 위한 투자와 강한 소비유혹이라고 말한다. 같은 의미로 난 채우지 못하는 자기 만족과 욕심 때문이라고 생각한다. 누군가는 자연인<sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup> 같은 삶에도 만족을 느끼고 행복하게 살아가고, 누군가는 서울에 있는 아파트에 살면서 매년 해외여행을 다니지만 더 많은 것을 원하고 만족하지 못하며 살아간다. 웰빙이니 욜로니 하는 말들만 봐도 이제는 먹고사는 것을 걱정하던 시대는 지났다고 본다. 생각보다 세상이 잘 살게 되었다는 <a href=\"https://page.kakao.com/home?seriesId=52925714\">어떤 책</a>의 내용처럼 사람들은 지금 보다 더 잘 먹고 잘 사는데 관심이 있고 욕심을 부리고 있다. 물론 이게 잘못 되었다는 것은 아니다. 적당한 욕심은 발전의 원동력이 된다. 하지만 주변의 분위기가 그렇다보니 내 수준을 넘어서는 과한 욕심은 문제가 된다. 책에서 톨스토이의 <code>사람에게는 얼마나 많은 땅이 필요한가</code><sup id=\"fnref-2\"><a href=\"#fn-2\" class=\"footnote-ref\">2</a></sup>의 스토리를 간략하게 설명한다. 이처럼 작은 것을 원하던 사람이 이루게 되면 만족하지 못하고 더 큰 욕심을 부리게 되면서 결국엔 처음 원하던 것 조차 얻지 못하는 불상사가 발생할 수 있다.</p>\n<p>이에 대표적인 예로 집을 든다. 집을 살 때 빌린 돈은 투자가 아닌 비용으로 봐야 한다고 한다. 지금까지는 집 값이 지속적으로 올랐기 때문에 큰 문제가 없었으나 이제는 자산 가격의 상승기가 끝나가고 있어 빚을 내서 투자하고 돈을 버는 시기는 끝나가고 있다고 한다. 하지만 책이 쓰여진건 2016년이고 3년이 지난 지금도 돈이 돈을 버는 시대는 이어지고 있다. 대표적인 예도 집이 아닐까 않을까 싶다. 소위 말하는 금수저가 아닌 이상 서울에서 내집 마련을 한다는 것은 빚을 내더라도 쉽지 않은 일이다. 그럼에도 많은 사람들이 최대한의 빚을 내고 집을 사기 위해 노력한다. 그렇게 몇 년을 버티면 집 값은 올라왔다. 주변에서 평범한 월급쟁이가 월급만으로 큰 돈을 벌 수 있는 방법은 집 밖에 없다는 이야기가 흔하게 들리는 것도 이상한 일이 아니다. 물론 이런 상황이 언제까지 이어질지는 모르는 일다(저자도 <a href=\"https://namu.wiki/w/%ED%9D%91%EC%A1%B0%20%EC%9D%B4%EB%A1%A0\">블랙스완</a>에 대비하라고 언급하고 있다). 하지만 어떻게 되는 빚을 통제하고 관리하는 능력을 키우는건 필수적인 일이될 것이다.</p>\n<p>그런 의미에서 일반적인 내용이지만 책에 나온 몇가지를 정리해 본다. 대부분 어느정도 관심만 있다면 알 수 있는 내용이다.</p>\n<blockquote>\n<ol>\n<li>대출 리스트를 작성한다. 규모, 만기, 금리, 월 상환액 등을 정확하게 표시한다.</li>\n<li>대출 릿트를 기반으로 만기를 파악해서 감당할 수준인지 검토한다. 권장 대출 한도 13%, 안전 대출 한도 30%를 넘지 말아라.(나이가 들수록 낮춰야 한다.)</li>\n<li>절대 연체는 금물이다.</li>\n<li>만기가 가까운, 부담이 큰 대출을 먼저 정리한다.</li>\n<li>2금융권 보단 은행을, 그보단 정부지원 대출을 확인해라. 등등</li>\n</ol>\n</blockquote>\n<p>하지만 위에 언급했듯이 현재에 만족하고, 남과 비교하지 않고 감당할 수 있을 만큼의 욕심을 갖는 것이 더 중요한 일이 아닐까 생각한다. 이론적인 내용들이야 주변에 도움을 받을 수도 있고 관련된 정보들은 넘쳐난다. 하지만 결과적으로 실행을 못하는 이유는 욕심은 줄이지 않은채 빚만 줄이려고 하기 때문인 듯 싶다. 마치 적게 일하고 많은 돈을 벌고 싶은 심리랄까.(물론 불가능한 것은 아니다.) 그렇게 미래에 대한 불가능한 욕심을 가질 수록 현재에 만족하지 못한 채 살아가게 되는 것 같다.</p>\n<p>아직 완독하지는 못했지만 읽으면서 관심이 좀 더 생기고 내 스스로도 생각을 해보는 기회가 되었다. 물론 모두 내려놓고 현재에 만족하기란 쉽지 않았지만, 불안한 미래에 대한 걱정은 조금 줄이고 현재를 충실하게 즐기면서 살아가보자는 다짐을 해본다.</p>\n<p><sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup> 비유적인 표현이다. 정말로 그 사람들 중에 진짜 만족하는 사람이 얼마나 될 지는 의문이다.<br>\n<sup id=\"fnref-2\"><a href=\"#fn-2\" class=\"footnote-ref\">2</a></sup> 작은 땅을 원하던 주인공이 악마를 소원을 이루게 되자 만족하지 못하고 더 큰 땅을 원한다. 그리고 해 뜰 때부터 해 질 때까지 걸어 돌아온 만큼의 땅을 가질 수 있는 기회가 생기자 탐욕에 빠져 앞으로만 가다가 뒤늦게 깨닫고 열심히 뛰어 들어왔지만 결국 피를 토하고 죽어버린다. 그리고 악마는 그 죽음을 보면서 웃고 있었다. 라는 이야기라고 한다.</p>","fields":{"slug":"/book/dept-and-rich-9788950967789/"},"frontmatter":{"date":"2019/09/29","title":"빚 권하는 사회에서 부자되는 법","description":"경제 멘토 KBS 박종훈 기자의 생존 재테크","tags":["book","박종훈"]}}},{"node":{"excerpt":"개발을 하다보니 너무나 당연하게도 git을 사용한다. 처음부터 git을 cli로만 사용하다보니 Sourcetree나 Tower 같은 GUI client를 사용하는 것보다 직접 타이핑 하는게 오히려 더 편하게 느껴진다. 하지만 cli…","html":"<p>개발을 하다보니 너무나 당연하게도 git을 사용한다. 처음부터 git을 cli로만 사용하다보니 <a href=\"https://www.sourcetreeapp.com/\">Sourcetree</a>나 <a href=\"https://www.git-tower.com\">Tower</a> 같은 GUI client를 사용하는 것보다 직접 타이핑 하는게 오히려 더 편하게 느껴진다. 하지만 cli 특성상 타이핑이 많거나 반복되는 경우가 생긴다. 게으름이 기술의 발전을 이끈다고 하던가… 귀차니즘이 너무 심해질 때 마다 하나씩 해결했던 방법들을 몇가지 정리해 본다.</p>\n<h2>1. checkout의 귀차니즘</h2>\n<p>작업을 하다보면 새로 만들거나 혹은 리뷰를 위해 다른 브랜치를 pull 하거나 등등으로 여러 브랜치 사이를 이동하는 경우는 흔한 일이다. 그러나 브랜치명이 길다면 매번 입력하는건 여간 귀찮은 일이 아니다. 사실 <a href=\"https://ohmyz.sh/\">Zsh</a>을 사용하고 있어 탭과 방향키 만으로 브랜치를 선택할 수는 있지만 순간 손을 이동해야 한다. 타이핑을 하다가 방향키로 손을 움직이는 것도 번거로워 진 시점에 현재 로컬의 브랜치들의 리스트를 보여주고 번호 입력으로 checkout을 하는 python script(<a href=\"https://github.com/nukeguys/utils\">github</a>)를 작성했었다.\n이외에도 python으로 일에 필요한 것들을 작성했었는데 지금은 사용하지 않고 있다. 동작은 아래에서 확인 할 수 있다.</p>\n<p><a href=\"https://asciinema.org/a/270031\"><img src=\"https://asciinema.org/a/270031.svg\" alt=\"asciicast\"></a></p>\n<h2>2. alias 설정하기</h2>\n<p>option으로 command 자체가 길어지거나, 빈번하게 command를 연속해서 입력해야 하는 경우에는 축약하거나 한 번에 처리하고 싶어진다. 이런 경우에는 <a href=\"https://git-scm.com/book/ko/v2/Git%EC%9D%98-%EA%B8%B0%EC%B4%88-Git-Alias\">alias</a>를 설정할 수 있다. 간단한 git command 부터 bash 함수까지 실행이 가능하기 때문에 생각보다 많은 것들이 가능해진다.</p>\n<p>내가 처음 사용했던건 log를 좀 더 이쁘게 보기 위한 alias 였다. 이후에 사용하면서 필요하다 싶은 것들을 하나씩 추가했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>alias<span class=\"token punctuation\">]</span>\n\ts <span class=\"token operator\">=</span> status\n\ta <span class=\"token operator\">=</span> <span class=\"token operator\">!</span>git <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">git</span> status\n\tau <span class=\"token operator\">=</span> <span class=\"token operator\">!</span>git <span class=\"token function\">add</span> -u <span class=\"token builtin class-name\">.</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">git</span> status\n\taa <span class=\"token operator\">=</span> <span class=\"token operator\">!</span>git <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">git</span> <span class=\"token function\">add</span> -u <span class=\"token builtin class-name\">.</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">git</span> status\n\tc <span class=\"token operator\">=</span> commit\n\tcm <span class=\"token operator\">=</span> commit -m\n\tca <span class=\"token operator\">=</span> commit --amend <span class=\"token comment\"># careful</span>\n\tac <span class=\"token operator\">=</span> <span class=\"token operator\">!</span>git <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">git</span> commit\n\tacm <span class=\"token operator\">=</span> <span class=\"token operator\">!</span>git <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">git</span> commit -m\n\tl <span class=\"token operator\">=</span> log --graph --all --pretty<span class=\"token operator\">=</span>format:<span class=\"token string\">'%C(yellow)%h%C(cyan)%d%Creset %s %C(white)- %an, %ar%Creset'</span>\n\tll <span class=\"token operator\">=</span> log --stat --abbrev-commit\n\tlg <span class=\"token operator\">=</span> log --pretty<span class=\"token operator\">=</span>format:<span class=\"token string\">'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an>%Creset'</span> --abbrev-commit\n\tllg <span class=\"token operator\">=</span> log --color --graph --pretty<span class=\"token operator\">=</span>format:<span class=\"token string\">'%C(bold white)%H %d%Creset%n%s%n%+b%C(bold blue)%an &lt;%ae>%Creset %C(bold green)%cr (%ci)'</span> --abbrev-commit\n\td <span class=\"token operator\">=</span> <span class=\"token function\">diff</span>\n\tlgdiff <span class=\"token operator\">=</span> <span class=\"token string\">\"!f() { git log --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an>%Creset' --abbrev-commit <span class=\"token variable\">$1</span>..<span class=\"token variable\">$2</span>;}; f\"</span>\n\tlgraph <span class=\"token operator\">=</span> log --graph --pretty<span class=\"token operator\">=</span>format:<span class=\"token string\">'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an>%Creset'</span> --abbrev-commit\n\tbranch-name <span class=\"token operator\">=</span> <span class=\"token operator\">!</span>git rev-parse --abbrev-ref HEAD\n\tpublish <span class=\"token operator\">=</span> <span class=\"token operator\">!</span>git push -u origin <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">git</span> branch-name<span class=\"token variable\">)</span></span>\n\trm-remote <span class=\"token operator\">=</span> <span class=\"token string\">\"!f() { git push origin --no-verify :<span class=\"token variable\">$1</span>; }; f\"</span>\n\trb <span class=\"token operator\">=</span> <span class=\"token string\">\"!f() { git branch -D <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">git</span> branch <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> -E $1<span class=\"token variable\">)</span></span>; }; f\"</span>\n\trt <span class=\"token operator\">=</span> <span class=\"token string\">\"!f() { git tag -d <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">git</span> tag -l $1<span class=\"token variable\">)</span></span>; }; f\"</span>\n\trrt <span class=\"token operator\">=</span> <span class=\"token string\">\"!f() { git push origin --no-verify -d <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">git</span> tag -l $1<span class=\"token variable\">)</span></span>; }; f\"</span>\n\taliases <span class=\"token operator\">=</span> <span class=\"token operator\">!</span>git config --list <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token string\">'alias<span class=\"token entity\" title=\"\\\\\">\\\\</span>.'</span> <span class=\"token operator\">|</span> <span class=\"token function\">sed</span> <span class=\"token string\">'s/alias<span class=\"token entity\" title=\"\\\\\">\\\\</span>.<span class=\"token entity\" title=\"\\\\\">\\\\</span>([^=]*<span class=\"token entity\" title=\"\\\\\">\\\\</span>)=<span class=\"token entity\" title=\"\\\\\">\\\\</span>(.*<span class=\"token entity\" title=\"\\\\\">\\\\</span>)/<span class=\"token entity\" title=\"\\\\\">\\\\</span>1<span class=\"token entity\" title=\"\\\\\">\\\\</span><span class=\"token entity\" title=\"\\t\">\\t</span> => <span class=\"token entity\" title=\"\\\\\">\\\\</span>2/'</span> <span class=\"token operator\">|</span> <span class=\"token function\">sort</span>\n\tcb <span class=\"token operator\">=</span> <span class=\"token string\">\"!f() { git checkout -b feature/KG-<span class=\"token variable\">$1</span>-<span class=\"token variable\">$2</span>; }; f\"</span></code></pre></div>\n<p>아래는 내가 가장 빈번하게 사용하는 alias들이다.<br>\n<code>publish</code> - remote에 현재 브랜치 push<br>\n<code>rb</code> - 정규식에 매핑되는 로컬 브랜치 삭제 / <code>rm-remote</code> - remote 브랜치 삭제<br>\n<code>cb</code> - 특정 포맷에 맞게 브랜치 생성 / <code>ca</code> - commit —amend 줄여쓰기<br>\n<code>ac</code> - add, commit 한 번에 하기 / <code>lg</code> - log 이쁘게 보기</p>\n<p>등록된 alias들이 기억나지 않을 땐 <code>git aliases</code>를 통해 list 확인이 가능하다. 구글링하면 유용한 alias들이 많으니 자신이 자주 사용하는 것들을 등록하고 사용하면 생각보다 많이 편리하다.</p>\n<h2>3. commit message에 이슈 번호 자동 입력하기</h2>\n<p>commit message는 어느정도 가이드라인을 지켜주는게 이력들을 볼 때 편하다. 하지만 매번 기억하기는 어렵기 때문에 commit시 템플릿을 사용하도록 설정해 놓으면 잊지 않고 지킬 수 있다. template 설정도 alias처럼 config 파일에 직접 추가하거나 <code>git config --global commit.template ~/.gitmessage.txt</code> command를 사용할 수 있다.(global 옵션을 사용하지 않으면 repository별로 설정도 가능하다.) 난 개인적으로 <a href=\"https://chris.beams.io/posts/git-commit/\">How to Write a Git Commit Message</a>를 참고해서 아래와 같은 template을 사용하고 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># &lt;type>: (If applied, this commit will...) &lt;subject> (Max 50 char)</span>\n<span class=\"token comment\"># |&lt;----  Using a Maximum Of 50 Characters  ---->|</span>\n<span class=\"token punctuation\">[</span>ISSUE-NUMBER<span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\"># Explain why this change is being made</span>\n<span class=\"token comment\"># |&lt;----   Try To Limit Each Line to a Maximum Of 72 Characters   ---->|</span>\n\n\n<span class=\"token comment\"># Provide links or keys to any relevant tickets, articles or other resources</span>\nResolves: ISSUE-NUMBER\n\n<span class=\"token comment\"># --- COMMIT END ---</span>\n<span class=\"token comment\"># Type can be</span>\n<span class=\"token comment\">#    feat     (new feature)</span>\n<span class=\"token comment\">#    fix      (bug fix)</span>\n<span class=\"token comment\">#    refactor (refactoring production code)</span>\n<span class=\"token comment\">#    style    (formatting, missing semi colons, etc; no code change)</span>\n<span class=\"token comment\">#    docs     (changes to documentation)</span>\n<span class=\"token comment\">#    test     (adding or refactoring tests; no production code change)</span>\n<span class=\"token comment\">#    chore    (updating grunt tasks etc; no production code change)</span>\n<span class=\"token comment\"># --------------------</span>\n<span class=\"token comment\"># Remember to</span>\n<span class=\"token comment\">#    Capitalize the subject line</span>\n<span class=\"token comment\">#    Use the imperative mood in the subject line</span>\n<span class=\"token comment\">#    Do not end the subject line with a period</span>\n<span class=\"token comment\">#    Separate subject from body with a blank line</span>\n<span class=\"token comment\">#    Use the body to explain what and why vs. how</span>\n<span class=\"token comment\">#    Can use multiple lines with \"-\" for bullet points in body</span>\n<span class=\"token comment\"># --------------------</span></code></pre></div>\n<p>그런데 최근에 계속 작성을 하면서 issue 번호를 입력하는 부분이 너무 번거로웠다. 왜냐하면 기본적으로 branch 명에 이슈 번호를 포함해서 정해진 포맷으로 사용하고 있고(이것도 귀찮아서 만든게 <code>cb</code> alias다.) commit시 현재 브랜치명에서 issue 번호를 가져다 template을 자동으로 채워주면 좋겠다는 생각이 들었다.\n그래서 <code>prepare-commit-msg</code> hook을 작성했다. hook은 git workflow의 전후로 script를 실행할 수 있게 해준다. (설정 방법과 자세한 설명은 <a href=\"https://git-scm.com/book/ko/v2/Git%EB%A7%9E%EC%B6%A4-Git-Hooks\">Git - Git 훅</a>을 참고)\n직접 hook directory에 파일을 작성할 수도 있지만 <a href=\"https://github.com/typicode/husky\">husky</a>를 사용하면 hook을 좀 더 쉽게 관리할 수도 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/bash</span>\n\n<span class=\"token assign-left variable\">COMMIT_MSG_FILE</span><span class=\"token operator\">=</span><span class=\"token variable\">$1</span>\n<span class=\"token assign-left variable\">ISSUE_NUMBER_TAG</span><span class=\"token operator\">=</span><span class=\"token string\">'ISSUE-NUMBER'</span>\n\n<span class=\"token assign-left variable\">branch_name</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token function\">git</span> rev-parse --abbrev-ref HEAD<span class=\"token variable\">`</span></span>\n<span class=\"token assign-left variable\">issue_number</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token builtin class-name\">echo</span> $<span class=\"token punctuation\">{</span>branch_name<span class=\"token punctuation\">}</span> <span class=\"token operator\">|</span> <span class=\"token function\">sed</span> -n <span class=\"token string\">'s/^feature\\/\\(.*-[0-9]*\\)-.*/<span class=\"token entity\" title=\"\\1\">\\1</span>/p'</span><span class=\"token variable\">`</span></span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> -n <span class=\"token string\">\"<span class=\"token variable\">$issue_number</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n  <span class=\"token function\">sed</span> -i <span class=\"token string\">\".bak\"</span> <span class=\"token string\">\"s/<span class=\"token variable\">${ISSUE_NUMBER_TAG}</span>/<span class=\"token variable\">${issue_number}</span>/g\"</span> <span class=\"token variable\">${COMMIT_MSG_FILE}</span>\n<span class=\"token keyword\">fi</span></code></pre></div>\n<h2>4. tig (text-mode interface for Git) 사용</h2>\n<p><a href=\"https://github.com/jonas/tig\">tig</a>는 텍스트 기반의 git client다. 따라서 terminal 벗어나지 않아도 되고 커스터마이징이 가능하기 때문에 잘만 사용하면 상당히 유용하다. (나도 간단하게만 사용하고 있는데 좀 더 활용을 해보고 나중에 다시 정리해봐야겠다.)\ntig 메뉴얼은 친절하게 한국어로 번역(<a href=\"https://ujuc.github.io/2016/02/10/tig-manual/\">[번역] Tig Manual</a>)된 것이 있으니 한 번 읽어보면 좋을 듯하다.</p>\n<p>이외에도 github 사용을 편하게 만들어주는 <a href=\"https://hub.github.com/\">hub</a>도 있고, 간단한 설정이나 script를 작성하면 cli를 사용하는 불편함들을 많이 제거할 수 있다.</p>","fields":{"slug":"/dev/easy-git/"},"frontmatter":{"date":"2019/09/21","title":"Git 사용 팁 정리","description":"git cli를 사용하다 생긴 귀차니즘 없애기","tags":["git","cli","git-hook","alias"]}}},{"node":{"excerpt":"오랜만의 연휴로 집에 내려갔다. 역시 할 것 없는 시간동안 뭘 할까 하면서 블로그를 만지작 거렸다. 귀찮아서 미루고 있던 댓글(utterances)도 달아놨고(개발이 주가 아니라 utterances…","html":"<p>오랜만의 연휴로 집에 내려갔다. 역시 할 것 없는 시간동안 뭘 할까 하면서 블로그를 만지작 거렸다. 귀찮아서 미루고 있던 댓글(<a href=\"https://utteranc.es/\">utterances</a>)도 달아놨고(개발이 주가 아니라 <code>utterances</code>를 다는 의미가 좀 없기도 싶었지만 어차피 별로 없겠다 싶어 맘에 드는 걸로 정했다.), 그러면서 이전에 쓴 글들을 다시 한 번 훑어 봤다. 그러다 뒤 늦게 작성했던 올해 목표에 눈이 갔다. 역시나 늦은 감이 있지만 막바지에 다시 되새길 겸 중간 정리를 한 번 해봤다.</p>\n<blockquote>\n<p>이사<br>\n운동 - 10km 마라톤 2회, 한라산 등반, 지속적인 운동<br>\n공부 - 주1회 블로그 포스팅, 월 1권 독서, 개발 공부<br>\n기타 - 취미 1개, 카카오페이지 월 1작품 보기, vim 익히기</p>\n</blockquote>\n<p><strong><em>이사</em></strong><br>\n필수적으로 해야 했기 때문에 무사히 마쳤다. 아직도 정리가 안된건 비밀이다.</p>\n<p><strong><em>운동</em></strong><br>\n마라톤은 3월 1일을 시작으로 4월, 5월에 하나씩 해서 이미 3회를 참가했고 11월 1일 서울 마라톤도 대기 중이다.<br>\n한라산 등반은 겨울이 목표였기 때문에 아직 남았다.<br>\n지속적인 운동은 헬스도 꾸준히 하고 있고, 러닝에 최근 클라이밍 까지 시작했으니 초과 달성이다.</p>\n<p><strong><em>공부</em></strong><br>\n블로그 포스팅은 뒤늦게 열심히 작성하고 있다. 게을러서 못하고 있다가 <a href=\"https://blueshw.github.io/\">회사 동료</a>와 함께 주1회 포스팅을 약속하고 진행 중이다.(난 역시 압박이 있어야 하게된다…)<br>\n독서는 지금까지 완독은 6권 정도 한 것 같다. 아직 읽는 중이거나 중간에 멈춘 책들이 좀 있으나 달빛조각사를 끝냈기 때문에 다른 책에 눈을 돌릴 수 있을 것 같다. (<a href=\"https://page.kakao.com/home?seriesId=29226849\">달빛조각사</a>를 포함시키면 58권이 늘어나지만 제외하고 달성해보기로 했다.)<br>\n개발 공부는 아직 가장 미흡한 것 같다. 분발해야 겠다.</p>\n<p><strong><em>기타</em></strong><br>\n취미는 결국 운동이지만 러닝도 하고 클라이밍도 하면서 운동하고 같이 달성이 된 것 같다. 바램이 있다면 운동외의 한 가지를 시작해보고 싶다.<br>\n<a href=\"https://page.kakao.com/main\">카카오페이지</a> 월 1작품 보기는 위에서 언급했듯이 달빛조각사를 부지런히 읽었다. 앞으로 읽을 책들도 페이지를 통해 읽어볼 예정이다.<br>\nvim은 애초에 하면 좋겠다 싶은 목표여서 그런지 별다른 노력을 하지 않았다. 일하면서 틈틈히 사용해 보는 정도로 그치고 있다.</p>\n<p>보름달이 뜨는 시간에 정리를 하면서, 몇가지 메모를 같이 했다. 어떻게 살지에 대한 마음가짐을 다잡는 느낌으로.</p>\n<blockquote>\n<p>비교하지 말자<br>\n하고싶은건 하면서 살자<br>\n막살진 말자(계획을 갖자)<br>\n후회하지 말자</p>\n</blockquote>\n<p>예전에는 해마다 어떻게 살고 싶은지를 적어놨던 적이 있다. 좀 유치한 것도 있긴 했지만 시간이 좀 지나고 보니 어느정도 그렇게 변해있는 내 모습을 볼 수 있었다.(실제로 미래의 모습을 계속 그려보는게 그렇게 살게 되는데 도움이 된다는 연구 결과가 있다고 한다. 믿거나 말거나지만) 시간이 지나고 이 글을 다시 봤을 때에도 같은 생각을 할 수 있으면 좋겠다는 바램이다.</p>","fields":{"slug":"/life/i-wish/"},"frontmatter":{"date":"2019/09/15","title":"보름달에 소원 빌기","description":"올해 목표 중간 정산 & 보름달 다짐","tags":["2019년","목표","보름달","소원"]}}},{"node":{"excerpt":"회사 창립기념일로 오랜만에 출근을 안하는 금요일 저녁, 친한 후배 커플에게 갑자기 데이트하냐는 연락이 왔다. 뜬금없는 연락에 혼자 할거라고 답했더니 대뜸 자기들도 같이 껴서 더블데이트를 하자고 받아친다. 그렇게 순식간에 더블데이트지만 2+…","html":"<p>회사 창립기념일로 오랜만에 출근을 안하는 금요일 저녁, 친한 후배 커플에게 갑자기 데이트하냐는 연락이 왔다. 뜬금없는 연락에 혼자 할거라고 답했더니 대뜸 자기들도 같이 껴서 더블데이트를 하자고 받아친다. 그렇게 순식간에 더블데이트지만 2+1이 되는 저녁 약속을 잡고 밖으로 나갔다.</p>\n<p>나도 연락을 잘 하는 편이 아닌데다 그들도 바빠서 명절이나 생일 같이 이벤트가 있을 때나 연락을 하고 이렇게 게릴라성으로 일년에 한 두번 보는게 다였다. 하지만 학교 다닐 때 부터 자주 보기도 했고 졸업 하고 나서도 둘 다 취업 준비나 일이 있으면 연락을 해서 조금씩 도움을 주는 척 꼰대 역할을 하면서 벌써 10년 가까운 시간이 흘렀다. 그러다 보니 오랜만에 봐도 편한 후배들이었다.</p>\n<p>오랜만에 얼굴을 마주하니, 몇달 전 까지만해도 남자 후배는 이직에 성공했다고 연락이 와서 기뻐했었는데 예상과 달리 조금은 수척한 모습이었다. 이직 준비를 하면서 연락이와서 이것저것 물어보길래 도움이 될까하여 조언도 해주고 자료들도 건네주고 했었다. 이직 했다는 결과만 듣고 연락이 없어 바쁜가보다 하고 있었는데 얼마 전에 매형이 돌아가시는 바람에 정신이 없어서 연락을 못해서 죄송한단다. 순간 뭐라 할 말이 없어 당황스러웠지만 짧게 위로를 전하고 저녁을 먹으러 갔다.\n그리고 지난 얘기들과 근황들로 회포를 풀었다. 배부르게 저녁을 먹고 조용한 곳으로 자리를 옮겨 맥주를 한 잔씩 하는데 맘이 힘들었는지 조용히 이야기를 하기 시작했다.</p>\n<p>듣고보니 매형은 나보다도 어렸고 아직 어린 아이들도 둘이나 있었다. 그런데 사고로 그렇게 갑자기 세상을 떠났다고 한다. 심지어 한달도 채 지나지 않은 일이었다. 얼마나 힘들었을까 싶으면서도 뭐라 위로를 해 줄 말이 없었다. 실제로 겪어보지 않고는 그 심정을 이해하기란 불가능할 것 같았다. 그렇게 계속 조용히 들을 수 밖에 없었다.</p>\n<p>그 후배는 이전과 다르게 지금은 남들처럼 평범하게 사는게 목표가 되었다고 한다. 갑자기 생긴 일로 남겨진 가족들과 부모님을 보면서 왜 그런 일이 자신에게 그리고 자기 가족들에게 일어났는지 원망도 스럽고, 사람들을 만나는것도 너무 힘들다고 했다. 하지만 더 힘들 누나와 가족들을 위해 버티고 있다고. 돌이킬 수 없다면 최선을 다해 열심히 사는게 본인이 할 일인 것 같다고 한다. 그리고 이렇게 살아있는 것에 감사하게 되었다고. 알면서도 살면서 잘 잊게 되는 말이었다.</p>\n<p>그렇게 조금 더 있다가 그 후배들은 항상 감사하다는 말을 남기고 돌아갔다. 난 별로 해준게 없는 것 같은데 그 아이들은 항상 나에게 고맙다며 일이 있을 때 마다 먼저 연락을 하고, 때론 위로를 때론 축하를 해줬다. 내가 뭘 해준게 없는데 뭐가 그렇게도 고마운지. 그런데 이날 따라 고맙다는 말이 머릿속에 맴돌았다.</p>\n<p>나도 그렇지만 내 주위에는 대부분의 사람들이 고맙다는 말을 잘 하기는 하는 것 같다. 밥 먹으러간 식당에서, 출퇴근 버스에서 내리면서, 그리고 주변 사람들에게도. 하지만 그 의미를 생각해본 사람들은 얼마나 있을까.</p>\n<p>고맙다는 말에는 그에 보답하고 갚으려 애쓴다는 책임의 의미도 같이 담겨 있다. 그 아이들이 나에게 했던 고맙다는 말에도 내가 누군가에게 하는 고맙다는 말에도 그 책임은 모두 담겨 있을 거라고 생각한다. 도와줘서 고맙다는 말에는 도움에 실망되지 않게 살며 나 또한 누군가를 도와주겠다는 책임을. 있어줘서 고맙다는 말에는 나도 당신의 곁에 있겠다는 책임을.</p>\n<p>그렇다면 살아있는 것에 고맙다는 말에는 어떤 책임이 담겨 있을까?</p>\n<p>살아있기 때문에, 살아있다는 것 만으로도 열심히 잘 살아가야 할 책임이 아닐까 싶다. 오래전에 본 영화 <a href=\"https://page.kakao.com/home?seriesId=50704845\">꾸뻬씨의 행복여행</a>에서 말하던, 우리의 인생에 있어 행복할 권리를 넘어선 행복할 책임. 아마 아픔을 겪고 만난 그 후배가 말한 것도 이런 의미가 아니었을까.</p>\n<p>헤어지고 집에 들어와 카톡을 보냈다. 힘내라고 그리고 먼저 연락해줘서 나도 고맙다고.</p>","fields":{"slug":"/life/about-thanks/"},"frontmatter":{"date":"2019/09/08","title":"고마움에 대하여","description":"이 글을 읽는 모든 분들에게 고마움을 드립니다.","tags":["thank_you"]}}},{"node":{"excerpt":"군대를 전역하고 졸업을…","html":"<p>군대를 전역하고 졸업을 1년을 남짓 남겨두고 있을 때 였다. 이러저러한 이유로 혼자 살아보겠다며 출가인지 가출인지 모를 독립을 했다. 물론 대학을 다니면서 기숙사와 자취를 하면서 집에서는 따로 떨어져 살고 있었고 기숙사비나 자취방 월세, 그리고 달마다 용돈을 받는 생활을 했었다. 하지만 이 조차 끊어내고 경제적인 독립까지 시작했다.</p>\n<p>당장 돈을 벌어야 겠기에 휴학을 하고 일을 구했다. 운이 좋게도 어떤 회사에서 구직사이트에 올려놓은 이력서를 보고 연락을 주셨다. 오히려 부담스러워서 주저하던 내게 일 하면서 배우라며 기회를 주셨고, 그렇게 면접을 보고 첫 사회생활을 시작했다. 일년 정도 일을 하다가 다시 복학을 했다. 학비는 어치파 학자금 대출을 받고 있어 문제가 되지 않았지만, 월세와 생활비는 계속 필요했기 때문에 학기를 등록하고 바로 교내 알바를 시작했다. 운이 좋게 적지 않은 시급으로 교내 벤처에서 알바를 하게 됐다.</p>\n<p>이 때 부터가 나에겐 많은 변화가 있던 시기였다. 회사생활을 하면서도 많은 것을 배웠지만, 학교 생활 그리고 졸업 후 취업만 단순하게 생각하던 나에게 새로운 시야를 갖게 해주었다. 그 전까지는 그냥 당장 해야하는 공부만 하면서 살아왔었다. 그러면서 앞으로 난 무엇을 해야할까하는 고민에 빠졌다. 본격적인 방황의 시작이었다.</p>\n<p>같은 학생신분으로 비슷한 고민을 하던 여러 사람들과 매일 어울려 다녔다. 그들 중에는 창업을 준비 또는 시작한 사람들도 있었다. 난 왠지모를 막막함과 두려움에 직접은 하지 못하고 스타트업에서 일을 하거나 팀에 들어가 같이 준비를 해보는 정도로 그쳤다. 하지만 그렇게 몇년이 지나고 난 마지막 남은 학기를 복학했고 생각보다 쉽게 대기업에 취업을 하면서 졸업까지 이어졌다. 신입 사원이 되서는 입사성적이 좋았던지 남들보다 좀 더 나은 대우도 받고 인정을 받으면서 회사 생활을 했다.</p>\n<p>하지만 어쩌다보니 그 후로 두 번의 이직을 했고, 그 과정에서 참 많은 생각을 하게 됐다. 그 중에 잊지 못하는 한 가지가 있다. 지금의 나는 과거의 내가 만든 결과라는 것.</p>\n<p>대학시절 정말 열심히 살았다. 휴학 전까지는 공부를 정말 열심히 했고, 휴학 기간에는 다른 길로 빠지기는 했지만 또 그 나름대로 열심히 충실하게 노력했다. 그 결과가 아마 남들에 비하면 너무나도 쉽게 시작했던 첫 사회생활이었을 거다. 물론 그 때는 몰랐지만… 자만심에 더 이상 별 노력없이 안일하게 살았다. 그 결과가 어설픈 첫 이직과 그로인한 재이직. 그리고 지금의 내 모습이라는 생각이 든다.</p>\n<p>물론 누군가는 지금이 뭐가 어때서? 라는 말을 할 수 있다. 하지만 내가 생각하고 그리던 30대의 모습이 지금의 내 모습과는 많이 다르다. 외적인 모습보다는 삶의 만족에 대한 부분이랄까.</p>\n<p>분명 예전에는 더 열심히 했고, 더 나은 인생을 살고 있다고 생각했던 시절이 있었다. 그런데 지금은 주위를 둘러보면 많은 사람들이 앞서 나가고 있는데 혼자만 오랫동안 제자리 걸음을 하고 있는 것 같은 느낌을 자주 받는다.</p>\n<p>단순 나이가 들어서만은 아닐 것이다. 사실 아직도 난 내가 어떤 삶을 원하는지 어떻게 살지에 대한 확신이 없다. 목표가 없다보니 방향을 못정하고 헤매고 있는 것인지도 모르겠다. 그저 지금은 바로 앞에 주어진 삶을 다시 열심히 살아갈 뿐이다. 그러다 보면 조금 더 나아진 나를 만나게 되지 않을까 생각한다.</p>\n<p>오랜 만에 집에 다녀오면서 떠올랐던 잡념들이 집 정리를 끝내고 쉬면서까지 계속 이어졌다. 정리가 되지 않은 생각들을 짧은 글로 남기느라 글도 어수선하다. 이만 해야겠다.</p>","fields":{"slug":"/life/standstill/"},"frontmatter":{"date":"2019/09/01","title":"제자리 걸음","description":"과거의 내가 만든 현재, 지금의 내가 만들 미래의 나","tags":["nukeguys"]}}},{"node":{"excerpt":"웹에 페이스북 플러그인을 붙여놓게 되면 데이터는 페이스북에 쌓이게 되고 다시 가져올 수가 없다. (데이터를 추출해서 별도로 저장하면 법적인 문제가 생긴다고 한다.)\n그래서 페이스북 플러그인 대신 입맛에 맞게 UI…","html":"<p>웹에 페이스북 플러그인을 붙여놓게 되면 데이터는 페이스북에 쌓이게 되고 다시 가져올 수가 없다. (데이터를 추출해서 별도로 저장하면 법적인 문제가 생긴다고 한다.)\n그래서 페이스북 플러그인 대신 입맛에 맞게 UI를 변경하고 싶을 때는 페이스북에서 제공하는 <a href=\"https://developers.facebook.com/docs/graph-api?locale=ko_KR\">그래프 API</a>를 사용해야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">https://graph.facebook.com/{object-id}/comments\nor\nhttps://graph.facebook.com/comments?id={object-id}</code></pre></div>\n<p>여기서 문제는 가져올 페이지의 <code>object-id</code>가 필요하다는 것이다.\n별도로 알 수 있는 방법이 없어서(찾지 못했다…) 직접 찾아내야 한다. 플러그인에서 댓글의 작성시간을 누르면 새로운 페이지가 나오는데 여기에서 주소표시줄을 보면 <code>fb_comment_id</code>가 아래의 예시처럼 보인다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&amp;fb_comment_id=1234567890123456_2197257797049450</code></pre></div>\n<p>여기서 <code>_</code> 앞에 있는 <code>1234567890123456</code> 이 부분이 api 호출에 사용 할 <code>object-id</code>이다. 단순 하나라면 이정도면 충분하다. 하지만 플러그인이 붙어 있는 페이지가 수십 수백개가 넘는다면 일일히 손으로는 불가능하기 때문에 자동화를 할 필요가 생긴다.\b</p>\n<p>위에서 말한 것 처럼 댓글의 작성일자를 눌렀을 때 <code>object_id</code>가 포함된 경로로 이동되기 때문에, 댓글의 작성일자 태그의 속성을 꺼내오면 될 것 같다. 그래서 간단히 해당 페이지를 긁어서 출력해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> urllib<span class=\"token punctuation\">.</span>request <span class=\"token keyword\">import</span> urlopen\n\nurl <span class=\"token operator\">=</span> <span class=\"token string\">'...'</span>\nhtml <span class=\"token operator\">=</span> urlopen<span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>html<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">\"utf-8\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>정작 댓글 내용은 보이지 않는다. 이유는 플러그인이 javascript가 실행되어야 하는데 request는 javascript 실행을 하지 못하기 때문이다. 코드를 조금 살펴보면 플러그인인 페이지에 iframe으로 추가되는 것을 알 수 있다. 그래서 iframe의 경로(<code>https://www.facebook.com/plugins/feedback.php?app_id=...</code>)로 다시 한 번 들어가 보면 정확하게 플러그인만 보이는 페이지가 나온다.</p>\n<p>이 페이지를 긁어서 다시 출력해보면 역시나 댓글이 렌더링된 코드들이 보이지 않는다. 이 페이지에서도 로딩된 이후에 javascript를 통해 댓글을 렌더링 하고 있기 때문이다.(코드상 <code>requireLazy</code> 함수가 관련 있는 것으로 추측된다.)</p>\n<p>그래서 렌더링이 될 때까지 기다려야 하는데 이를 위해서 <a href=\"https://miyakogi.github.io/pyppeteer/\">pyppeteer</a>를 사용한다. <code>pyppeteer</code>는 google에서 만든 headless chrome을 사용할 수 있게 해주는 node.js 라이브러리인 <a href=\"https://pptr.dev/\">puppeteer</a>를 python으로 porting한 모듈이다.\n(대신 <a href=\"https://www.seleniumhq.org/\">Selenium</a>을 사용 할 수도 있다.)</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> pyppeteer <span class=\"token keyword\">import</span> launch\n\nurl <span class=\"token operator\">=</span> <span class=\"token string\">'...'</span>\nbrowser <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> launch<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\npage <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> browser<span class=\"token punctuation\">.</span>newPage<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span>goto<span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span>waitForSelector<span class=\"token punctuation\">(</span><span class=\"token string\">'.pluginSkinLight'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'timeout'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\nbodyHTML <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span>evaluate<span class=\"token punctuation\">(</span><span class=\"token string\">'() => document.body.innerHTML'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>bodyHTML<span class=\"token punctuation\">)</span></code></pre></div>\n<p>대략 위처럼 테스트해서 코드를 살펴보면 원하던 댓글들이 렌더링되어 있는 것을 볼 수 있다. 여기서 작성 시간에 있는 href만 찾아내면 된다.</p>\n<p>가져온 html을 <a href=\"https://www.crummy.com/software/BeautifulSoup/bs4/doc/\">Beautiful Soup</a>으로 파싱하면 손쉽게 원하는 태그에서 속성들을 추출할 수 있다.</p>\n<p>하지만 잠시 wait하지 않던 코드를 살펴보자. <code>waitForSelector</code> 부분만 주석처리하고 출력된 코드를 보면, 댓글이 렌더링 되어 있지는 않지만 <code>script</code> 태그 안에 댓글들의 데이터가 얼핏 보인다. 그리고 혹시나 해서 object-id 값을 검색해보면 <code>targetFBID</code>라는 키로 값이 존재하는 것을 알 수 있다.</p>\n<p>즉, 렌더링 되는 것을 기다리지 않고 필요한 데이터는 미리 알 수가 있는 것이다.(플러그인이 react로 작성되어 있는데 사용하는 상태값들이 아닐까 싶다.) 해당 값을 단순 string 매핑으로 찾아 낼 수도 있으나, 코드를 보면 javascript 함수(handleServerJS) 안에서 파라미터로 넘어가는 json 객체안에 데이터들이 포함되어 있다. 따라서 이 부분을 추출해서 json 객체로 변환하면 필요한 다른 데이터들도 추출하기가 쉬워진다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> pyppeteer <span class=\"token keyword\">import</span> launch\n<span class=\"token keyword\">import</span> json\n<span class=\"token keyword\">import</span> re\n\npattern <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span><span class=\"token builtin\">compile</span><span class=\"token punctuation\">(</span><span class=\"token string\">r'handleServerJS\\(([^)]+)\\)'</span><span class=\"token punctuation\">)</span>\n\nbodyHTML <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span>evaluate<span class=\"token punctuation\">(</span><span class=\"token string\">'() => document.body.innerHTML'</span><span class=\"token punctuation\">)</span>\np <span class=\"token operator\">=</span> pattern<span class=\"token punctuation\">.</span>search<span class=\"token punctuation\">(</span>bodyHTML<span class=\"token punctuation\">)</span>\nparam <span class=\"token operator\">=</span> json<span class=\"token punctuation\">.</span>loads<span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span>group<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nmeta <span class=\"token operator\">=</span> param<span class=\"token punctuation\">[</span><span class=\"token string\">'require'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'props'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'meta'</span><span class=\"token punctuation\">]</span>\n<span class=\"token builtin\">id</span> <span class=\"token operator\">=</span> meta<span class=\"token punctuation\">[</span><span class=\"token string\">'targetFBID'</span><span class=\"token punctuation\">]</span>\ncount <span class=\"token operator\">=</span> meta<span class=\"token punctuation\">[</span><span class=\"token string\">'totalCount'</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>간단히 정리한 코드기 때문에 자동화를 위한 입출력이나 예외처리, 속도를 조금 올리기 위해 asyncio등을 적용해주면 간단히 쓰기에는 충분해진다.</p>","fields":{"slug":"/dev/scrap-facebook-comment/"},"frontmatter":{"date":"2019/08/25","title":"페이스북 댓글 플러그인 스크래핑하기","description":"python + pyppeteer로 웹 스크래핑 맛 보기","tags":["acrapping","crawling","python","pyppeteer","facebook","comment"]}}},{"node":{"excerpt":"…","html":"<p>이번 주는 아무 것도 하지 않고 쉬기로 했다. 좀 더 정확히 말하면 하려고 계획 하거나 해야 했던 것들은 하나도 하지 않았다. 이 글도 저녁이 되어 글 써야지 하고 내용들을 한참 정리 하다가 이러면 뭔가 하는게 될 것 같아 막판에 계획을 어긋나게 할 수 없어 과감히 지워버렸다.</p>\n<p>주말 동안 아무 것도 하지 않으면서 했던 일들이다.</p>\n<ol>\n<li>토요일 오전에 갑자기 가구 배치가 맘에 들지 않아 침대 방향부터 시작해서 대대적인 가구 이동을 했다.</li>\n<li>그러다보니 대청소도 같이하게 됐다.</li>\n<li>배달 음식은 한 끼만 먹자는 생각에 오랜만에 요리(조리에 더 가까운)도 해먹었다.</li>\n<li>일요일엔 가려고 했던 스터디도 당당히 불참을 눌러놓고 느지막히 일어나서 오랜만에 예능도 챙겨봤다.</li>\n<li>집 꾸미기 하면서 사고싶었던 리클라이너를 알아봤다.</li>\n<li>9월 마라톤을 못가게 되어 취소하고 11월에 서울 마라톤도 새로 등록했다.</li>\n<li>링크드인 inMail에 거절의 답장을 보내고, 잠깐 블록체인에 대해 다시 관심을 가져봤다.</li>\n<li>주변에서 많이 보던 팩트풀리스의 저자가 세바시에서 강연을 했길래 찾아봤다.</li>\n<li>기타 낮잠 자기, 달빛조각사 보기 등등.</li>\n</ol>\n<p>따지고 보면 시간의 흐름에서는 내 머리와 몸은 항상 움직이고 있었는데, 왜 아무것도 하지 않은 것 처럼 느껴질까하는 의문이 생겼다. 물론 이전에도 그런 생각을 한 적이 있었다.(그런 느낌이 너무 크게 다가와서 한동안 불면증에 걸린 적도 있으나, 오늘은 의도적인 하루였기 때문에 괜찮을 듯 싶다.)</p>\n<p>그래서 이 주제로 더 이어서 써보려 전에 봤던 글들을 다시 찾아보기도 했으나, 아무 것도 하지 않기로 한 주말이기에 계획에 어긋나게 하고 싶지 않아 이쯤에서 정리하고 다음으로 미룰 생각이다.</p>\n<p>이렇게 완벽하게 아무 것도 하지 않기로 한 계획을 달성했다.</p>","fields":{"slug":"/life/nothing-weekend/"},"frontmatter":{"date":"2019/08/18","title":"아무 것도 하지 않은 주말","description":"아무 것도 하지 않는 계획 달성하기","tags":["nukeguys"]}}},{"node":{"excerpt":"내가 가장 즐기는 취미 중의 하나가 영화다. 영화를 보기 시작한 건 처음 영화관에 갔던 중학교 때 부터 였던 걸로 기억한다.\n난 깊이 있게 본다기 보다는 다작으로 많이 보는 편이다. 그래서 지금은 왓챠 기록엔 영화가 1,70…","html":"<p>내가 가장 즐기는 취미 중의 하나가 영화다. 영화를 보기 시작한 건 처음 영화관에 갔던 중학교 때 부터 였던 걸로 기억한다.\n난 깊이 있게 본다기 보다는 다작으로 많이 보는 편이다. 그래서 지금은 왓챠 기록엔 영화가 1,700편이 넘어섰다.\n참 많이도 봤지만 한 번 본 영화는 특별한 계기가 있지 않은 이상 다시 보기가 쉽지 않다. 하지만 그 중에도 유별나게 여러 번 본 영화가 두 편 있다. (항상 컴퓨터에 저장되어 있다.)</p>\n<p>하나는 건축학개론. 첫 사랑에 대한 아련한 추억이 있는 것도 아닌데 왜인지 건축학 개론이 나온 시점에 집중적으로 몰아서 봤던 것 같다. 아마 5번 이상? 10번은 안되는 정도 본 것 같다.</p>\n<p>그리고 가장 많이 본 영화. 아마 오늘까지 합쳐 20번 정도는 봤을 것 같은 영화가 있다. 바로 <a href=\"https://namu.wiki/w/%EC%96%B5%EC%85%89%ED%8B%B0%EB%93%9C\">억셉티드</a>다.\n이 영화에 대해 소개를 한 번 해보려고 한다.(나중에 알았지만 06학번, 내가 대학에 입학하던 시절을 배경으로 만들어 졌다. 그래서 더 보게 되는 건지도 모르겠지만.)</p>\n<p>억셉티드는 대학에 합격하지 못해 실망하는 부모님을 속이려 위조한 합격통지서를 시작으로 점점 일이 커져 가짜 대학교를 만들어내는 과정을 그린 영화다.</p>\n<p>주인공인 바틀비 게인즈는 지원한 대학교 8곳에 모두 떨어졌다. 그리고 부모님을 설득하기 위해 대학 4년 동안 학비를 쓰느니 그만큼을 벌겠다는 얼토당토 않는 소리를 하다가 당연히 안좋은 소리를 듣는다.\n그래서 결국은 근처의 명문 대학인 South Harmon의 합격 통지서로 <a href=\"https://www.southharmoninstituteoftechnology.org/\">South Harmon Institute of Technology</a>(S.H.I.T)라는 새로운 대학을 만들어 합격통지서를 위조한다. 그렇게 임시방편으로 시작한 일이 폐쇄한 정신병원을 빌려 가짜 학교 건물을 만들고 엎친데 덮친격으로 클릭만 하면 합격인 홈페이지 덕분에 학생들(다른 곳에서는 모두 떨어진)이 오리엔테이션에 모여들게 된다.</p>\n<p>일을 수습하기 위해 모두를 돌려보내려 모인 강당에서 자신처럼 다른 곳에서 모두 거절당하고 온 학생들에게 동질감을 느끼고 오히려 가짜 대학을 진짜로 바꿔버린다. 그리고 대학이 어떤 곳인지 알아보았지만, 예상외로 대학은 자신의 기대와는 너무나도 다르다는 것을 알게 된다. 취업을 위해 맹목적으로 학점에 목매는 학생들, 빡빡한 일정과 과제들, 정작 듣고 싶은 수업은 듣지 못하는 여주인공 모니카, 그리고 전통이라는 명목으로 선배들에게 괴롭힘을 당하는 절친 슈레이더.</p>\n<p>이에 실망한 주인공은 학생들에게 직접 원하는 과목을 물어보고 그들이 직접 가르치는 커리큘럼을 실행한다.(내가 좋아하는 <a href=\"https://www.opencollege.kr/\">오픈컬리지</a>와 비슷하다.) 요리를 좋아하는 학생의 학비는 요리에, 조각, 명상, 스케이드보드, 심지어 초능력까지. 그들이 직접 원하는 과목을 개설하고 서로 가르치며 배워 나간다.</p>\n<p>하지만 이렇게 평탄하기만 하면 영화가 아니겠지. 안타깝게도 앞뜰을 만들기 위해 S.H.I.T의 부지를 사려던 South Harmon의 교육 관계자들에 의해 모든 행각이 들통나게 된다. 그리고 주인공과 친구들은 자신들이 했던 교육과정을 대학교로 인정받기 위해 교육과정 심문 위원회를 신청하게 된다.</p>\n<p>이 영화의 진정한 매력은 이 심문회 과정에 담겨있다. 닮은게 하나도 없는 학생들을 강제로 모두 같은 모습으로 만들길 원하고, 대학을 좋은 직장에 취업을 위한 과정으로만 여기는 기존의 대학에 대해 주인공은 말한다.\n우리는 그렇지 않아 자랑스럽다고. 대학이 왜 그래야만 하는건지 반문한다. 그들은 그들의 방식대로 우리는 우리의 방식대로 서로 같이 존재 할 수 없는지 말이다. 오히려 학생들의 창의력과 열정을 뺏아간 당신들이 잘못이 아니냐고 말한다.\n그리고 교육부 직원에게도 말한다. 당신의 꿈은 어릴 때 부터 교육부 직원이었냐고. 마술사나 화가, 시인 혹은 세계일주만 하고 싶지 않았냐고 말이다.</p>\n<p>자신도 자포자기로 시작한 일이 정말 놀라운 일이 되었다고 한다. 인생은 가능성으로 가득차 있기 때문에. 그리고 인정 따위는 필요 없다고 말한다. 진정한 교육은 선생이나 시설, 화려한 전통이나 돈은 필요없다고. 그저 자신을 개선하고자 하는 사람들만 있으면 된다고. S.H.I.T에는 그런 사람들로 넘쳐나고 인정 없이도 계속해서 배우고 자랄 것 이며 변하지 않을 것이라고.</p>\n<p>위원회는 결론을 내린다. 혁신을 거부하는 대신 조심스럽게 지켜보겠다며 1년 간의 유예기간을 준다. 그리고 위원장은 주인공에데 다가와 말한다. 자신은 트롬본을 하고 싶었다고. 그렇게 모두 환호하고 다시 학교는 운영되고 주인공도 실망이 가득했던 가족들에게 인정을 받는다. 초능력을 원했던 학생이 South Harmon 학장의 차를 폭발시키며 영화는 끝난다.</p>\n<p>나는 왜 이 영화를 좋아했을까?</p>\n<p>따지고 보면 이 영화는 억지스럽고 비현실 적인 면이 많고, 미국에서도 그렇게 많은 인기를 끌지 못했다.(이상하리 만큼 한국에서는 평이 좋다.) 영화 자체의 완성도나 스토리, 작품성도 뛰어나다고 볼 수 없다. 어찌보면 흔한 킬링타임용 영화에 비할 수 있을 정도라고 볼 수 있다. 단지 교육이라는 주제를 가볍게 풀어냈다. 그것도 너무나 이상적으로. 영화의 마지막 주인공의 발언들은 속시원하게 만들어 주기도 한다.</p>\n<p>한 때는 꿈이 학교를 만드는 일이라고 할 정도 였지만 이유는 사실 잘 모르겠다. 그냥 언제부턴가 교육에 관심이 생겼고, 오히려 난 반대 학교의 방식에 더 가까웠던 것 같지만 S.H.I.T의 교육 방식에 매우 공감이 갔다. 오픈컬리지가 없었다면 직접 해보고 싶을 정도 였다. (오픈컬리지 외에도 열정대학이나 비슷한 서비스들이 생기기도 했다.) 어릴 때 부터 해보고 싶고 관심은 있는 건 많았으나 막상 틀에 갇혀 시도는 못 했던, 그래서 더 그런지도 모르겠다.</p>\n<p>가끔씩 집중이 안되고 생각이 많아질 때 면 이 영화를 보곤한다.(물론 처음의 그 감동은 다시 느껴지지 않지만 그래도 아직은 충분히 볼 만 하다.) 우연히 생각나서 본 김에 책 대신 영화에 대해 정리를 해봤다.\n글에 나타난 것 보다는 더 많은 생각과 감정을 들게 했던 영화라, 앞으로도 당분간은 다시 볼 수 있을 것 같고 원한다면 누군가에게는 추천을 조심스럽게 해 볼만 할 것 같다.</p>","fields":{"slug":"/life/accepted/"},"frontmatter":{"date":"2019/08/11","title":"거절은 거절한다. \"Accepted\"","description":"내 인생 가장 많이 본 영화","tags":["Accepted","06학번","대학교"]}}},{"node":{"excerpt":"최근 작업을 하면서 react 성능에 대해 신경을 써야 할 상황이 생겼다. 아직 정확하게는 모르지만 대충 눈치, 코치, 감으로 chrome과 react의 developer tool…","html":"<p>최근 작업을 하면서 react 성능에 대해 신경을 써야 할 상황이 생겼다. 아직 정확하게는 모르지만 대충 눈치, 코치, 감으로 chrome과 react의 developer tool을 사용해서 성능을 측정하고 개선하는 작업을 했는데, 일단 이번엔 <code>React Developer Tools</code>을 사용해 성능을 측정하하고 개선하는 방법을 정리해본다.</p>\n<h2>성능 측정</h2>\n<p>우선 react와 browser의 렌더링 과정에 대해 간단히 알 필요가 있다. react는 DOM의 직접적인 변경을 방지하기 위해 virtual DOM을 사용하고 실제로 변경이 필요한 부분만 DOM에 반영함으로써 성능을 올린다. 브라우저는 변경이 발생하면 크게 두 과정을 필요에 따라 선택적으로 수행한다. DOM tree를 갱신하는 reflow(layout)와 이를 화면에 반영하는 repaint(painting)이다.(<a href=\"https://developer.mozilla.org/en-US/docs/Mozilla/Introduction_to_Layout_in_Mozilla#Basic_Data_Flow\">Introduction to Layout in Mozilla - Mozilla | MDN</a>)</p>\n<p>브라우저의 DOM에 변경을 가하는 reflow와 repaint도 당연히 성능에 영향이 크지만, react의 virtual DOM을 재계산하는 reconciliation(<a href=\"https://reactjs.org/docs/reconciliation.html\">Reconciliation – React</a>)과정도 생각보다 성능에 많은 영향을 미친다. 따라서 성능을 올리기 위해서는 이 모든 과정에 대한 고려가 필요하다. react의 reconciliation는 react developer tools를 통해 확인할 수 있고, reflow 및 repaint는 chrome의 developer tool을 통해 확인이 가능하다.</p>\n<h3>Highlight Updates</h3>\n<p>react는 컴포넌트의 state나 props가 변경되면 render를 수행하여 virtual DOM을 갱신한다. react의 developer tools에서 Highlight Updates 설정을 켜놓으면 interaction이 발생할 때 마다 리렌더링되는 컴포넌트의 테두리에 색이 변경되는 것을 볼 수 있다. 즉 변경될 필요가 없는데도 특정 부분의 테두리 색이 나타난다면 불필요한 컴포넌트 렌더링이 발생하고 있는 것이다.</p>\n<h3>Profiler</h3>\n<p>위의 방법은 눈으로 쉽게 확인 가능하지만 상세한 내용은 알 수 가 없다. 경우에 따라 보다 정확하고 자세한 내용을 알고 싶다면 profiler를 사용하면 된다. 기본적인 사용법은 profiler 패널에서 record 버튼을 누르고 원하는 interaction을 하거나 시간이 흐른 뒤에 stop을 누르면 그 사이에 발생한 렌더링에 대해 확인 할 수 있다.</p>\n<p><img src=\"https://reactjs.org/static/stop-profiling-45619de03bed468869f7a0878f220586-53c76.png\" alt=\"stop-profiling-45619de03bed468869f7a0878f220586-53c76.png\"></p>\n<h4>Flame Chart</h4>\n<p>prifiling이 끝나면 그 동안에 발생한 commit<sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup>별 flame chart를 보여준다. 각 commit은 패널의 우측 상단에서 표시가 되고 각 commit을 선택하면 해당 commit의 flame chart가 표시된다.</p>\n<p><img src=\"https://reactjs.org/static/commit-selector-bd72dec045515d59be51c944e902d263-8ef72.png\" alt=\"commit-selector-bd72dec045515d59be51c944e902d263-8ef72.png\"></p>\n<p>commit이 많이 표시되는 것은 측정 시간동안 DOM의 변경이 그 만큼 발생했다는 것이고, 바의 색과 높이는 렌더링 소용된 시간을 나타낸다. (높고 노란색일 수록 오래 걸렸다는 의미이다.)</p>\n<p>flame chart에서는 commit에서 각 컴포넌트들의 상태를 나타낸다. 바의 길이(너비)는 마지막 렌더링에 걸린 시간을 의미하고 색은 현재 commit에서 소요된 시간을 의미한다. (해당 컴포넌트와 자식컴포넌트를 포함한다.)</p>\n<p>아래 사진에서보면 <code>App</code>과 <code>HashRouter</code> 컴포넌트의 경우 렌더링에 많은 시간이 걸리고 있으나 회색이기 때문에 현재 commit에서는 렌더링이 발생하지 않았다는 것을 알 수 있고, <code>Router</code> 컴포넌트는 렌더링이 발생했고 대부분의 시간이 자식 컴포넌트인 <code>Nav</code>와 <code>Route</code> 렌더링에 소요된 것을 알 수 있다.</p>\n<p><img src=\"https://reactjs.org/static/flame-chart-3046f500b9bfc052bde8b7b3b3cfc243-53c76.png\" alt=\"flame-chart-3046f500b9bfc052bde8b7b3b3cfc243-53c76.png\"></p>\n<p>컴포넌트를 선택하면 이번 commit에서의 <code>state</code>나 <code>prpos</code>도 확인이 가능하고, 다른 commit을 선택하면 변경도 확인할 수 있어서 렌더링이 발생한 이유도 알 수 있다.</p>\n<h4>Ranked Chart</h4>\n<p>두 번째 ranked chart를 선택하면 현재 commit에서 렌더링이 오래걸린 순으로 컴포넌트를 정렬해서 확인 할 수 있다. 단, 자식 컴포넌트의 렌더링을 포함하기 때문에 표시되는 실제 오래걸리는 컴포넌트가 포함된 tree의 top이 표시될 수 있다는 점을 염두해야 한다.</p>\n<h4>Component Chart</h4>\n<p>전체 profiling 동안 특정 컴포넌트의 렌더링에 대해 알고 싶을 땐 component chart가 유용하다. 컴포넌트를 더블클릭하거나 오른쪽 x표시 옆에 있는 차트 모양 아이콘을 선택하면 볼 수 있다.</p>\n<p><img src=\"https://reactjs.org/static/component-chart-d71275b42c6109e222fbb0932a0c8c09-53c76.png\" alt=\"component-chart-d71275b42c6109e222fbb0932a0c8c09-53c76.png\"></p>\n<p>바의 수는 렌더링 된 횟수를 의미하고 각 바의 높이와 색은 각 commit에서 다른 컴포넌트에 비해 상대적으로 해당 컴포넌트가 렌더링되는데 걸린 시간을 의미한다. 바를 선택하면 자세한 내용을 볼 수 있고, 더블 클릭하거나 x를 누르면 이전 화면으로 돌아갈 수 있다.</p>\n<p>보다 상세한 사용법은 react 블로그를 참고하자. (<a href=\"https://reactjs.org/blog/2018/09/10/introducing-the-react-profiler.html\">Introducing the React Profiler – React Blog</a>)</p>\n<h2>개선 하기</h2>\n<p>profiling 결과를 보다보면 특정 컴포넌트가 렌더링에 시간을 오래 소요하거나 렌더링할 필요가 없는 데도 commit마다 렌더링이 발생하는 경우가 있다. 이런 경우 해당 컴포넌트를 찾아서 불필요한 렌더링이 발생하지 않도록 개선할 필요가 있다.</p>\n<p>우선 렌더링이 발생하는 이유에 대해 생각해보자. react는 state나 props가 변경된 경우 컴포넌트의 변경이 발생할 것으로 예상하고 렌더링을 한다. 이 과정이 위에서 확인되는 렌더링 이다. 최종적으로 실제 DOM에 변경이 없다면 반영이 되지 않겠지만(이 부분은 다음에 정리할 내용에서 확인이 가능하다.) 이 자체만으로 경우에 따라 성능에 많은 영향을 주게 된다. 이 과정을 없애기 위해서는 react에게 렌더링을 할 필요가 없다는 것을 알려줄 필요가 있다. 예상했듯이 class형 컴포넌트에서는 <code>shouldComponentUpdate</code>를 사용하거나 <code>PureComponent</code>를 상속함으로서 미리 정의된 <code>shouldComponentUpdate</code>를 적용할 수 있다. function 컴포넌트에서도 비슷한 역할을 하는 <code>memo</code>라는 HOC가 존재한다.</p>\n<h3>React.memo</h3>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> MyComponent <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">MyComponent</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* render using props */</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>위 처럼 사용하면 <code>PureComponent</code> 처럼 shallow 한 비교를 직접 처리해준다. 하지만 좀 더 복잡하거나 예외적인 처리가 필요할 경우에는 두 번째 인자로 이전 props와 다음 props를 받아서 비교를 수행하는 함수를 전달할 수 있다. <code>shouldComponentUpdate</code>와 다른점이 있다면 반환값이 반대라는 점이다. 이름에서 알 수 있듯이 <code>shouldComponentUpdate</code>는 update여부를 반환하기 때문에 다른 경우에 true를 반환하지만 <code>areEqual</code>의 경우는 비교의 결과를 반환하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token function\">MyComponent</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* render using props */</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">areEqual</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevProps<span class=\"token punctuation\">,</span> nextProps</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/*\n  return true if passing nextProps to render would return\n  the same result as passing prevProps to render,\n  otherwise return false\n  */</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span>MyComponent<span class=\"token punctuation\">,</span> areEqual<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>대부분의 경우에는 추가적인 비교함수 없이 대응이 가능하다. 이 때 주의할 점은 shallow하게 비교하기 때문에 <code>immutable</code>한 데이터를 <code>props</code>로 사용해야 한다는 점이다. 즉, 실제 같은 데이터지만 렌더링 마다 새로운 객체를 생성해서 전달한다면 memo의 의미가 없어지게 되는 것이다.</p>\n<p>즉 부모 컴포넌트에서 <code>useMemo</code>나 <code>useCallback</code>을 사용해서 props를 전달하고 자식 컴포넌트에서 <code>memo</code>가 적용되어 있으면 손쉽게 불필요한 렌더링을 막을 수 있게 되는 것이다. (<a href=\"https://nukeguys.github.io/dev/react-hooks/\">react hooks 복습하기</a> 참고)</p>\n<p>그렇다면 <code>memo</code>는 항상 사용하는 것이 좋겠다는 생각을 할 수도 있다. 물론 대부분의 경우에는 효과를 볼 수도 있겠지만 <code>memo</code>도 내부적으로는 <code>useMemo</code>와 같이 동작을 하기 때문에 추가적인 비용이 들게 된다. 즉 매번(또는 빈번하게) 변경되는 컴포넌트에 적용하게 되면 렌더링은 그대로 유지되면서 추가적인 비용만 더 가중시키는 셈이다. 대표적으로 prpos로 <code>children</code>을 받아서 사용하는 컴포넌트를 들 수 있는데, 일반적으로 children은 매번 변경되거나 별도로 memoization을 하는 경우가 많지 않기 때문이다.</p>\n<p>그래서 일단 적용하지 않은 상태로 구현한 뒤에 propfiling을 통해 필요한 곳에 <code>memo</code>를 적용하는 것을 권장한다.</p>\n<p>이번엔 react development tool을 사용해서 렌더링 성능을 측정하고 개선하는 방법을 간단히 정리해봤다. 다음엔 browser의 렌더링 과정과 측정하는 방법을 정리해 볼 예정이다.</p>\n<div class=\"footnotes\">\n<hr>\n<ol>\n<li id=\"fn-1\">\n<p>react의 lifecyle은 크게 render와 commit으로 나뉜다. render를 수행한 후 변경된 사항을 DOM에 반영하는 과정이다.(<a href=\"http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/\">React lifecycle methods diagram</a>)</p>\n<a href=\"#fnref-1\" class=\"footnote-backref\">↩</a>\n</li>\n</ol>\n</div>","fields":{"slug":"/dev/react-optimizing-performance/"},"frontmatter":{"date":"2019/08/04","title":"react dev tool로 성능 측정 해보기","description":"react 성능 측정 및 최적화","tags":["react","performance","developer tool","useMemo","useCallback","reconciliation","layout","repaint"]}}},{"node":{"excerpt":"Frontend를 시작한지 얼마 되지 않았지만 그 짧은 사이에도 크고 작은 것들이 많이 변화했다. 정말 빠르구나 싶기도 하고 그런게 나름 또 이 세계의 재미가 아닌가 싶기도 하다. React도 16.8이 릴리즈 되면서 hooks라는 api…","html":"<p>Frontend를 시작한지 얼마 되지 않았지만 그 짧은 사이에도 크고 작은 것들이 많이 변화했다. 정말 빠르구나 싶기도 하고 그런게 나름 또 이 세계의 재미가 아닌가 싶기도 하다.</p>\n<p>React도 16.8이 릴리즈 되면서 hooks라는 api가 새롭게 등장했다. 익숙해 지려고 할 때 쯤 새로운 놈이 등장해서 다시 또 적응을 해야했고 지금은 나름 열심히 사용하고 있긴하지만 이쯤에서 자주 쓰는 hooks에 대해 정리를 한 번 해볼까한다. (물론 틀린 내용이 있을 수 있고, 주관적인 생각이 포함되어 있을 수 있다.)</p>\n<p>우선 각 hook에 대해 정리하기 전에 hooks라는 이름에 대해 생각해 볼 필요가 있지 싶다. react 문서에서는 hook을 아래처럼 설명하고 있다.</p>\n<blockquote>\n<p>Hooks are functions that let you “hook into” React state and lifecycle features from function components. (<a href=\"https://reactjs.org/docs/hooks-overview.html#but-what-is-a-hook\">Hooks at a Glance – React</a>)</p>\n</blockquote>\n<p>state와 lifecycle을 <code>hook into</code>한다라는게 바로 와닿지는 않는다. 번역하면 연동한다/끌어드린다/밀어넣는다 정도로 될 듯하다.\nhook이라는 단어는 <code>web-hook</code>이나 <code>hooking</code>처럼 흔하게 사용되는 말로 중간에 동작을 가로챈다는 의미로 보는게 이해가 빠를 것 같다. 따라서 react의 hook도 lifecycle 과정에서 state와 관련된 동작을 수행 할 수 있도록 해준다는 의미로 이해하면 될 것 같다.</p>\n<h2>useState</h2>\n<p>class형 컴포넌트에서 <code>this.state</code>와 <code>setState</code>의 역할을 하는 hook이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span>initialState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>공식문서에 나와있는 이전방식과 hook의 코드도 비교해보자.(<a href=\"https://reactjs.org/docs/hooks-state.html\">Using the State Hook – React</a>)</p>\n<p>하나의 객체가 아니라 필요한 state를 개별로 접근하고 변경할 수 있다는 점에서 관리와 사용이 훨씬 깔끔해진 느낌이다. <code>useState</code>를 사용할 때 주의해야 할 부분도 있다. 우선 class형 컴포넌트 안에서는 사용할 수 없고, setState와 다르게 merge가 아닌 replace된다는 점이다. 두 번째는 setter의 인자로 값이 아닌 함수를 전달할 수 도 있다는 점이다. count를 증가시키는 코드를 예로 보면 일반적으로 아래처럼 할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">increaseCount</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>하지만 setCount를 비동기 callback에서 호출하는 경우에 원하는 대로 count가 증가하지 않는 경우를 경험할 수 있다. 이유는 callback 등록 시점에 함수가 생성되면서 count 값이 고정되어 버리기 때문이다. 처음에 같은 문제를 겪고 한참을 헤맸던 기억이 있다. 이런 경우에는 아래처럼 setCount에 함수(이전 state값을 받아서 새로운 state를 반환하는)를 전달하면 해결 할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">increaseCount</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevCount</span> <span class=\"token operator\">=></span> prevCount <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>물론 위의 경우처럼 단순하게 처리가 불가능한 경우가 있을 수도 있다. 또 state 뿐 아니라 props에 대해서도 동일한 문제가 발생할 수 있다. 그런 경우에는 state를 객체로 변경해서 사용하거나, <code>useRef</code>를 사용해 state 또는 props를 별도의 변수로 저장해서 접근해야 한다.</p>\n<p>추가로 useSate의 초기값으로도 함수를 전달할 수 있다. 이는 초기값 계산의 cost가 높은 경우에 초기화를 지연시키는 역할을 한다.</p>\n<h2>useRef</h2>\n<p>위에서 언급한 <code>useRef</code>도 간단히 정리해본다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> refContainer <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span>initialValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이름에서 유추 가능한 것 처럼, 원하는 값을 객체로 warraping해서 <code>current</code>라는 속성으로 접근할 수 있게 해준다. 보통 DOM의 reference를 담아두는데 사용하지만 class의 멤버 변수처럼 사용하는 것이 가능하다.</p>\n<p>어렵지 않지만 실제로 구현된 아래 코드를 보면 더 쉽게 이해가 된다. (<a href=\"https://github.com/facebook/react/blob/42b75ab007a5e7c159933cfdbf2b6845d89fc7f2/packages/react-reconciler/src/ReactFiberHooks.js#L856-L869\">ReactFiberHooks.js · GitHub</a>)</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> mountRef<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>initialValue<span class=\"token punctuation\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> current<span class=\"token punctuation\">:</span> <span class=\"token constant\">T</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> hook <span class=\"token operator\">=</span> <span class=\"token function\">mountWorkInProgressHook</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> ref <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> current<span class=\"token punctuation\">:</span> initialValue <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>__DEV__<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    Object<span class=\"token punctuation\">.</span><span class=\"token function\">seal</span><span class=\"token punctuation\">(</span>ref<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  hook<span class=\"token punctuation\">.</span>memoizedState <span class=\"token operator\">=</span> ref<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> ref<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> updateRef<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>initialValue<span class=\"token punctuation\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> current<span class=\"token punctuation\">:</span> <span class=\"token constant\">T</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> hook <span class=\"token operator\">=</span> <span class=\"token function\">updateWorkInProgressHook</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> hook<span class=\"token punctuation\">.</span>memoizedState<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>최초에는 ref라는 객체를 만들어 current 속성에 초기값을 설정해서 반환하고, 이후부터는 해당 객체를 반환한다.</p>\n<p>참고로 react의 hooks는 <code>mountXXX</code>와 <code>updateXXX</code>라는 이름으로 최초 실행과 이후 업데이트에서 사용하는 함수가 각각 분리되어 구현 되어 있다.</p>\n<h2>useImperativeHandle &#x26; forwardRef</h2>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token function\">useImperativeHandle</span><span class=\"token punctuation\">(</span>ref<span class=\"token punctuation\">,</span> createHandle<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>deps<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code>useImperativeHandle</code>은 부모에게 원하는 interface를 통해 ref를 사용할 수 있게 해준다. 즉, 부모가 자식의 ref를 직접 받아서 접근할 수도 있지만, 제한하거나 커스터마이징해서 제공을 하고 싶을 때 사용하면 된다. <code>useImperativeHandle</code>은 <code>forwardRef</code>와 함께 사용해야 하는데 간단한 사용법은 아래와 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token function\">FancyInput</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props<span class=\"token punctuation\">,</span> ref</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> inputRef <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">useImperativeHandle</span><span class=\"token punctuation\">(</span>ref<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">focus</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      inputRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>input ref<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>inputRef<span class=\"token punctuation\">}</span> <span class=\"token operator\">...</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\nFancyInput <span class=\"token operator\">=</span> <span class=\"token function\">forwardRef</span><span class=\"token punctuation\">(</span>FancyInput<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>useEffect</h2>\n<p><code>useState</code>와 더불어 가장 자주 사용하고 중요한 hook중의 하나이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span>didUpdate<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>공식문서의 정의는 아래처럼 되어있다.</p>\n<blockquote>\n<p>The Effect Hook lets you perform side effects in function components.</p>\n</blockquote>\n<p>함수형 컴포넌트에서 <code>side effects</code>를 수행할 수 있게 해준다라는 의미가 바로 와닿지는 않는다. 그래서 문서를 조금 더 살펴보면 이런 내용도 있다.</p>\n<blockquote>\n<p>Data fetching, setting up a subscription, and manually changing the DOM in React components are all examples of side effects. Whether or not you’re used to calling these operations “side effects” (or just “effects”), you’ve likely performed them in your components before.</p>\n</blockquote>\n<p>즉, 컴포넌트 내부에서 수행하던 <code>data fetching</code>, <code>subscription(이벤트 등록/해제 같은)</code>, <code>manaual한 DOM변경</code> 등과 같은 state를 직접 처리하는 이외의 동작이나 기능들을 <code>side effect</code> 또는 <code>effect</code>로 부르고 있다.</p>\n<p><code>useEffect</code>가 중요한 이유 중의 하나는 react의 <code>lifecycle</code>과 밀접하게 관련이 있기 때문이다.\n기본적으로 렌더링이 완료된 이후에 실행 되는데 두번째 인자인 <code>deps</code>를 통해 실행 여부를 결정할 수 있기 때문에 class 컴포넌트에 있던 <code>componentDidMount</code>, <code>componentDidUpdate</code>, <code>componentWillUnmount</code>와 같은 lifecycle과 비슷한 역할을 할 수 있다.</p>\n<p>기존 방식과의 차이점은 문서를 확인하면 명확하게 알 수 있다.(<a href=\"https://reactjs.org/docs/hooks-effect.html\">Using the Effect Hook – React</a>)</p>\n<p><code>useEffect</code>에서 함수를 리턴할 수 있는데 이 함수는 다음 effect발생하기 전에 호출이 되기 때문에 메모리 정리나 구독해제 같은 기능을 처리할 수 있다. (<code>componentDidMount</code>에서 등록하고 <code>componentWillUnmount</code>에서 해제하는 것과 유사한 동작)</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> subscription <span class=\"token operator\">=</span> props<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    subscription<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>그런데 위의 코드를 수행하면 매 렌더링시마다 구독/해제가 일어나기 때문에 비효율적이다. 이런 문제를 해결하기 위해서 위에서 언급한 대로 두번째 인자로 <code>deps(dependencies)</code>를 전달할 수 있다. <code>deps</code>는 배열 형식으로 전달하고, 배열의 각 아이템을 shallow하게 비교해서 변경이 발생한 경우에만 effect가 실행된다. 위 코드처럼 전달하지 않으면 매번 실행이 되고, 빈배열(<code>[ ]</code>)을 전달하면 mount/unmount시에만 호출이 된다. 위 코드에서는 props의 source에 접근하고 있기 때문에 그 값이 변할 경우에만 구독/해제를 할 필요가 있다. 따라서 아래처럼 해주면 원하는 효과를 볼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> subscription <span class=\"token operator\">=</span> props<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    subscription<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>props<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>여기서 주의할 점은, 컴포넌트 범위에서 변경될 수 있는 값(state나 props같은)을 누락하게 되면 원하는 동작을 하지 않을 수 있다는 점이다. 예로 위의 코드에서 deps에 []를 넣게 되면, props의 source가 변경되어도 구독은 계속 이전 source에 된 상태로 남아있게 된다.</p>\n<p><code>useEffect</code>에서 직접적인 접근이 없지만 호출하는 함수에서 변경되는 값이 존재하는 경우에도 마찬가지로 추가를 해줘야 하지만 쉽게 인지하기 어려울 수도 있기 때문에 react에서는 <code>eslint-plugin-react-hooks</code>의\n<a href=\"https://github.com/facebook/react/issues/14920\">exhaustive-deps</a> lint rule을 사용하는 것을 권장하고 있다.</p>\n<h2>useCallback</h2>\n<p>callback의 memoization을 만들어주는 hook이다. 즉, 매번 동일한 함수를 생성하는 것이 아니라 변경될 필요가 없는 경우 이전에 생성된 함수를 반환해주는 기능을 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> memoizedCallback <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code>useCallback</code>이 유용성은 react의 특성을 이해하면 알기 쉽다. 자식에게 callback을 전달하는 경우에 부모가 렌더링 되면서 매번 새로 생성된다면 자식입장에서는 props가 변경되기 때문에 함께 렌더링이 발생하게 되는 것이다. 이런 경우 사용하면 memoization된 callback을 전달함으로써 불필요한 렌더링을 방지할 수 있게 되는 것이다. 자식에서 <code>shouldComponentUpdate</code>를 통해 변경여부를 직접 비교해서 렌더링을 결정하는 효과를 간단히 볼 수 있게 된다. 마찬가지로 callback은 <code>deps</code>에 따라 변경여부를 결정하기 때문에 주의해서 사용할 필요가 있다.</p>\n<h2>useMemo</h2>\n<p><code>useCallback</code>이 memoization된 함수를 반환해 주었다면 <code>useMemo</code>는 memoization된 값을 반환해 준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> memoizedValue <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">computeExpensiveValue</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code>deps</code>가 변경된 경우에만 전달된 함수를 호출하여 결과를 반환하기 때문에 cost가 많은 처리를 필요할 때만 수행하도록 할 수 있다. 주의할 점은 <code>useMemo</code>는 렌더링 중에 실행되기 때문에 계산이 아닌 <code>sideEffect</code>(위에서 언급한)를 수행하면 안된다는 것이다. 또한 이후 버전에서는 매번 재계산하는 방식을 택할 수도 있기 때문에 <code>useMemo</code>는 성능 최적화의 목적으로만 사용해야 한다.</p>\n<p>그 외에 <code>useContext</code>, <code>useReducer</code>, <code>useLayoutEffect</code> 등이 있지만 어렵지 않고 사용빈도도 많지 않기 때문에 생략한다. (공식문서를 보면 쉽게 이해할 수 있다.)</p>\n<p>추가로 <code>customHook</code>을 만들어 사용할 수도 있는데, 공식문서(<a href=\"https://reactjs.org/docs/hooks-custom.html\">Building Your Own Hooks – React</a>)를 보면 간단하게 방법을 알 수 있다. 유용한 custom hook은 <a href=\"https://usehooks.com/\">useHooks - Easy to understand React Hook recipes</a>를 참고하면 작성과 사용법을 아는데 도움이 된다.</p>\n<p>간단하게 hook의 내용과 사용법들을 정리해 봤다. 사실 각각 hook을 사용하면서 고민하거나 헤맸던 부분들에 대해서 정리를 하는게 목적이었으나 그 전에 간단히 기본적인 내용들을 먼저 정리해봤다. 이후에 시간이 되면 <code>useEffect</code>와 <code>useCallback</code>의 <code>deps</code>를 사용하면서 들었던 고민들이나 퍼포먼스를 올리기 위해 하고 있는 삽질들을 다시 한 번 정리해볼 예정이다.</p>","fields":{"slug":"/dev/react-hooks/"},"frontmatter":{"date":"2019/07/28","title":"react hooks 복습하기","description":"익숙할 때 쯤 정리해보는 react hooks","tags":["react","hooks","useState","useRef","useImperativeHandle","forwardRef","useEffect","useCallback","useMemo"]}}},{"node":{"excerpt":"집에 TV…","html":"<p>집에 TV가 없기도 하고 잘 보지도 않는데 오늘 아침에 우연히 예능을 보게 됐다. 한 때 자주 보던\n<a href=\"https://page.kakao.com/home?seriesId=51206359\">전지적 참견 시점</a>이었고, 게스트로 <code>강진주</code>라는 배우가 나왔다. 별 생각없이 보다가 문뜩 들렸던 말과 상황에 주말에 쳐진 몸을 움직이고 자아성찰(?)을 하는 계기가 됐다.</p>\n<p>간단히 내용을 정리해 보면, 일을 할 때는 정말 열심히 몰입해서 다 쏟아내지만 정작 쉬는 기간에는 뭘 할지 모르겠다고 한다. 이 말에 매니저가 자기계발을 하라면서 이것저것 관심은 두지만 정작 제대로 끝내는 일은 별로 없다고 잔소리를 해댔다. 이 말에 강진주는 자신이 완벽주의가 있어 완벽하게 해야 한다는 생각에 끝맺음을 잘 못한다면서 완벽하지 않을 거면 시작도 하지 말라는 요상한 핑계를 들었다. 그런데 왠지 내가 하는 말인 것 같아 괜히 뜨끔했다. 이후 집이 나오면서 몇달 전에 시작했단 페인팅을 하다가 멈춘 현관문으로 주제가 바꼈다.</p>\n<p>나도 어릴 때 부터 완벽주의가 있었다.(물론 어디서 과학적으로 측정을하거나 테스트를 해 본건 아니지만) 사실 완벽주의라기 보다 강박이었을 수도 있는 것 같다. 양말 양쪽 끝의 높이를 정확히 맞춰서 올려 신느라 한참을 실랑이하고, 휴지를 접거나 종이를 접어도 항상 귀퉁이를 맞춰서 각잡고 접어야 하고, 가족들 다 보던 매직아이를 혼자만 못 본다는 사실에 잠도 안자고 밤새 눈을 모아서 책을 보던 이상한 강박을 가진 아이였다. 분명 긍정적인 영향도 있었을 거다. 뭘 하던 내가 만족할 때 까지, 남 보다 잘 할 때 까지, 끝을 볼 때 까지 해야하는 것도 내가 나를 힘들게 하는 성격이었지만 그래도 그 덕에 이만큼(?) 되지 않았을까 싶긴하다.</p>\n<p>마침 TV에 나왔던 페인팅을 나도 하고 있다. 처음엔 셀프 인테리어를 해보겠다며 맘을 먹고 역시나 잘해보겠다는 의지로 열심히 알아봤다. 그런데 준비를 하면 할 수록 모르는게 생기고 보기는 더 많아지고 그래서 뭘 해야하는지는 더 모르겠더라는게 문제였다. 아는건 더 많아지고 욕심은 더 커졌지만 막상 뭘 어떻게 시작할까, 그래서 뭘 할건데라는 질문에 쉽게 답을 할 수가 없었다. 중간중간 힘든 것도 있지만 이게 잘 된건지 아닌지도 판단할 수가 없었다. 계속해야 하나? 그만해야 하나를 수없이 고민했던 것 같다. 겨우 이정도까지 오는데 두 달이 넘는 시간이 걸렸다. 나머지의 대부분은 불안과 걱정, 생각에 들였을 시간이다.</p>\n<p>내가 생각하는 내 가장 큰 단점 중의 하나가 <code>실행력 부족</code>이고, 그 이유로 들면서 나를 정의하던 것 중의 하나가 <code>불완전한 완벽주의자</code>였다. 뭔가를 하면 정말 잘하고 싶고 뛰어나고 싶고 끝을 내고 싶어 한 없이 매달렸는데 시간이 지날수록 그렇게 하기가 점점 더 힘들다는 걸 깨달았다. 그리고 점점 더 잘 할 수 있을까, 어떻게 해야 잘할까를 오래 생각하게되고 그렇게 시간만 흐르다 시작을 못하게 된다.</p>\n<p>과연 완벽함이란 마치 영화 <a href=\"https://page.kakao.com/home?seriesId=50504425\">위플래쉬</a>에서 처럼 지독하게도 지향해야 하는 이상일까, 불완전함을 받아들이고 행복하기 위해 지양해야 하는 현실일까? 두 가지 입장(또는 해석)에 대한 책들도 많고 강의나 이야기들도 주변에서 쉽사리 들을 수 있다. 세상에 완전함은 없다는 생각으로 현실에 만족하자고 하지만 막상 내가 하는 일에 대해서는 완벽을 추구하는 모순적인 몹쓸 습관이 오히려 완벽함을 추구하는데 방해가 되고 있지 않은가 하는 생각이 든다.</p>\n<p>또 한편으로 완벽함이란 무엇인가를 고민해보게 된다. 그냥 단순하게 생각하면 완벽함이란 대부분 결과에 대한 정의로 보여진다. 하지만 완벽해지고 싶다는 것은 단순 어떤 사건의 결과만을 원하는 것이 아니라 완벽한 존재에 대한 추구일 것 이다. 즉 시점이 아닌 시간과 경험, 존재 자체에 대한 의미로 보는게 맞는 듯 싶다. 우리가 어떤 존재에 대해 닮고 싶어 하거나 부러워 하는 것은 그 사람이 보여준 하나의 특정 결과가 아닌 그 사람 자체가 되고 싶은 것이기 때문이다.</p>\n<p>결국 완벽함을 결과론적으로 이해하고 그 결과를 위한 수단으로 완벽함이 사용되는 완벽주의는 절대 완벽해질 수 없는 지양해야하는 대상이 되어야 하지 않을까 싶다. 완벽함을 추구해 나가는 과정들을 통해 그나마 우리는 완벽에 가까워 질 수 있고 불완전함을 받아들일 수 있지 않을까.</p>\n<p>이렇게 다시금 생각을 정리하고 마음을 다잡고, 결국 미뤄왔던 페인팅도 마무리하고 블로그 글도 하나 채웠다. 최종적으로 변화된 집이 아닌, 채워진 글의 갯수가 아닌 이 과정을 통해 내가 조금 더 완벽함에 가까워 지고 있는 걸거다. 조금 더 잘 쓰고 싶지만 피곤함에 글을 정리하면서… 떠오른 말로 마무리 한다. “우리 모두는 완벽하게 불완전하다”</p>","fields":{"slug":"/life/imperfect-perfectionism/"},"frontmatter":{"date":"2019/07/22","title":"불완전한 완벽주의에 대하여","description":"예능과 셀프 페인팅으로 자아성찰하기","tags":["완벽주의","전지적참견시점","인테리어","페인팅"]}}},{"node":{"excerpt":"대한민국 최초의 국제회의 통역, 그리고 역대 대통령…","html":"<p>대한민국 최초의 국제회의 통역, 그리고 역대 대통령 5인의 통역을 총괄한 최정화 통역사의 저서이다.</p>\n<p>처음 이 책을 보게된 건, 우연히 서점에 가서 어떤 책을 읽을까 구경하던 중이었다. 심플한 표지에 그리고 제목에 이끌려서 잠깐 내용을 보다가 구매까지 하게 되었다. 말을 업으로 삼는 분의 글이라 그런지 책도 군더더기가 없이 깔끔했던 것 같다. 보이는 부분도 내용도.</p>\n<p>말에 대해 고민을 많이 하던 시기여서 더 읽어보고 싶기도 했고 내용도 읽다보니 계속 읽히게 되는 힘이 있는 것 같다.</p>\n<p>읽기 시작한지는 조금 지나서 앞 부분의 내용들이 자세히 기억나지는 않지만 책에서 전달하려고 하는 내용은 상당히 의미 있게 와닿았던 것 같다. 단지 말을 떠나 소통에 대해. 누군가를 대함에 있어 그 사람에 대한 말을 넘어 자세나 태도, 마음가짐까지 모든 것에 대해 말하는 것 같았다.</p>\n<p>말에는 그 만큼의 무게가 닮겨 있고, 말에도 언향이라는 향이 있으며, 말 하는 사람의 지식과 경험, 인품이 들어가기 때문에 ‘나’라는 사람을 비춘다는 말이 말의 중요성을 다시 한 번 느끼게 해준다.</p>\n<p>그리고 끝 부분에 와닿았던 문구가 있었다.</p>\n<p><strong>“남보다 빨리 성공해서 오랜 시간에 걸쳐 내려오는 삶보다 평생에 걸쳐 천천히 성장의 계단을 오르는 삶이야말로 괜찮은 삶의 운영 방식일지도 모른다.”</strong></p>\n<p>요즘 많이 고민하는 부분과 관련이 있어보여 더 와닿는게 컸던 것 같다. 책을 읽으면서 스스로 많이 반성도 하게 되었던 것 같고 여러모로 좋았던 책이다. 잊혀질 때 쯤 다시 한 번씩 꺼내서 읽어보면 좋을 것 같다.</p>\n<p>카카오페이지 : <a href=\"https://page.kakao.com/home?seriesId=50951010\">https://page.kakao.com/home?seriesId=50951010</a></p>","fields":{"slug":"/book/firstword-9788901222035/"},"frontmatter":{"date":"2019/07/15","title":"첫마디를 행운에 맡기지 마라","description":"대통령의 통역사가 들려주는 품격 있는 소통의 기술","tags":["book","최정화"]}}},{"node":{"excerpt":"몇 달 전부터 준비하던 마라톤이 드디어 다가왔다. 피로는 좀 쌓여있었지만, 컨디션을 좋게 유지하기 위해 들었던 팁에 따라 전날 혼자 스파게티도 먹고 당일 아침엔 일어나자마자 에너지바와 포카리로 에너지를 미리 채웠다. 소집은…","html":"<p>몇 달 전부터 준비하던 마라톤이 드디어 다가왔다.<br>\n피로는 좀 쌓여있었지만, 컨디션을 좋게 유지하기 위해 들었던 팁에 따라 전날 혼자 스파게티도 먹고 당일 아침엔 일어나자마자 에너지바와 포카리로 에너지를 미리 채웠다.<br>\n소집은 8시 였으나 행사 시간을 고려하고 날도 쌀쌀했기 때문에 어느정도 여유를 갖고 출발했다.<br>\n도착해서 주변을 보니 참가자들이 엄청 많았고, 첫 참가라 그런지 살짝 들뜬 마음으로 동료들과 시작을 기다렸다.\n순서대로 출발을 하는데 참가자에 비해 출발선이 비좁았고 통제가 잘 되지 않아서 인지 너무 혼잡했다.<br>\n그래서 이미 출발 했어야 할 하프 주자들이 10km 출발 전에 비집고 들어와서 뛰기도 했는데 좀 더 신경을 써줬으면 좋겠다 싶었다.</p>\n<p>드디어 출발, 참가자가 가장 많은 코스인 만큼 출발이 쉽지가 않았다. 사방이 사람이라 피해서 나가느라 초반엔 좀 정신이 없기도 했다.<br>\n폰도 두고 뛰었고 스포츠 워치도 없어서 페이스를 알 수가 없어 초반에는 동료들과 속도를 맞춰서 적당히 따라갔다.<br>\n그러다 초반 3km 정도가 지나면서는 내 페이스를 잡아보려고 앞만 보고 속도를 조금 올려서 뛰기 시작했다. 아마 페이스를 알 수 있었으면 평소보다 빠르구나 싶어서 조절을 했을 수도 있을 것 같은데 느낌상으로만 뛰다보니 연습 때 속도로 뛰어도 실제 체감으로는 느리게 느껴졌다. 아마 기록이 예상보다 잘 나온 이유가 이래서이지 싶다.</p>\n<p>4km 이정표가 보이면서 이미 반환하고 6km를 뛰고 있는 선두 주자가 보였다. 이미 그만큼이나 뛰었는데도 엄청난 속도로 달려오고 있었다. 오히려 워낙 넘사벽이라 뭐 잘 뛰는구나 생각하고 그냥 지나쳤다.</p>\n<p>5km가 근접해 오면서 실제로 10km를 완주해 본 적이 없기 때문에 후반부에 체력이 떨어지는 상황에 걱정이 많이 됬었다. 그래서 나름 적당히 힘든 만큼만 유지하면서 반환점을 지나고 혼자 머릿속으로 마지막 2~3km에 속도를 내자 생각하고 달렸다.\n개인적으로는 ‘습습후후’하고 끊어서 쉴 수 있으면 아직은 여유가 있는 시점인 듯 했다. 그러다 조금씩 힘이 들면 들숨의 간격이 모호해지고 결국은 ‘습~후후’나 ‘습~후~‘가 되는 것 같다. 그래서 중반까지는 습습후후를 유지할 만큼만 페이스를 유지했다.</p>\n<p>6km를 지나면서 부터는 힘들다는 생각이 들기 시작했다. 주변에 같이 달리는 사람들도 지친 모습이 조금씩 보이기 시작했고 이 와중에 속도를 내는 사람들도 있었다. 속도를 내기엔 아직 아닌 것 같아 느려지지만 말자는 생각으로 앞사람들을 따라갔다.</p>\n<p>어느정도 지나고 종합운동장이 보였고 완주는 하겠구나 싶었는데 남은 거리가 가늠이 되지 않았다. 속도를 내고 싶지만 숨은 차고 잘못하면 막판에 쳐질 것 같았다. 그러다 마침 앞에 뛰는 한 여성분이 적당히 비슷한 속도로 달리고 있었다. 그래서 따라가다 후반에 잡아보자는 생각으로 바짝 붙어 뛰었다. 그러다 서로 의식이 된건지 몇 번을 서로 앞으로 치고 나가기도 했다.</p>\n<p>그렇게 달리다 보니 운동장쪽으로 진입하는 터널이 보였다. 지나면 운동장이 바로 나오는 줄 알고 착각해서 잠시 속도를 올렸는데 아직 좀 남아있는데다 심장이 무리가 가는게 느껴져서 다시 속도를 늦췄다. 아직 다리는 멀쩡한데 더 빨리 뛸 수 없는게 좀 아쉬웠다.\n그리고 좀 지나니 정말 운동장 입구가 보였고 입구를 지나치고 결승선이 보이자 마자 미친 듯이 달렸다. 그 때 따라잡은 사람들이 5~6명은 되는 것 같다. 한 분은 정말 쓰러지기 직전 모습으로 들어가고 있어서 안타깝기도 했지만 빠르게 옆을 지나쳐서 들어갔다.</p>\n<p>결승선을 통과하자 기록측정 소리가 삐하고 들렸고 바로 주저 앉아서 시계를 돌아봤다. 그 때가 아마 49분이 살짝 넘었던 것 같다. 그래서 조금만 더 뛰어서 48분대로 들어올 걸 아쉬운 마음으로 기록증을 받았는데, 기록은 출발선을 통과한 시점부터 측정이 되는지라 시계보다는 좀 더 빠르게 나왔고 최종기록은 48분 24초로 되어 있었다. 동료들과 얘기했던 55분 목표와 준비하면서 개인적으로 세웠던 50분 목표를 달성해서 만족스러우면서도 한편으로는 조금 만 더… 라는 아쉬움도 살짝 남았었다. 이 아쉬움이 다음 마라톤을 참가하게 되는 계기가 되지 않을까 싶다.</p>\n<p>이번 생에 첫 마라톤을 참가하면서 놀랐던 것은 생각보다 마라톤에 참가하는 사람들이 많다는 것, 그리고 잘 달리는 사람들도 많은데 그 중에 여자들의 비중이 적지 않다는 사실에 두번 놀랐다. 83세에 풀코스를 매 주 달리는 할아버지도 계시다고 하니 대단한 일이다.</p>\n<p>나름 준비한다고 매주 연습도하고 했는데 처음 치고는 결과도 만족스러워서 다행이기도 하고, 한 편으로는 연습 때 마다 느꼈지만 다리는 더 달릴 수 있는 상태였는데 그러지 못한게 아쉬웠다. 20대에는 다리가 저릴 때까지 뛰어 다녀도 그런 적은 없었는데… 헬스장 다니면서 다리 근력운동은 병행 했는데 너무 오랫동안 운동을 쉰 탓에 심폐지구력은 많이 떨어진 것 같다. 오랜만에 달리는 맛을 느껴봤고 마라톤에 대한 흥미도 생긴만큼 올해 목표는 10km 2번 참가였지만, 매달은 아니더라도 격달로라도 참가해 볼까 싶다. (이번 대회 100위가 43분인가 45분인가 였던 것 같은데 올 해 안에 45분을 목표로)</p>\n<p>그래서 앞으로도 나는 달릴 예정이다.</p>","fields":{"slug":"/life/i-run/"},"frontmatter":{"date":"2019/03/02","title":"나는 달린다.","description":"생에 첫 마라톤(삼일절 기념 마라톤) 참가 후기","tags":["마라톤","10km"]}}},{"node":{"excerpt":"Do’s and Don’ts General Types Number, String, Boolean, and Oject Don’t\nNumber, String, Boolean 또는 Object 타입을 절대 사용하지 마라. 이 타입들은 JavaScript…","html":"<h1>Do’s and Don’ts</h1>\n<h2>General Types</h2>\n<h3>Number, String, Boolean, and Oject</h3>\n<p><strong><em>Don’t</em></strong>\n<code>Number</code>, <code>String</code>, <code>Boolean</code> 또는 <code>Object</code> 타입을 절대 사용하지 마라. 이 타입들은 JavaScript 코드에서 대부분 적절하지 않게 사용되는 non-primitive boxed object<sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup>들을 의미한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">/* WRONG */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">s<span class=\"token punctuation\">:</span> String</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> String<span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong><em>Do</em></strong>\n<code>number</code>, <code>string</code> 그리고 <code>boolean</code>을 사용하라.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">/* OK */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">s<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code>Object</code> 대신 non-primitive인 <code>object</code> 타입을 사용하라 (<a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-2.html#object-type\">TypeScript 2.2</a>에 추가됨).</p>\n<h4>Generic</h4>\n<p><strong><em>Don’t</em></strong>\n타입 매개변수를 사용하지 않는 generic 타입을 사용하지 마라. 더 자세한 내용은 <a href=\"https://github.com/Microsoft/TypeScript/wiki/FAQ#why-doesnt-type-inference-work-on-this-interface-interface-foot---\">TypeScript FAQ page</a>에서 확인.<sup id=\"fnref-2\"><a href=\"#fn-2\" class=\"footnote-ref\">2</a></sup></p>\n<h2>Callback Types</h2>\n<h3>Return Types of Callbacks</h3>\n<p><strong><em>Don’t</em></strong>\n값이 무시될 콜백의 리턴타입으로 <code>any</code>를 사용하지 마라.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">/* WRONG */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token function-variable function\">x</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">x</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong><em>Do</em></strong>\n값이 무시될 콜백의 리턴타입으로 <code>void</code>를 사용하라.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">/* OK */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token function-variable function\">x</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">x</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong><em>Why</em></strong>\n확인되지 않는 방법으로 <code>x</code>의 리턴타입을 사용하는 실수를 방지해주기 때문에 <code>void</code>를 사용하는 것이 더 안전하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token function-variable function\">x</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> k <span class=\"token operator\">=</span> <span class=\"token function\">x</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// oops! meant to do something else</span>\n  k<span class=\"token punctuation\">.</span><span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// error, but would be OK if the return type had been 'any'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Optional Paameters in Callbacks</h3>\n<p><strong><em>Don’t</em></strong>\n의도한 경우를 제외하고는 선택적 매개변수를 사용하지 마라.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">/* WRONG */</span>\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Fetcher</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">getObject</span><span class=\"token punctuation\">(</span><span class=\"token function-variable function\">done</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data<span class=\"token punctuation\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> elapsedTime<span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이것은 매우 분명한 의미를 갖는다. : <code>done</code> 콜백은 1개 또는 2개의 매개변수를 가지고 호출된다. 작성자는 아마 콜백이 <code>elapsedTime</code> 매개변수에 대해 신경쓰지 않는다는 것을 의도했을 것이다. 그러나 그것을 위해 선택적 매개변수로 만들 필요는 없다. - 더 적은 매개변수를 받는 콜백을 전달하는 것은 언제나 적합하다.<sup id=\"fnref-3\"><a href=\"#fn-3\" class=\"footnote-ref\">3</a></sup></p>\n<p><strong><em>Do</em></strong>\n콜백의 파라미터를 필수(non-optional) 파라미터로 작성하라.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">/* OK */</span>\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Fetcher</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">getObject</span><span class=\"token punctuation\">(</span><span class=\"token function-variable function\">done</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data<span class=\"token punctuation\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> elapsedTime<span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Overloads and Callbacks</h3>\n<p><strong><em>Don’t</em></strong>\n콜백만 다른 별도의 타입 시그니처(overload)를 작성하지 마라.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">/* WRONG */</span>\n<span class=\"token keyword\">declare</span> <span class=\"token keyword\">function</span> <span class=\"token function\">beforeAll</span><span class=\"token punctuation\">(</span><span class=\"token function-variable function\">action</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">,</span> timeout<span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">declare</span> <span class=\"token keyword\">function</span> <span class=\"token function\">beforeAll</span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">action</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">done<span class=\"token punctuation\">:</span> DoneFn</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">,</span>\n  timeout<span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong><em>Do</em></strong>\n모든 것을 포함하는 타입 시그니처 하나만 작성하라.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">/* OK */</span>\n<span class=\"token keyword\">declare</span> <span class=\"token keyword\">function</span> <span class=\"token function\">beforeAll</span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">action</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">done<span class=\"token punctuation\">:</span> DoneFn</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">,</span>\n  timeout<span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong><em>Why</em></strong>\n콜백에서 매개변수를 무시하는 것은 언제나 적합하다.(역자:<sup id=\"fnref-3\"><a href=\"#fn-3\" class=\"footnote-ref\">3</a></sup>과 같은 의미이다.) 따라서 더 간단한 타입 시그니처는 필요하지 않다. 간단한 타입 시그니처를 제공하는 것은 타입이 잘못된 함수가 첫번째 함수 시그니처와 매칭되어 전달되는 것을 허용한다.<sup id=\"fnref-4\"><a href=\"#fn-4\" class=\"footnote-ref\">4</a></sup></p>\n<h3>Function Overloads</h3>\n<h4>Ordering</h4>\n<p><strong><em>Don’t</em></strong>\n더 구체적인 시그니처 전에 일반적인 시그니처를 두지 마라.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">/* WRONG */</span>\n<span class=\"token keyword\">declare</span> <span class=\"token keyword\">function</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">:</span> <span class=\"token builtin\">any</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">declare</span> <span class=\"token keyword\">function</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">:</span> HTMLElement</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">declare</span> <span class=\"token keyword\">function</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">:</span> HTMLDivElement</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> myElem<span class=\"token punctuation\">:</span> HTMLDivElement<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> x <span class=\"token operator\">=</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span>myElem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// x: any, wat?</span></code></pre></div>\n<p><strong><em>Do</em></strong>\n더 구체적인 시그니처 다음에 일반적인 시그니처를 두도록 정렬하라.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">/* OK */</span>\n<span class=\"token keyword\">declare</span> <span class=\"token keyword\">function</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">:</span> HTMLDivElement</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">declare</span> <span class=\"token keyword\">function</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">:</span> HTMLElement</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">declare</span> <span class=\"token keyword\">function</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">:</span> <span class=\"token builtin\">any</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> myElem<span class=\"token punctuation\">:</span> HTMLDivElement<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> x <span class=\"token operator\">=</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span>myElem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// x: string, :)</span></code></pre></div>\n<p><strong><em>Why</em></strong>\nTypeScript는 함수 호출을 결정할 때 처음 매칭되는 시그니처를 서낵한다. 먼저 나오는 시그니처가 뒤의 시그니처보다 더 일반적일 경우, 뒤에 나오는 것은 완벽히 가려지고 호출될 수 없다.</p>\n<h3>Use Optional Parameters</h3>\n<p><strong><em>Don’t</em></strong>\n뒤에 나오는 매개변수들만 다른 경우 여러 시그니처를 작성하지 마라.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">/* WRONG */</span>\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Example</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">diff</span><span class=\"token punctuation\">(</span>one<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">diff</span><span class=\"token punctuation\">(</span>one<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> two<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">diff</span><span class=\"token punctuation\">(</span>one<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> two<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> three<span class=\"token punctuation\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong><em>Do</em></strong>\n가능한 경우에는 선택적 매개변수를 사용하라.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">/* OK */</span>\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Example</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">diff</span><span class=\"token punctuation\">(</span>one<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> two<span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> three<span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이 방법은 모든 시그니처의 리턴타입이 같은 경우에만 가능하다는 것을 주의하라.</p>\n<p><strong><em>Why</em></strong>\n여기엔 두 가지 중요한 이유가 있다.</p>\n<p>TypeScript는 source의 매개변수로 target의 시그니처 호출할 수 있는지, 그리고 관련없는 매개변수가 허용되는지를 보고 시그니처 호환성을 결정한다. 예를 들어, 이 코드는 시그니처가 선택적 매개변수를 사용하여\n정확히 작성된 경우에만 버그를 발생시킨다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token function-variable function\">x</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> x<span class=\"token punctuation\">:</span> Example<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 오버로딩으로 작성되어 있으면, OK -- 첫 번째 시그니처를 사용</span>\n<span class=\"token comment\">// 선택적 매개변수로 작성되어 있으면, 에러</span>\n<span class=\"token function\">fn</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">.</span>diff<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>두 번째 이유는 TypeScript의 <code>stric null checking</code> 기능을 사용하는 경우이다. JavaScript에서 명시되지 않은 매개변수는 <code>undefined</code>로 표현되기 때문에, 일반적으로 선택적 매개변수를 가진 함수에 <code>undefined</code>를 명시적으로 전달하는 것이 좋다. 예를 들어 이 코드는 strict null을 사용하는 경우에도 문제없다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">var</span> x<span class=\"token punctuation\">:</span> Example<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 오버로딩으로 작성되어 있으면, `undefined`를 `string` 타입으로 전달하기 때문에 에러</span>\n<span class=\"token comment\">// 선택적 매개변수로 작성되어 있으면, 정상</span>\nx<span class=\"token punctuation\">.</span><span class=\"token function\">diff</span><span class=\"token punctuation\">(</span><span class=\"token string\">'something'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span> <span class=\"token operator\">?</span> undefined <span class=\"token punctuation\">:</span> <span class=\"token string\">'hour'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Use Union Types</h3>\n<p><strong><em>Don’t</em></strong>\n오직 하나의 매개변수 타입이 다른 경우에는 오버로딩을 사용하지 마라.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">/* WRONG */</span>\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Moment</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">utcOffset</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">utcOffset</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> Moment<span class=\"token punctuation\">;</span>\n  <span class=\"token function\">utcOffset</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> Moment<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong><em>Do</em></strong>\n가능한 경우에는 유니온 타입을 사용하라.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">/* OK */</span>\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Moment</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">utcOffset</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">utcOffset</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">|</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> Moment<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>시그니처의 리턴타입이 다르기 때문에 <code>b</code>를 선택적 매개변수로 하지 않은 것을 주의하라.</p>\n<p><strong><em>Why</em></strong>\n이것은 함수에 값을 그대로 전달하는 사람들에게 중요하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">|</span> <span class=\"token builtin\">string</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 오버로딩으로 작성되어 있으면, 에러</span>\n  <span class=\"token comment\">// 유니온 타입으로 작성되어 있으면, 정상</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">moment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">utcOffset</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"footnotes\">\n<hr>\n<ol>\n<li id=\"fn-1\">\n<p>primitive타입이 아닌 boxing된 object형 타입. 따라서 <code>Numer.MAX_VALUE</code>나 <code>Number.isSafeInteger()</code>등으로 사용가능하다.</p>\n<a href=\"#fnref-1\" class=\"footnote-backref\">↩</a>\n</li>\n<li id=\"fn-2\">\n<p>generic으로 선언하고 내부에서 사용하지 않는 경우를 만들지 말라는 의미로, FAQ 페이지를 보면 해당 타입 매개변수를 사용하는 부분이 없으면 타입추론이 제대로 이루어지지 않는다고 한다.</p>\n<a href=\"#fnref-2\" class=\"footnote-backref\">↩</a>\n</li>\n<li id=\"fn-3\">\n<p>매개변수의 개수에 대한 함수의 타입 호환성에서 할당받는 함수의 매개변수가 더 많은 경우는 호환이 가능하기 때문이다. 자주 사용하는 <code>map()</code>,<code>filter()</code> 같은 함수에 매개변수 하나만 사용하는 콜백을 넘기는 경우를 생각하면 쉽다.</p>\n<a href=\"#fnref-3\" class=\"footnote-backref\">↩</a>\n</li>\n<li id=\"fn-4\">\n<p>호출하는 쪽에서는 항상 정해진 수의 매개변수를 전달하고 콜백에서 필요한 만큼만 받아서 사용해야 하는데, 매개변수 개수가 적은 시그니처가 있으면 호출하는 쪽에서 매개변수를 적게 전달하는 실수가 허용된다.</p>\n<a href=\"#fnref-4\" class=\"footnote-backref\">↩</a>\n</li>\n</ol>\n</div>","fields":{"slug":"/dev/ts-do-and-dont/"},"frontmatter":{"date":"2019/02/11","title":"[번역] TypeScript의 Do's and Don'ts","description":"TypeScript 공식 documentation의 Do's and Don'ts를 번역해 보았다.","tags":["TIL","typscript"]}}},{"node":{"excerpt":"블로그를 만들어서 회고를 먼저 작성하고 싶었으나 늦어지는 바람에 건너 뛰었고, 새해 목표도 미루다 이제서야 정리를 한 번 해본다.\n정말 다사다난 했던 201…","html":"<p>블로그를 만들어서 회고를 먼저 작성하고 싶었으나 늦어지는 바람에 건너 뛰었고, 새해 목표도 미루다 이제서야 정리를 한 번 해본다.\n정말 다사다난 했던 2018년 회고를 했으면 무슨 내용이 있었을까 싶지만 기록으로 남기지 않는 편이 좋은 것 같기도 하고…</p>\n<p>정작 조금만 지나면 잊어 버리고 일 년을 보내지만 매년 해가 바뀔 때 마다 큼직한 목표들을 세운다.\n올 해는 크게 분류를 하고 분류마다 하위에 구체적은 목표를 정해봤다. 그리고 그 중에 반드시 해야 할 것들을 한 가지씩 선택해서 꼭 해보려고 한다. 계획이란 너무 빡빡하면 반드시 틀어지는 법이니, 나름 여유를 두기 위해서다.</p>\n<p>목표랄 것 도 없지만 일단 가장 처음 적어놨던 건 <code>이사하기</code>.\n나름 교통도 좋고 살기도 좋아서 능력만 되고 기회만 된다면 잠실에 터를 잡고 싶지만, 1시간이 넘게 버려지는 출퇴근 시간이 너무 싫다. 더구나 다른 조건 따질 필요 없는 혼자인 자취생에게는 가까운게 최고인 것 같다.\n이미 이것저것 알아보느라 머리 아프지만 나름 지금껏 만족할 집들을 찾아 왔으니 이번에도 기대를 해 본다.</p>\n<p>나머지는 크게 <code>운동</code>, <code>공부</code>, <code>기타</code> 세 분류로 나눠봤다.</p>\n<p>운동은 다시 <code>10km 마라톤 2회</code>, <code>한라산 등반</code>, <code>헬스</code>로 잡았다.<br>\n우연히 회사 동료들을 따라 3월 1일 10km 마라톤을 예약했고, 준비하다보니 나름 뛰는 재미가 있어 가을 쯤에 한 번 더 해보려고 한다. 한라산은 등산을 해보고 싶었는데 제주도도 갈 겸 좋다는 얘기도 들어서 겸사겸사 정했고, 헬스는 작년 연말부터 열심히 시작했다가 문을 닫는 바람에 다시 못하게 되버렸다. 대신 매일이 아니더라도 꾸준히 할 수 있는 운동을 하나 찾아서 해보려고 한다. 예를 들면 클라이밍이나 전에 배웠던 복싱이나 등등.</p>\n<p>두 번째 공부는 <code>블로그(1post/1week)</code>, <code>독서(월 1권)</code>, <code>개발 공부</code>로 정해봤다.<br>\n블로그는 나름 열심히 만들어서 시작한 만큼 유지하고 싶기도 하고 다른 목표들에 대한 기록도 할 겸 꾸준히 해보고 싶다. 그래서 일주일에 글 하나씩 써보자 싶었고, 이 목표를 달성하려면 다른 것들을 해야할 테니 시너지를 낼 수 있지 않을까 생각된다. 모를 일이지만… 그리고 지금의 내 생각들을 남겨 놓고 싶었다. 예전 티스토리에 썼던 몇 안되는 글이 다시 읽으니 감회가 새로웠다. 독서는 항상 넣어두는 목표지만 항상 실패했던… 그래서 장르불문 그냥 양으로 달성하는 것을 일단 목표로 잡았다. 개발은,,, 아직 두루뭉실하다. 해야할 게 너무나 많기 때문에. 일단은 일과 관련된 front-end 영역과 알고리즘 공부(python)를 생각해봤다. 평일에 헬스를 못하게 된 만큼 대신 공부 계획을 세워서 진행 해 볼까 싶다.</p>\n<p>마지막은 말그대로 기타 분류하기 애매한 것들을 모아서 정해봤다. <code>취미 1개</code>, <code>카카오페이지 월 1작품 보기</code>, <code>vim 익히기</code>.<br>\n뭔가 개발이 아닌 취미로 시작해서 제2의 직업까지 갈 수도 있지 않을까 싶은, 평소에 하고 싶었던 것들 중 하나를 취미로 시작해 볼까 한다. 예를 들면 가죽 공예, 보컬 트레이닝, 알콜(?)에 대한 공부 -맥주, 와인, 위스키 뭐 이런 것들-, 요리 자격증 같은 것이랄까. 뭘 할지는 아직 미정이다. 그 다음 페이지 월 1작품 보기는 사실 내가 안쓰는 서비스를 만드는 건 싫기도 하고 만드는 사람이 사용하는 사람보다 모른다는 게 좀 부끄럽다는 생각을 한다. 그래서 전부터 항상 일과 관련 된 제품이나 서비스는 틈나는 대로 쓰고 익히려고 했다. 그래서 여러모로 도움이 되지 않을까 싶어 덤으로 같이 넣었다. vim은 부가적인 목표랄까. 되면 좋고 아니면 마는 부담없이 도전해보기 위해 넣었다. 전에도 한 번 시도를 해봤으나 부담감을 가지고 하다보니 더 안되고 효율도 더 떨어진다. 그냥 일하면서 틈틈히 필요한 부분들만 익히고 어느정도 익숙해지면 연말에는 키보드를 HPHK으로 바꿔볼까 싶다.</p>\n<p>아직 뭔가 구체적이지 못한 부분이 많긴 하지만, 너무 빡빡하면 오히려 잘 안하게 되는걸 아는지라 일단은 여기까지하고 차차 다듬고 진행해 볼 생각이다. 연말 회고가 기대되는 건 기분 탓이겠지.</p>\n<blockquote>\n<p><strong>2019 새해 목표</strong><br>\n이사<br>\n운동 - 10km 마라톤 2회, 한라산 등반, 지속적인 운동<br>\n공부 - 주1회 블로그 포스팅, 월 1권 독서, 개발 공부<br>\n기타 - 취미 1개, 카카오페이지 월 1작품 보기, vim 익히기</p>\n</blockquote>","fields":{"slug":"/life/2019-as-what-i-say/"},"frontmatter":{"date":"2019/02/06","title":"말하는 대로 기록하는 대로, 2019년 목표","description":"이제서야 적어보는 새해 목표","tags":["2019","목표","새해다짐","작심삼일"]}}},{"node":{"excerpt":"…","html":"<p>읽기 시작한 지 거의 두 달이 넘어서 마지막 장을 덮었다. <a href=\"https://brunch.co.kr/@daljasee#articles\">브런치</a>에서 우연히 보게 된 작가의 글이 좋아 구독을 시작했다. 그러다 책이 출간했다는 소식을 접하고 얼마 후 서점에 들렀다.</p>\n<p>내가 한 때 많이 읽던 자기개발서들을 보지 않게 된건 언제부턴가 강요스럽고 상업적인 느낌을 받으면서 부터다. 뻔한 내용들로 성공한 사람들은 이렇게 살았으니 너희들도 이렇게 살아야 한다고 말하는 것 같았다. 그리고 이후엔 그냥 에세이 같은 글들이 좋았다. 주로 책보다는 블로그나 브런치를 통해 그런 짤막한 글 들을 읽었다.</p>\n<p>나와 별반 다르지 않은 주변의 사소하고도 평범한 일상, 그리고 그에 대한 작가만의 느낌이나 생각. 무언가를 기억하려고도 머릿속에 담으려 하지 않아도 되고 읽는 순간 순간 떠오르는 생각과 느낌을 공감하고 받아들이면 충분했다.</p>\n<p>이 작가의 글도 그랬다. 읽고 있으면 자연스레 미소가 나기도 슬퍼지기도 했다. 물론 작가가 그래야 한다라기보다 글을 읽으면서 내가 느끼는 자연스런 감정들이었다. 다 읽고나서 뭔가를 배웠습니다하고 정리할 필요 없이 그저 그렇게 책장을 덮으면 그만이나 책의 여운은 남아 기분 좋은 그런 책이었다.</p>\n<p>책을 덮기 전에 나온 글들을 적어본다.</p>\n<blockquote>\n<p>… 어두운 게 나쁜 건 아니다. 우리가 부정적이라고 느끼는 우울함, 죽고 싶다는 마음 같은 것들은 유독 이상한 사람들의 전유물이 아니다. 살아가는 누구나 한 번쯤은 어둠에 홀리고, 죽음을 떠올리기도 한다. 어둠은 해가 지면 찾아오는 짙은 밤처럼 당연하고도 자연스러운 삶의 일부분이다. 우리는 언제라도 어둠 속에 머무를 수 있고, 원한다면 그곳에서 내내 깊은 잠을 잘 수도 있다.<br>\n예전의 나처럼, 그리고 청년처럼, 어둠 속에 머물러 있는 사람이 있다면 말해주고 싶다. 괜찮다고. 다만 잠시만 그곳에 머무르라고. 어둠 속을 걷다보면 어딘가에서 당신을 이끌어 줄 빛을 만날 거라고.<br>\n어둠 속이 너무도 희미해 잘 보이지 않는다고 걱정할 필요는 없다.<br>\n우리는 달빛에도 걸을 수가 있으니까. - 달빛에도 걸을 수 있다 -</p>\n</blockquote>\n<blockquote>\n<p>… 그대로 지하철 역사 안을 걸었다. 지나가는 사람들, 서성이는 사람들, 누구가를 기다리는 사람들, 무언가를 파는 사람들, 멍하게 서 있는 사람들. 많은 사람을 바라보는데 묘한 기분이 들었다. 이들도 저마다의 사연과 삶이 있겠지. 모두가 착하지 않아도, 모두가 친절하지 않아도 괜찮았다. 꼭 보이는 얼굴이 전부는 아니니까. 무표정으로 종종걸음을 걸으며, 적당한 거리를 유지한 채 서로 스쳐 가는 타인들에게 나는 무한한 애정을 느꼈다. 경이로움도 함께.<br>\n아마도 우린 이렇게 우주를 만드는 걸까. 혼자라도 좋았다. 무수한 사람들 속에 포함된 하찮은 존재라도 좋았다. 나는 작고 작은 우주 알갱이가 되어 두둥실, 무중력으로 걷는 기분이 들었다. 글을 쓰기 시작하고 나서는 이런 기분을 거의 매일 느끼고 있다. 정말 감사한 일이다. - 우리는 이렇게 살아가고 있었다 -</p>\n</blockquote>","fields":{"slug":"/book/moonlight-1195538227/"},"frontmatter":{"date":"2019/01/27","title":"우리는 달빛에도 걸을 수 있다.","description":"특별할 것 없는 우리 삶에도 드라마가 있다. 일상의 사소한 순간, 소중한 사람들에 대하여","tags":["book","고수리"]}}},{"node":{"excerpt":"MS에서도 엣지에 크로미움을 사용한다고 발표한 상황에서, 팀에서도 IE10을 더이상 지원하지 않기 위한 근거로 서비스 접속 대한 브라우저 통계가 필요했다. 가이드를 통해 nginx의 access 로그와 GoAccess…","html":"<p>MS에서도 엣지에 크로미움을 사용한다고 발표한 상황에서, 팀에서도 IE10을 더이상 지원하지 않기 위한 근거로 서비스 접속 대한 브라우저 통계가 필요했다.<br>\n가이드를 통해 nginx의 access 로그와 <a href=\"https://goaccess.io/\">GoAccess</a>에 대해 알게 되었고 이를 사용하여 간단하게 로그 분석을 해봤다.\n단순하게 사용만 해본 터라 깊이는 없지만 오랜만에 사용해본 쉘 명령어도 되짚어 볼 겸 간단하게 정리해 본다.</p>\n<p>우선 서버에서 원격으로 접근 가능한 위치에 받아올 로그 파일을 미리 복사해 두고 scp를 통해 내려 받아 압축을 해제한다. (회사에서는 일주일 단위로 로그를 압축하여 백업하고 있었고, 실 서비스 서버이므로 로컬 PC로 로그파일을 내려 받아서 진행했다.)</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># scp로 로그파일 내려받기</span>\n<span class=\"token function\">scp</span> 계정@호스트:파일경로 저장할파일이름   <span class=\"token comment\"># 원하는 파일만</span>\n<span class=\"token function\">scp</span> -r 계정@호스트:폴더경로 ./ <span class=\"token comment\"># 폴더 통째로</span>\n\n<span class=\"token comment\"># gzip/gunzip으로 압축 해제하기</span>\n<span class=\"token function\">gzip</span> -d access.log-xxxxxxxx.gz <span class=\"token comment\"># (gunzip access.log-xxxxxxxx.gz) 원하는 파일만</span>\ngunzip -r ./accesslog <span class=\"token comment\"># 폴더의 압축파일들을 한 번에 해제</span></code></pre></div>\n<p>로그파일이 준비됐으니 GoAccess를 설치한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">brew <span class=\"token function\">install</span> goaccess</code></pre></div>\n<p>GoAccess로 분석을 하기위해 로그파일의 포맷을 설정파일에 명시해야 한다. <code>time-format</code>, <code>date-format</code>, <code>log-format</code> 세 가지만 설정 해주고, 로그가 표준화된 형식일 경우 실행시에 옵션으로 넣어줘도 되는 듯 하다.<br>\n미리 정의된 형식이 주석으로 있으니 해제하여 사용하거나 없으면 맞게 작성해주면 된다. 내 PC의 설정파일의 위치는 <code>/usr/local/Cellar/goaccess/1.2_1/etc/goaccess.conf</code>였다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\">######################################</span>\n<span class=\"token comment\"># Time Format Options (required)</span>\n<span class=\"token comment\">######################################</span>\ntime-format %H:%M:%S\n\n<span class=\"token comment\">######################################</span>\n<span class=\"token comment\"># Date Format Options (required)</span>\n<span class=\"token comment\">######################################</span>\ndate-format %d/%b/%Y\n\n<span class=\"token comment\">######################################</span>\n<span class=\"token comment\"># Log Format Options (required)</span>\n<span class=\"token comment\">######################################</span>\nlog-format %h - %^ <span class=\"token punctuation\">[</span>%d:%t %^<span class=\"token punctuation\">]</span>  <span class=\"token string\">\"%r\"</span> %s %b <span class=\"token string\">\"%R\"</span> <span class=\"token string\">\"%u\"</span> %T <span class=\"token string\">\"%^\"</span></code></pre></div>\n<p>GoAccess를 사용하기 전에 필요한 로그를 가공 할 필요가 있었다.\n<a href=\"https://page.kakao.com\">카카오페이지 웹</a>의 경우 PC와 모바일 버전이 다르고(당연히), 모바일의 경우 앱 내에서 호출하는 경우가 있어 제외시켜야 했다. 추가로 리다이렉션(응답코드 30X) 되는 경우도 로그가 중복이기 때문에 제외 시켰다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 앱에서 호출하는 경우 userAgent에 KakaoPage가 포함된다.</span>\n<span class=\"token function\">sed</span> <span class=\"token string\">'/KaKaoPage/d'</span> access.log-xxxxxxxx <span class=\"token operator\">></span> 1_only_web\n<span class=\"token comment\"># 응답코드 30X인 레코드를 제외시킨다.(더 정확하게 할 수 있겠지만 이 정도만 해도 충분했다.)</span>\n<span class=\"token function\">sed</span> <span class=\"token string\">'/\" 30. /d'</span> 1_only_web <span class=\"token operator\">></span> 2_delete_redirect</code></pre></div>\n<p>GoAccess를 실행시켜 로그 파일을 분석하고 결과를 html파일로 만든다. (결과 화면은 <a href=\"https://goaccess.io/\">https://goaccess.io/</a>를 참고)</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">goaccess 2_delete_redirect -a -o 2_delete_redirect.html</code></pre></div>\n<p>결과를 대략 정리해 보면 크롬이 대부분을 차지했고, IE와 엣지는 통틀어 3%가 되지 않았다. IE10은 약 20명 내외였으며 서버 수를 고려한다 해도 절대치가 미미한 수준이었다. 아마도 이제 IE10 지원에 대한 고민은 하지 않아도 될 듯 하다.</p>","fields":{"slug":"/dev/goaccess-analyzer/"},"frontmatter":{"date":"2019/01/24","title":"[TIL] GoAccess로 nginx access 로그 분석 겉핥기","description":"브라우저별 접속 통계 확인을 위한 GoAccess 사용기","tags":["TIL","GoAccess","nginx","IE10"]}}},{"node":{"excerpt":"…","html":"<p>드디어 오랫동안 만지작거리던 블로그를 완성했다.<br>\n좀 더 마음에 들게 만들고 첫 글도 각 잡고 앉아서 쓰고 올리고 싶었으나,\n지금까지 시도만 여러번으로 일단 시작하자는 생각에 글을 보여줄 수 있는 정도까지만 만들고 나서 올리려다보니 글이 없으면 에러가 나는 바람에 결국 급하게 글을 작성하고 있다.</p>\n<p>평소에 글을 써보고 싶었으나 맘처럼 안되고 주로 정리하는 내용들이다 보니 기술 블로그 비슷한 것도 하나 해보고 싶어서 네이버부터 티스토리, 미디엄, 브런치, <a href=\"https://jekyllrb.com/\">jekyll</a> 그리고 <a href=\"https://www.gatsbyjs.org/\">gatsby</a>까지 시도만 수십 번을 했었다.<br>\n결국 제대로 돌아가고 있는건 없고 그나마 유입이 되는건 <a href=\"http://nukeguys.tistory.com/\">티스토리(http://nukeguys.tistory.com/)</a> 정도인 것 같다. 그래봤자 하루에 1~20명 정도지만…</p>\n<p>아직 갈 길은 멀지만 그래도 이렇게 글을 써서 올린다는 것 만으로도 나름 뿌듯한 감이 있다.\n이전에는 혼자 시도를 하다보니 지속이 안됐던 것 같은데, 지금은 주변에 블로그를 하시는 분들이 있다보니 같이 힘을 받는 것 같다. 아직은 허접하지만 천천히 하나씩 만들고 채우고 가다보면 그럴 듯 해 지는 날이 오겠지.</p>\n<p>이 글이 블로그의 시작이 되고, 블로그가 올해 목표의 출발점이 되어 앞으로 더 많은 시작을 할 수 있기를 바란다.</p>\n<blockquote>\n<p>“끝까지 도달하는 것이 결말을 의미하지는 않는다. 여러 번, 나는 뭔가를 끝내는 것이, 단순히 새로운 길의 시작에 불과한 것인지, 스스로 궁금하다고 생각한다. 그리고 그 질문은, 나를 처음부터 다시 시작하도록 격려해준다.” - 파블로 알보란 -</p>\n</blockquote>\n<h6>참고한 블로그들</h6>\n<ul>\n<li><a href=\"https://ahnheejong.name/\">https://ahnheejong.name/</a></li>\n<li><a href=\"https://blog.cometkim.kr/\">https://blog.cometkim.kr/</a></li>\n<li><a href=\"https://adhrinae.github.io/\">https://adhrinae.github.io/</a></li>\n<li><a href=\"https://blueshw.github.io/\">https://blueshw.github.io/</a></li>\n<li><a href=\"https://blog.hax0r.info/\">https://blog.hax0r.info/</a></li>\n</ul>\n<h6>Thanks to</h6>\n<ul>\n<li><a href=\"https://www.gatsbyjs.org/\">gatsby</a></li>\n<li><a href=\"https://bulma.io/\">bulma</a></li>\n<li><a href=\"https://github.com/\">github</a></li>\n<li><a href=\"https://fonts.google.com\">google font</a></li>\n</ul>","fields":{"slug":"/life/hello-world/"},"frontmatter":{"date":"2019/01/09","title":"시작","description":"gatsby로 블로그를 만들고 처음 쓰는 글","tags":["블로그","gatsby","시작","가즈아"]}}}]}},"pageContext":{}}}